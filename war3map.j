globals
//globals from JapiConstantLib:
constant boolean LIBRARY_JapiConstantLib=true
integer array i_1
integer array i_2
integer array i_3
integer array i_4
integer array i_5
integer array i_6
integer array i_7
integer array i_8
integer array i_9
integer array i_10
integer array i_11
integer array i_12
integer array i_13
integer array i_14
integer array i_15
integer array i_16
integer array i_17
integer array i_18
integer array i_19
integer array i_20
integer array i_21
integer array i_22
integer array i_23
integer array i_24
integer array i_25
integer array i_26
integer array i_27
integer array i_28
integer array i_29
integer array i_30
integer array i_31
integer array i_32

//endglobals from JapiConstantLib
//globals from YDWEEnumUnitsSelectedNull:
constant boolean LIBRARY_YDWEEnumUnitsSelectedNull=true
//endglobals from YDWEEnumUnitsSelectedNull
//globals from dataSetAndGet:
constant boolean LIBRARY_dataSetAndGet=true
//endglobals from dataSetAndGet
//globals from funcForDebug:
constant boolean LIBRARY_funcForDebug=true
//endglobals from funcForDebug
//globals from funcForRegister:
constant boolean LIBRARY_funcForRegister=true
//endglobals from funcForRegister
//globals from japi:
constant boolean LIBRARY_japi=true
hashtable japi_ht=InitHashtable()
integer japi___key=StringHash("jass")
//endglobals from japi
//globals from LocalActionLib:
constant boolean LIBRARY_LocalActionLib=true
constant hashtable LocalActionLib___ht=japi_ht
constant integer LocalActionLib___key=StringHash("jass")
//endglobals from LocalActionLib
//globals from d3d:
constant boolean LIBRARY_d3d=true
constant hashtable d3d___ht=japi_ht
constant integer d3d___key=StringHash("jass")
//endglobals from d3d
//globals from funcForGame:
constant boolean LIBRARY_funcForGame=true
//endglobals from funcForGame
    // User-defined
real array udg_CreepsBirthPointX
real array udg_CreepsBirthPointY
integer array udg_CreepsTypeBoss
integer array udg_CreepsTypeMinion
integer array udg_CreepsMinionCount
rect array udg_CreepsBirthRect
rect array udg_CreepsRefrushRect
real udg_r= 0
    // Generated
rect gg_rct_CreepBirth_00= null
rect gg_rct_CreepBirth_01= null
rect gg_rct_CreepBirth_02= null
rect gg_rct_CreepBirth_03= null
rect gg_rct_CreepBirth_04= null
rect gg_rct_CreepBirth_05= null
rect gg_rct_CreepBirth_06= null
rect gg_rct_CreepBirth_07= null
rect gg_rct_CreepBirth_08= null
rect gg_rct_CreepBirth_09= null
rect gg_rct_CreepCamp_00= null
rect gg_rct_CreepCamp_01= null
rect gg_rct_CreepCamp_02= null
rect gg_rct_CreepCamp_03= null
rect gg_rct_CreepCamp_04= null
rect gg_rct_CreepCamp_05= null
rect gg_rct_CreepCamp_06= null
rect gg_rct_CreepCamp_07= null
rect gg_rct_CreepCamp_08= null
rect gg_rct_CreepCamp_09= null
rect gg_rct_CreepAncBirth_01= null
rect gg_rct_CreepAncBirth_00= null
rect gg_rct_CreepAncCamp_00= null
rect gg_rct_CreepAncCamp_01= null
rect gg_rct_CreepSnowBirth= null
rect gg_rct_CreepBossBirth= null
rect gg_rct_attPoint_00= null
rect gg_rct_attPoint_01= null
rect gg_rct_attPoint_02= null
rect gg_rct_attPoint_03= null
rect gg_rct_attPoint_04= null
rect gg_rct_attPoint_05= null
rect gg_rct_attPoint_06= null
rect gg_rct_attPoint_07= null
rect gg_rct_attPoint_08= null
rect gg_rct_attPoint_09= null
rect gg_rct_attPoint_10= null
rect gg_rct_attPoint_11= null
rect gg_rct_attPoint_12= null
rect gg_rct_attPoint_13= null
rect gg_rct_attPoint_14= null
rect gg_rct_attPoint_15= null
rect gg_rct_attPoint_16= null
rect gg_rct_SeaArea_00= null
rect gg_rct_SeaArea_01= null
rect gg_rct_SeaArea_02= null
rect gg_rct_SeaArea_03= null
rect gg_rct_SeaArea_04= null
rect gg_rct_SeaArea_05= null
rect gg_rct_SeaArea_06= null
rect gg_rct_SeaArea_07= null
rect gg_rct_SeaArea_08= null
rect gg_rct_SeaArea_09= null
rect gg_rct_SeaArea_10= null
rect gg_rct_SeaArea_11= null
rect gg_rct_SeaArea_12= null
rect gg_rct_SeaArea_13= null
rect gg_rct_SeaArea_14= null
rect gg_rct_SeaArea_15= null
rect gg_rct_SeaArea_16= null
rect gg_rct_SeaArea_17= null
rect gg_rct_SeaArea_18= null
rect gg_rct_SeaArea_19= null
rect gg_rct_SeaArea_20= null
rect gg_rct_SeaArea_21= null
rect gg_rct_SeaArea_22= null
rect gg_rct_SeaArea_23= null
rect gg_rct_SeaArea_24= null
rect gg_rct_SeaArea_25= null
rect gg_rct_SeaArea_26= null
rect gg_rct_SeaArea_27= null
rect gg_rct_SeaArea_28= null
rect gg_rct_SeaArea_29= null
rect gg_rct_SeaArea_30= null
rect gg_rct_SeaArea_31= null
rect gg_rct_SeaArea_32= null
rect gg_rct_SeaArea_33= null
rect gg_rct_SeaArea_34= null
rect gg_rct_SeaArea_35= null
rect gg_rct_SeaArea_36= null
rect gg_rct_SeaArea_37= null
rect gg_rct_SeaArea_38= null
rect gg_rct_SeaArea_39= null
rect gg_rct_SeaArea_40= null
rect gg_rct_SeaArea_41= null
rect gg_rct_SeaArea_42= null
rect gg_rct_SeaArea_43= null
rect gg_rct_SeaArea_44= null
rect gg_rct_SeaArea_45= null
rect gg_rct_SeaArea_46= null
rect gg_rct_SeaArea_47= null
rect gg_rct_SeaArea_48= null
rect gg_rct_SeaArea_49= null
rect gg_rct_SeaArea_50= null
rect gg_rct_SeaArea_51= null
rect gg_rct_SeaArea_52= null
rect gg_rct_SeaArea_53= null
rect gg_rct_SeaArea_54= null
rect gg_rct_SeaArea_55= null
rect gg_rct_SeaArea_56= null
rect gg_rct_SeaArea_57= null
rect gg_rct_SeaArea_58= null
rect gg_rct_SeaArea_59= null
rect gg_rct_SeaArea_61= null
rect gg_rct_SeaArea_62= null
rect gg_rct_SeaArea_63= null
rect gg_rct_SeaArea_64= null
rect gg_rct_SeaArea_65= null
rect gg_rct_SeaArea_66= null
rect gg_rct_SeaArea_67= null
rect gg_rct_SeaArea_68= null
rect gg_rct_SeaArea_69= null
rect gg_rct_SeaArea_70= null
rect gg_rct_SeaArea_71= null
rect gg_rct_SeaArea_72= null
rect gg_rct_SeaArea_73= null
rect gg_rct_SeaArea_60= null
rect gg_rct_SeaArea_74= null
rect gg_rct_HeroSelection= null
rect gg_rct_NavyHeroBirth= null
rect gg_rct_PirateHeroBirth= null
rect gg_rct_CreepMagmaBirth= null
trigger gg_trg_FuncForDebug= null
trigger gg_trg_FuncForGame= null
trigger gg_trg_DataSetAndGet= null
trigger gg_trg_FuncForRegister= null
trigger gg_trg_japiConstant= null
trigger gg_trg_newJapiLibrary= null
trigger gg_trg_d3dLibrary= null
trigger gg_trg_______japi___u= null
trigger gg_trg_initData= null
trigger gg_trg_AllianceSet= null
trigger gg_trg_ForbidAbility= null
trigger gg_trg_GameInitData= null
trigger gg_trg_Constant= null
trigger gg_trg_UnitLevel= null
trigger gg_trg_GameTime= null
trigger gg_trg_noteUnitMoney= null
trigger gg_trg_Creeps= null
trigger gg_trg_InitCreep= null
trigger gg_trg_StateCreepsFlush= null
trigger gg_trg_SeaRegionCreep= null
trigger gg_trg_AncientCreep= null
trigger gg_trg_SnowCreep= null
trigger gg_trg_MagmaCreep= null
trigger gg_trg_BossCreep= null
trigger gg_trg_Soldiers= null
trigger gg_trg_AttackDir= null
trigger gg_trg_Towers= null
trigger gg_trg_InitAttackAndDef= null
trigger gg_trg_StateFlushSoldiersAll= null
trigger gg_trg_SoldierLeak= null
trigger gg_trg_CreateSoldiersUp= null
trigger gg_trg_SoldierAttackUp= null
trigger gg_trg_CreateSoldiersDow= null
trigger gg_trg_SoldierAttackDow= null
trigger gg_trg_CreateSoldiersMin= null
trigger gg_trg_SoldierAttackMin= null
trigger gg_trg_SoldierProtect= null
trigger gg_trg_TowerProtect= null
trigger gg_trg_TowerAttack= null
trigger gg_trg_TowerDefendRel= null
trigger gg_trg_SeaAreas= null
trigger gg_trg_UnitSeaDebuff= null
trigger gg_trg_InitSeaData= null
trigger gg_trg_EnterSea= null
trigger gg_trg_ExitSea= null
trigger gg_trg_HeroInfo= null
trigger gg_trg_PlayerHashInfo= null
trigger gg_trg_InitChooseInterface= null
trigger gg_trg_startChosenInterface= null
trigger gg_trg_ChooseInterface= null
trigger gg_trg_CreatePanel= null
trigger gg_trg_ClickRandom= null
trigger gg_trg_ClickConfirm= null
trigger gg_trg_ClickHeroPict= null
trigger gg_trg_Repick= null
trigger gg_trg_TurnToChoose= null
trigger gg_trg_UseTurnChoose= null
trigger gg_trg________________u= null
trigger gg_trg_NotifyPanel= null
trigger gg_trg_InitPanel= null
trigger gg_trg_HeroRelive= null
trigger gg_trg_KillerHero= null
trigger gg_trg_AssistDamage= null
trigger gg_trg_killAndDeny= null
trigger gg_trg_AttackAlly= null
trigger gg_trg_ForbidAttackTower= null
trigger gg_trg_DialogBox= null
trigger gg_trg_DialogClick= null
trigger gg_trg_GamePrepare= null
trigger gg_trg_GameStart= null
trigger gg_trg_AbilityData= null
trigger gg_trg_InitAbilTrg= null
trigger gg_trg_CameraUp= null
trigger gg_trg_CameraDown= null
trigger gg_trg_CloseDebuging= null
trigger gg_trg_OpenDebuging= null
trigger gg_trg_OpenFog= null
trigger gg_trg_CloseFog= null
trigger gg_trg_LevelUp= null
trigger gg_trg_SetStr= null
trigger gg_trg_SetAgi= null
trigger gg_trg_SetInt= null
trigger gg_trg_ShowAction= null
unit gg_unit_h00J_0065= null
unit gg_unit_h00J_0064= null
unit gg_unit_h00J_0063= null
unit gg_unit_h00I_0062= null
unit gg_unit_h000_0009= null
unit gg_unit_h002_0010= null
unit gg_unit_h001_0024= null
unit gg_unit_h001_0025= null
unit gg_unit_h003_0026= null
unit gg_unit_h003_0027= null
unit gg_unit_h003_0028= null
unit gg_unit_h003_0029= null
unit gg_unit_h003_0030= null
unit gg_unit_h003_0031= null
unit gg_unit_h00A_0032= null
unit gg_unit_h00B_0033= null
unit gg_unit_h00A_0034= null
unit gg_unit_h00B_0035= null
unit gg_unit_h00A_0036= null
unit gg_unit_h00B_0037= null
unit gg_unit_h00F_0039= null
unit gg_unit_h00F_0040= null
unit gg_unit_h00E_0041= null
unit gg_unit_h00E_0042= null
unit gg_unit_h00E_0043= null
unit gg_unit_h00E_0044= null
unit gg_unit_h00E_0045= null
unit gg_unit_h00E_0046= null
unit gg_unit_h00G_0047= null
unit gg_unit_h00D_0048= null
unit gg_unit_h00G_0049= null
unit gg_unit_h00D_0050= null
unit gg_unit_h00G_0051= null
unit gg_unit_h00D_0052= null
unit gg_unit_h00I_0060= null
unit gg_unit_h00I_0061= null
trigger gg_trg_ClickConfirmByTurn= null
    
    //该数仅用于求取矩形内单位的个数
integer m_unitCountInRect= 0
    //该数仅用于求单位组内的单位个数
integer m_unitCountInGp= 0
    
    //漂浮文字专用hashtable
hashtable tag_ht= InitHashtable()
    
    //买活状态中
boolean array buyBack
    
hashtable SET_GET_HASH= InitHashtable()
    
boolean array isPlayer
    
    
string array playerColors
force array FORCE_PLAYER
force FORCE_ALL_PLAYERS= CreateForce()
    //海军玩家
integer NAVY_PLAYER= 10
    //海贼玩家
integer PIRATE_PLAYER= 11
    
    //玩家在线人数
integer PLAYING_PLAYER= 0
    //海军玩家在线人数
integer PLAYING_NAVY_PLAYER= 0
    //海贼玩家在线人数
integer PLAYING_PIRATE_PLAYER= 0
    
    //海军海贼阵营
integer NAVY_CAMP= 0
integer PIRATE_CAMP= 1
    //中路与边路
integer MAIN_ROAD= 0
integer SIDE_ROAD= 1
    //技能哈希表，存放释放技能时需要保存的数据
hashtable SPELL_HS= InitHashtable()
    
    
    //浮空型
integer SEAR_FLOAT= - 1
    //非能力者
integer SEAR_NORMAL= 0
    //能力者重罚型
integer SEAR_DEVILER= 1
    //能力者海行型
integer SEAR_DEVIL_WORLD= 2
    //海族
integer SEAR_NEPTUNE= 3
    //僵尸类
integer SEAR_CORPSE= 4
    
    
unit array HERO_OF_PLAYER
    
integer INIT_MONEY= 875
integer HAND_MONEY= - 100
integer REPICK_MONEY= - 100
    
    
    //英雄的当前等级
integer array unitLevel
    
    
integer Sys_second= 0
integer Sys_minute= 0
    
    
hashtable unitMenoy_ht= InitHashtable()
    

    //出生坐标
real array soldierBirthXUp
real array soldierBirthYUp
real array soldierBirthXMin
real array soldierBirthYMin
real array soldierBirthXDow
real array soldierBirthYDow
    
    //单位类型
integer array warrior
integer array bowman
integer array artillery
integer array superSoldier
    
    //单位数量
integer array warriorCount
integer array bowmanCount
integer array artilleryCount
integer superSoldierCount
    
    
rect array attackRectUp
region array attackRegionUp
rect array attackRectDow
region array attackRegionDow
rect array attackRectMin
region array attackRegionMin
    
    
region SEA_REGION
    
hashtable array chosenHeroInfo
unitpool array ChosenHeroPool
integer array HeroSelectedNum
hashtable PlayerChosenHash
hashtable array UnitChosenHash
    //选人阶段，全部结束
boolean isEndOfChoice
    //个人完成选人阶段
boolean array isFinishOfChoice
    //这些数据需要在选人界面终结后清除
destructable backgroundPict
destructable confirmEmptyFrame
destructable confirmPicture
destructable randomEmptyFrame
destructable randomPicture
destructable VSPicture
fogmodifier array fogModifier
    
hashtable heroPict_hash
hashtable unitClick_hash
    
unit uCenter
unit uConfirm
unit uRandom
    
    
multiboard ChooseHeroPanel
    
hashtable turnToChoose_ht= InitHashtable()
hashtable normalHeroPanel_ht= InitHashtable()
string array appellation
timer array reliveHero_timer
multiboard normalHeroPanel_mb= null
    
integer panelVSRow= 0
    
    
    
hashtable array playerkill_ht
    
hashtable killerAndAssister_ht= InitHashtable()
    
string array playerKillingWord
    
    
string array denyWord
    //hashtable unitMenoy_ht
dialog gameDialog= DialogCreate()
button array gameDialogButton
player gameDialog_player
integer GAME_MODE= 0
timerdialog gamePrepare_td= null
hashtable heroWeaponBuff_ht= InitHashtable()
    
    //设置空格个数
string array space
    


//JASSHelper struct globals:
constant integer si__LOGFONT=1
integer si__LOGFONT_F=0
integer si__LOGFONT_I=0
integer array si__LOGFONT_V
integer array s__LOGFONT_font
trigger st__LOGFONT_onDestroy
integer f__arg_this

endglobals
    native SetHeroLevels takes code f returns nothing 


//Generated method caller for LOGFONT.onDestroy
function sc__LOGFONT_onDestroy takes integer this returns nothing
    set f__arg_this=this
    call TriggerEvaluate(st__LOGFONT_onDestroy)
endfunction

//Generated allocator of LOGFONT
function s__LOGFONT__allocate takes nothing returns integer
 local integer this=si__LOGFONT_F
    if (this!=0) then
        set si__LOGFONT_F=si__LOGFONT_V[this]
    else
        set si__LOGFONT_I=si__LOGFONT_I+1
        set this=si__LOGFONT_I
    endif
    if (this>8190) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: LOGFONT")
        return 0
    endif

    set si__LOGFONT_V[this]=-1
 return this
endfunction

//Generated destructor of LOGFONT
function sc__LOGFONT_deallocate takes integer this returns nothing
    if this==null then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: LOGFONT")
        return
    elseif (si__LOGFONT_V[this]!=-1) then
            call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: LOGFONT")
        return
    endif
    set f__arg_this=this
    call TriggerEvaluate(st__LOGFONT_onDestroy)
    set si__LOGFONT_V[this]=si__LOGFONT_F
    set si__LOGFONT_F=this
endfunction

//library JapiConstantLib:
    function JapiConstantLib_init_memory takes nothing returns nothing
         set i_1[8191]=0
 set i_2[8191]=0
 set i_3[8191]=0
 set i_4[8191]=0
 set i_5[8191]=0
 set i_6[8191]=0
 set i_7[8191]=0
 set i_8[8191]=0
 set i_9[8191]=0
 set i_10[8191]=0
 set i_11[8191]=0
 set i_12[8191]=0
 set i_13[8191]=0
 set i_14[8191]=0
 set i_15[8191]=0
 set i_16[8191]=0
 set i_17[8191]=0
 set i_18[8191]=0
 set i_19[8191]=0
 set i_20[8191]=0
 set i_21[8191]=0
 set i_22[8191]=0
 set i_23[8191]=0
 set i_24[8191]=0
 set i_25[8191]=0
 set i_26[8191]=0
 set i_27[8191]=0
 set i_28[8191]=0
 set i_29[8191]=0
 set i_30[8191]=0
 set i_31[8191]=0
 set i_32[8191]=0

    endfunction
    function JapiConstantLib_init takes nothing returns integer
        call ExecuteFunc("JapiConstantLib_init_memory")
        return 1
    endfunction

//library JapiConstantLib ends
//library YDWEEnumUnitsSelectedNull:
function YDWEEnumUnitsSelectedNull takes player whichPlayer,boolexpr enumFilter,code enumAction returns nothing
    local group g= CreateGroup()
    call SyncSelections()
    call GroupEnumUnitsSelected(g, whichPlayer, enumFilter)
    call DestroyBoolExpr(enumFilter)
    call ForGroup(g, enumAction)
    call DestroyGroup(g)
    set g=null
endfunction

//library YDWEEnumUnitsSelectedNull ends
//library dataSetAndGet:
//===========================================================================

function saveRInRegion takes real r,string name,region re returns nothing
    call SaveReal(SET_GET_HASH, GetHandleId(re), StringHash(name), r)
endfunction
function gainRInRegion takes string name,region re returns real
    return LoadReal(SET_GET_HASH, GetHandleId(re), StringHash(name))
endfunction
//===========================================================================

function saveBInUnit takes boolean b,string name,unit u returns nothing
    call SaveBoolean(SET_GET_HASH, GetHandleId(u), StringHash(name), b)
endfunction
function gainBInUnit takes string name,unit u returns boolean
    return LoadBoolean(SET_GET_HASH, GetHandleId(u), StringHash(name))
endfunction
//===========================================================================

function saveRInUnit takes real r,string name,unit u returns nothing
    call SaveReal(SET_GET_HASH, GetHandleId(u), StringHash(name), r)
endfunction
function gainRInUnit takes string name,unit u returns real
    return LoadReal(SET_GET_HASH, GetHandleId(u), StringHash(name))
endfunction
//===========================================================================

function saveIInUnit takes integer i,string name,unit u returns nothing
    call SaveInteger(SET_GET_HASH, GetHandleId(u), StringHash(name), i)
endfunction
function gainIInUnit takes string name,unit u returns integer
    return LoadInteger(SET_GET_HASH, GetHandleId(u), StringHash(name))
endfunction
//===========================================================================

function saveIInInteger takes integer i,string name,integer ut returns nothing
    call SaveInteger(SET_GET_HASH, ut, StringHash(name), i)
endfunction
function gainIInInteger takes string name,integer ut returns integer
    return LoadInteger(SET_GET_HASH, ut, StringHash(name))
endfunction
//===========================================================================

function saveUInInteger takes unit u,string name,integer ut returns nothing
    call SaveUnitHandle(SET_GET_HASH, ut, StringHash(name), u)
endfunction
function gainUInInteger takes string name,integer ut returns unit
    return LoadUnitHandle(SET_GET_HASH, ut, StringHash(name))
endfunction
//===========================================================================

//library dataSetAndGet ends
//library funcForDebug:
//===========================================================================

function debugText takes real duration,string message returns nothing
    call DisplayTimedTextToPlayer(Player(0), 0, 0, duration, message)
endfunction
//===========================================================================

function debugPoint takes real duration,real x,real y returns nothing
    
    call DisplayTimedTextToPlayer(Player(0), 0, 0, duration, "(" + R2S(x) + "," + R2S(y) + ")")
    
endfunction

//library funcForDebug ends
//library funcForRegister:
//===========================================================================

function triggerRegisterEnterRect takes trigger trig,rect r,boolexpr filter returns event
    local region rectRegion= CreateRegion()
    call RegionAddRect(rectRegion, r)
    
    return TriggerRegisterEnterRegion(trig, rectRegion, filter)
endfunction
//===========================================================================

function gamerHeroE_conditon takes nothing returns boolean
    //当攻击单位是英雄时，返回true
    return IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO)
endfunction
//EVENT_PLAYER_UNIT_ATTACKED    攻击事件
//filterUnit  判断出来的是发布攻击的那位
//但是该事件是由被攻击单位来触发的
function triggerRegisterHeroEvent takes trigger trig,playerunitevent whichEvent returns nothing
    local integer i= 0
    loop
        call TriggerRegisterPlayerUnitEvent(trig, Player(i), whichEvent, Condition(function gamerHeroE_conditon))
        set i=i + 1
        exitwhen i > 9
    endloop
endfunction

//library funcForRegister ends
//library japi:

    
    
    
     function Call takes string str returns nothing
        call UnitId(str)
    endfunction
    //获取鼠标在地图中的x轴
     function GetMouseX takes nothing returns real
        call SaveStr(japi_ht, japi___key, 0, "()R")
        call Call("GetMouseX")
        return LoadReal(japi_ht, japi___key, 0)
    endfunction
    //获取鼠标在地图中的y轴
     function GetMouseY takes nothing returns real
        call SaveStr(japi_ht, japi___key, 0, "()R")
        call Call("GetMouseY")
        return LoadReal(japi_ht, japi___key, 0)
    endfunction
    
    
    
    
    //==========================================================================
     function EXGetUnitAbility takes unit u,integer abilityId returns integer
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(u))
        call SaveInteger(japi_ht, japi___key, 2, abilityId)
        call SaveStr(japi_ht, japi___key, 0, "(II)I")
        call Call("EXGetUnitAbility")
        return LoadInteger(japi_ht, japi___key, 0)
    endfunction
    
    // yd japi ==================================================================
    // 技能----------------------------------------------------
    
    ///<summary>技能属性 [JAPI]</summary>
  function YDWEGetUnitAbilityState takes unit u,integer abilcode,integer data_type returns real
        call SaveInteger(japi_ht, japi___key, 1, EXGetUnitAbility(u , abilcode))
        call SaveInteger(japi_ht, japi___key, 2, data_type)
        call SaveStr(japi_ht, japi___key, 0, "(II)R")
        call Call("EXGetAbilityState")
		return LoadReal(japi_ht, japi___key, 0)
	endfunction
	///<summary>技能数据 (整数) [JAPI]</summary>
  function YDWEGetUnitAbilityDataInteger takes unit u,integer abilcode,integer level,integer data_type returns integer
        call SaveInteger(japi_ht, japi___key, 1, EXGetUnitAbility(u , abilcode))
        call SaveInteger(japi_ht, japi___key, 2, level)
        call SaveInteger(japi_ht, japi___key, 3, data_type)
        call SaveStr(japi_ht, japi___key, 0, "(III)I")
        call Call("EXGetAbilityDataInteger")
		return LoadInteger(japi_ht, japi___key, 0)
	endfunction
	///<summary>技能数据 (实数) [JAPI]</summary>
  function YDWEGetUnitAbilityDataReal takes unit u,integer abilcode,integer level,integer data_type returns real
        call SaveInteger(japi_ht, japi___key, 1, EXGetUnitAbility(u , abilcode))
        call SaveInteger(japi_ht, japi___key, 2, level)
        call SaveInteger(japi_ht, japi___key, 3, data_type)
        call SaveStr(japi_ht, japi___key, 0, "(III)R")
        call Call("EXGetAbilityDataReal")
		return LoadReal(japi_ht, japi___key, 0)
    endfunction
	///<summary>技能数据 (字符串) [JAPI]</summary>
  function YDWEGetUnitAbilityDataString takes unit u,integer abilcode,integer level,integer data_type returns string
        call SaveInteger(japi_ht, japi___key, 1, EXGetUnitAbility(u , abilcode))
        call SaveInteger(japi_ht, japi___key, 2, level)
        call SaveInteger(japi_ht, japi___key, 3, data_type)
        call SaveStr(japi_ht, japi___key, 0, "(III)S")
        call Call("EXGetAbilityDataString")
		return LoadStr(japi_ht, japi___key, 0)
	endfunction
	///<summary>设置技能属性 [JAPI]</summary>
  function YDWESetUnitAbilityState takes unit u,integer abilcode,integer data_type,real value returns nothing
        call SaveInteger(japi_ht, japi___key, 1, EXGetUnitAbility(u , abilcode))
        call SaveInteger(japi_ht, japi___key, 2, data_type)
        call SaveReal(japi_ht, japi___key, 3, value)
        call SaveStr(japi_ht, japi___key, 0, "(IIR)V")
        call Call("EXSetAbilityState")
    endfunction
	///<summary>设置技能数据 (整数) [JAPI]</summary>
  function YDWESetUnitAbilityDataInteger takes unit u,integer abilcode,integer level,integer data_type,integer value returns nothing
        call SaveInteger(japi_ht, japi___key, 1, EXGetUnitAbility(u , abilcode))
        call SaveInteger(japi_ht, japi___key, 2, level)
        call SaveInteger(japi_ht, japi___key, 3, data_type)
        call SaveInteger(japi_ht, japi___key, 4, value)
        call SaveStr(japi_ht, japi___key, 0, "(IIII)V")
        call Call("EXSetAbilityDataInteger")
    endfunction
	///<summary>设置技能数据 (实数) [JAPI]</summary>
  function YDWESetUnitAbilityDataReal takes unit u,integer abilcode,integer level,integer data_type,real value returns nothing
        call SaveInteger(japi_ht, japi___key, 1, EXGetUnitAbility(u , abilcode))
        call SaveInteger(japi_ht, japi___key, 2, level)
        call SaveInteger(japi_ht, japi___key, 3, data_type)
        call SaveReal(japi_ht, japi___key, 4, value)
        call SaveStr(japi_ht, japi___key, 0, "(IIIR)V")
        call Call("EXSetAbilityDataReal")
    endfunction
	///<summary>设置技能数据 (字符串) [JAPI]</summary>
  function YDWESetUnitAbilityDataString takes unit u,integer abilcode,integer level,integer data_type,string value returns nothing
        call SaveInteger(japi_ht, japi___key, 1, EXGetUnitAbility(u , abilcode))
        call SaveInteger(japi_ht, japi___key, 2, level)
        call SaveInteger(japi_ht, japi___key, 3, data_type)
        call SaveStr(japi_ht, japi___key, 4, value)
        call SaveStr(japi_ht, japi___key, 0, "(IIIS)V")
        call Call("EXSetAbilityDataString")
    endfunction
	
    
    //设置技能变身数据A
     function EXSetAbilityAEmeDataA takes integer ability_handle,integer value returns boolean
        call SaveInteger(japi_ht, japi___key, 1, ability_handle)
        call SaveInteger(japi_ht, japi___key, 2, value)
        call SaveStr(japi_ht, japi___key, 0, "(II)B")
        call Call("EXSetAbilityAEmeDataA")
        return LoadBoolean(japi_ht, japi___key, 0)
    endfunction
    
    //单位变身
     function YDWEUnitTransform takes unit u,integer abilcode,integer targetid returns nothing
		call UnitAddAbility(u, abilcode)
		call YDWESetUnitAbilityDataInteger(u , abilcode , 1 , 117 , GetUnitTypeId(u))
		call EXSetAbilityAEmeDataA(EXGetUnitAbility(u , abilcode) , GetUnitTypeId(u))
		call UnitRemoveAbility(u, abilcode)
		call UnitAddAbility(u, abilcode)
		call EXSetAbilityAEmeDataA(EXGetUnitAbility(u , abilcode) , targetid)
		call UnitRemoveAbility(u, abilcode)
	endfunction
    
    // 单位-------------------------------------------------------
    
    //暂停单位
     function EXPauseUnit takes unit unit_handle,boolean flag returns nothing
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(unit_handle))
        call SaveBoolean(japi_ht, japi___key, 2, flag)
        call SaveStr(japi_ht, japi___key, 0, "(IB)V")
        call Call("EXPauseUnit")
    endfunction
    
    //获取单位字符串
     function EXGetUnitString takes integer unitcode,integer Type returns string
        call SaveInteger(japi_ht, japi___key, 1, unitcode)
        call SaveInteger(japi_ht, japi___key, 2, Type)
        call SaveStr(japi_ht, japi___key, 0, "(II)S")
        call Call("EXGetUnitString")
        return LoadStr(japi_ht, japi___key, 0)
    endfunction
    
       //设置单位字符串
     function EXSetUnitString takes integer unitcode,integer Type,string value returns boolean
        call SaveInteger(japi_ht, japi___key, 1, unitcode)
        call SaveInteger(japi_ht, japi___key, 2, Type)
        call SaveStr(japi_ht, japi___key, 3, value)
        call SaveStr(japi_ht, japi___key, 0, "(IIS)B")
        call Call("EXSetUnitString")
        return LoadBoolean(japi_ht, japi___key, 0)
    endfunction
    
    //获取单位实数
     function EXGetUnitReal takes integer unitcode,integer Type returns real
        call SaveInteger(japi_ht, japi___key, 1, unitcode)
        call SaveInteger(japi_ht, japi___key, 2, Type)
        call SaveStr(japi_ht, japi___key, 0, "(II)R")
        call Call("EXGetUnitReal")
        return LoadReal(japi_ht, japi___key, 0)
    endfunction
    
    //设置单位实数
     function EXSetUnitReal takes integer unitcode,integer Type,real value returns boolean
        call SaveInteger(japi_ht, japi___key, 1, unitcode)
        call SaveInteger(japi_ht, japi___key, 2, Type)
        call SaveReal(japi_ht, japi___key, 3, value)
        call SaveStr(japi_ht, japi___key, 0, "(IIR)B")
        call Call("EXSetUnitReal")
        return LoadBoolean(japi_ht, japi___key, 0)
    endfunction
    
    
    //获取单位整数
     function EXGetUnitInteger takes integer unitcode,integer Type returns integer
        call SaveInteger(japi_ht, japi___key, 1, unitcode)
        call SaveInteger(japi_ht, japi___key, 2, Type)
        call SaveStr(japi_ht, japi___key, 0, "(II)I")
        call Call("EXGetUnitInteger")
        return LoadInteger(japi_ht, japi___key, 0)
    endfunction
    
    //设置单位整数
     function EXSetUnitInteger takes integer unitcode,integer Type,integer value returns boolean
        call SaveInteger(japi_ht, japi___key, 1, unitcode)
        call SaveInteger(japi_ht, japi___key, 2, Type)
        call SaveInteger(japi_ht, japi___key, 3, value)
        call SaveStr(japi_ht, japi___key, 0, "(III)B")
        call Call("EXSetUnitInteger")
        return LoadBoolean(japi_ht, japi___key, 0)
    endfunction
    
        //获取单位数组字符串
     function EXGetUnitArrayString takes integer unitcode,integer Type,integer index returns string
        call SaveInteger(japi_ht, japi___key, 1, unitcode)
        call SaveInteger(japi_ht, japi___key, 2, Type)
        call SaveInteger(japi_ht, japi___key, 3, index)
        call SaveStr(japi_ht, japi___key, 0, "(III)S")
        call Call("EXGetUnitArrayString")
        return LoadStr(japi_ht, japi___key, 0)
    endfunction
    
    //设置单位数组字符串
     function EXSetUnitArrayString takes integer unitcode,integer Type,integer index,string value returns boolean
        call SaveInteger(japi_ht, japi___key, 1, unitcode)
        call SaveInteger(japi_ht, japi___key, 2, Type)
        call SaveInteger(japi_ht, japi___key, 3, index)
        call SaveStr(japi_ht, japi___key, 4, value)
        call SaveStr(japi_ht, japi___key, 0, "(IIIS)B")
        call Call("EXSetUnitArrayString")
        return LoadBoolean(japi_ht, japi___key, 0)
    endfunction
    //设置单位面向角度(立即转向)
     function EXSetUnitFacing takes unit unit_handle,real angle returns nothing
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(unit_handle))
        call SaveReal(japi_ht, japi___key, 2, angle)
        call SaveStr(japi_ht, japi___key, 0, "(IR)V")
        call Call("EXSetUnitFacing")
    endfunction
    
    //设置单位碰撞类型
     function EXSetUnitCollisionType takes boolean enable,unit unit_handle,integer Type returns nothing
        call SaveBoolean(japi_ht, japi___key, 1, enable)
        call SaveInteger(japi_ht, japi___key, 2, GetHandleId(unit_handle))
        call SaveInteger(japi_ht, japi___key, 3, Type)
        call SaveStr(japi_ht, japi___key, 0, "(BII)V")
        call Call("EXSetUnitCollisionType")
    endfunction
    
    //设置单位移动类型
     function EXSetUnitMoveType takes unit unit_handle,integer Type returns nothing
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(unit_handle))
        call SaveInteger(japi_ht, japi___key, 2, Type)
        call SaveStr(japi_ht, japi___key, 0, "(II)V")
        call Call("EXSetUnitMoveType")
    endfunction
    
    //单位添加眩晕
     function YDWEUnitAddStun takes unit u returns nothing
		call EXPauseUnit(u , true)
	endfunction
    
    //单位删除眩晕
  function YDWEUnitRemoveStun takes unit u returns nothing
		call EXPauseUnit(u , false)
	endfunction
    
    //获取伤害数据
     function EXGetEventDamageData takes integer Type returns integer
        call SaveInteger(japi_ht, japi___key, 1, Type)
        call SaveStr(japi_ht, japi___key, 0, "(I)I")
        call Call("EXGetEventDamageData")
        return LoadInteger(japi_ht, japi___key, 0)
    endfunction
	
    //设置伤害
     function EXSetEventDamage takes real Damage returns boolean
        call SaveReal(japi_ht, japi___key, 1, Damage)
        call SaveStr(japi_ht, japi___key, 0, "(R)B")
        call Call("EXSetEventDamage")
        return LoadBoolean(japi_ht, japi___key, 0)
    endfunction
    
    //判断是否是物理伤害
     function YDWEIsEventPhysicalDamage takes nothing returns boolean
		return 0 != EXGetEventDamageData(1)
	endfunction
    //判断是否是攻击伤害
  function YDWEIsEventAttackDamage takes nothing returns boolean
		return 0 != EXGetEventDamageData(2)
	endfunction
	
    //判断是否是范围伤害
  function YDWEIsEventRangedDamage takes nothing returns boolean
		return 0 != EXGetEventDamageData(3)
	endfunction
	
    //判断伤害类型
  function YDWEIsEventDamageType takes damagetype damageType returns boolean
		return damageType == ConvertDamageType(EXGetEventDamageData(4))
	endfunction
    
    //判断武器类型
  function YDWEIsEventWeaponType takes weapontype weaponType returns boolean
		return weaponType == ConvertWeaponType(EXGetEventDamageData(5))
	endfunction
	
    //判断攻击类型
  function YDWEIsEventAttackType takes attacktype attackType returns boolean
		return attackType == ConvertAttackType(EXGetEventDamageData(6))
	endfunction
	//设置伤害
  function YDWESetEventDamage takes real amount returns boolean
		return EXSetEventDamage(amount)
	endfunction
    
    // 物品----------------------------------------------------
    
    ///<summary>设置物品数据 (字符串) [JAPI]</summary>
     function YDWESetItemDataString takes integer ItemTypeId,integer Type,string Value returns nothing
        call SaveStr(japi_ht, japi___key, 0, "(IIS)V")
        call SaveInteger(japi_ht, japi___key, 1, ItemTypeId)
        call SaveInteger(japi_ht, japi___key, 2, Type)
        call SaveStr(japi_ht, japi___key, 3, Value)
        call Call("EXSetItemDataString")
    endfunction
    ///<summary>获取物品数据 (字符串) [JAPI]</summary>
     function YDWEGetItemDataString takes integer ItemTypeId,integer Type returns string
        call SaveStr(japi_ht, japi___key, 0, "(II)S")
        call SaveInteger(japi_ht, japi___key, 1, ItemTypeId)
        call SaveInteger(japi_ht, japi___key, 2, Type)
        call Call("EXGetItemDataString")
        return LoadStr(japi_ht, japi___key, 0)
    endfunction
    
    //特效--------------------------------------------------------
    
    ///<summary>设置特效坐标 [JAPI]</summary>
     function EXSetEffectXY takes effect Handle,real x,real y returns nothing
        call SaveStr(japi_ht, japi___key, 0, "(IRR)V")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call SaveReal(japi_ht, japi___key, 2, x)
        call SaveReal(japi_ht, japi___key, 3, y)
        call Call("EXSetEffectXY")
    endfunction
    
    ///<summary>设置特效Z轴 [JAPI]</summary>
     function EXSetEffectZ takes effect Handle,real z returns nothing
        call SaveStr(japi_ht, japi___key, 0, "(IRR)V")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call SaveReal(japi_ht, japi___key, 2, z)
		call Call("EXSetEffectZ")
	endfunction
    
    ///<summary>获取特效X轴 [JAPI]</summary>
     function EXGetEffectX takes effect Handle returns real
        call SaveStr(japi_ht, japi___key, 0, "(I)R")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call Call("EXGetEffectX")
        return LoadReal(japi_ht, japi___key, 0)
	endfunction
    
    ///<summary>获取特效Y轴 [JAPI]</summary>
  function EXGetEffectY takes effect Handle returns real
        call SaveStr(japi_ht, japi___key, 0, "(I)R")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call Call("EXGetEffectY")
        return LoadReal(japi_ht, japi___key, 0)
	endfunction
    
    ///<summary>获取特效Z轴 [JAPI]</summary>
  function EXGetEffectZ takes effect Handle returns real
        call SaveStr(japi_ht, japi___key, 0, "(I)R")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call Call("EXGetEffectZ")
		return LoadReal(japi_ht, japi___key, 0)
	endfunction
    
    ///<summary>设置特效尺寸 [JAPI]</summary>
  function EXSetEffectSize takes effect Handle,real size returns nothing
		call SaveStr(japi_ht, japi___key, 0, "(IR)V")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call SaveReal(japi_ht, japi___key, 2, size)
        call Call("EXSetEffectSize")
	endfunction
    
    ///<summary>获取特效尺寸 [JAPI]</summary>
  function EXGetEffectSize takes effect Handle returns real
        call SaveStr(japi_ht, japi___key, 0, "(I)R")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call Call("EXGetEffectSize")
		return LoadReal(japi_ht, japi___key, 0)
	endfunction
    
    ///<summary>设置特效X旋转轴 [JAPI]</summary>
  function EXEffectMatRotateX takes effect Handle,real x returns nothing
        call SaveStr(japi_ht, japi___key, 0, "(IR)V")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call SaveReal(japi_ht, japi___key, 2, x)
        call Call("EXEffectMatRotateX")
	endfunction
    
    ///<summary>设置特效Y旋转轴 [JAPI]</summary>
  function EXEffectMatRotateY takes effect Handle,real y returns nothing
        call SaveStr(japi_ht, japi___key, 0, "(IR)V")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call SaveReal(japi_ht, japi___key, 2, y)
        call Call("EXEffectMatRotateY")
	endfunction
    
    ///<summary>设置特效Z旋转轴 [JAPI]</summary>
  function EXEffectMatRotateZ takes effect Handle,real z returns nothing
        call SaveStr(japi_ht, japi___key, 0, "(IR)V")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call SaveReal(japi_ht, japi___key, 2, z)
        call Call("EXEffectMatRotateZ")
	endfunction
    
    ///<summary>设置特效比例 [JAPI]</summary>
  function EXEffectMatScale takes effect Handle,real x,real y,real z returns nothing
        call SaveStr(japi_ht, japi___key, 0, "(IRRR)V")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call SaveReal(japi_ht, japi___key, 2, x)
        call SaveReal(japi_ht, japi___key, 3, y)
        call SaveReal(japi_ht, japi___key, 4, z)
        call Call("EXEffectMatScale")
	endfunction
    
    ///<summary>设置特效重置 [JAPI]</summary>
  function EXEffectMatReset takes effect Handle returns nothing
        call SaveStr(japi_ht, japi___key, 0, "(I)V")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call Call("EXEffectMatReset")
	endfunction
    
    ///<summary>设置特效速率 [JAPI]</summary>
  function EXSetEffectSpeed takes effect Handle,real speed returns nothing
        call SaveStr(japi_ht, japi___key, 0, "(IR)V")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call SaveReal(japi_ht, japi___key, 2, speed)
        call Call("EXSetEffectSpeed")
	endfunction
    
    ///<summary>设置可追踪物坐标 [JAPI]</summary>
     function EXSetTrackableXY takes trackable Handle,real x,real y returns nothing
        call SaveStr(japi_ht, japi___key, 0, "(IRR)V")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call SaveReal(japi_ht, japi___key, 2, x)
        call SaveReal(japi_ht, japi___key, 3, y)
        call Call("EXSetEffectXY")
    endfunction
    
    
    ///<summary>获取可追踪物X轴 [JAPI]</summary>
     function EXGetTrackableX takes trackable Handle returns real
        call SaveStr(japi_ht, japi___key, 0, "(I)R")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call Call("EXGetEffectX")
        return LoadReal(japi_ht, japi___key, 0)
	endfunction
    
    ///<summary>获取可追踪物Y轴 [JAPI]</summary>
  function EXGetTrackableY takes trackable Handle returns real
        call SaveStr(japi_ht, japi___key, 0, "(I)R")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(Handle))
        call Call("EXGetEffectY")
        return LoadReal(japi_ht, japi___key, 0)
	endfunction
    
     function EXExecuteScript takes string str returns string
        call SaveStr(japi_ht, japi___key, 0, "(S)S")
        call SaveStr(japi_ht, japi___key, 1, str)
        call Call("EXExecuteScript")
        return LoadStr(japi_ht, japi___key, 0)
    endfunction
    //-----------------模拟聊天----------------------------
     function EXDisplayChat takes player p,integer chat_recipient,string message returns nothing
        call SaveStr(japi_ht, japi___key, 0, "(IIS)V")
        call SaveInteger(japi_ht, japi___key, 1, GetHandleId(p))
        call SaveInteger(japi_ht, japi___key, 2, chat_recipient)
        call SaveStr(japi_ht, japi___key, 3, message)
        call Call("EXDisplayChat")
    endfunction
  function YDWEDisplayChat takes player p,integer chat_recipient,string message returns nothing
		call EXDisplayChat(p , chat_recipient , message)
	endfunction
    
    //-----------版本描述-------------------------------------
    
    //获取魔兽版本
     function GetGameVersion takes nothing returns integer
        call SaveStr(japi_ht, japi___key, 0, "()I")
        call Call("GetGameVersion")
        return LoadInteger(japi_ht, japi___key, 0)
    endfunction
    
    //获取插件版本
     function GetPluginVersion takes nothing returns string
        call SaveStr(japi_ht, japi___key, 0, "()S")
        call Call("GetPluginVersion")
        return LoadStr(japi_ht, japi___key, 0)
    endfunction
    
     function GetFuncAddr takes code f returns integer
        call SetHeroLevels(f)
        return LoadInteger(japi_ht, japi___key, 0)
    endfunction
    
     function japiDoNothing takes nothing returns nothing
        
    endfunction
     function initializePlugin takes nothing returns integer
        call ExecuteFunc("japiDoNothing")
        call StartCampaignAI(Player(PLAYER_NEUTRAL_AGGRESSIVE), "callback")
        call Call(I2S(GetHandleId(japi_ht)))
        
        call SaveStr(japi_ht, japi___key, 0, "(I)V")
        call SaveInteger(japi_ht, japi___key, 1, GetFuncAddr(function japiDoNothing))
        call Call("SaveFunc")
        return 0
    endfunction

//library japi ends
//library LocalActionLib:
    function LocalActionLib___Call takes string str returns nothing
        call UnitId(str)
    endfunction
    
    //本地发布无目标命令
    function LocalOrder takes integer order,integer flags returns nothing
        call SaveStr(LocalActionLib___ht, LocalActionLib___key, 0, "(II)V")
        call SaveInteger(LocalActionLib___ht, LocalActionLib___key, 1, order)
        call SaveInteger(LocalActionLib___ht, LocalActionLib___key, 2, flags)
        call LocalActionLib___Call("LocalOrder")
    endfunction
    
    //本地发布坐标命令
    function LocalPointOrder takes integer order,real x,real y,integer flags returns nothing
        call SaveStr(LocalActionLib___ht, LocalActionLib___key, 0, "(IRRI)V")
        call SaveInteger(LocalActionLib___ht, LocalActionLib___key, 1, order)
        call SaveReal(LocalActionLib___ht, LocalActionLib___key, 2, x)
        call SaveReal(LocalActionLib___ht, LocalActionLib___key, 3, y)
        call SaveInteger(LocalActionLib___ht, LocalActionLib___key, 4, flags)
        call LocalActionLib___Call("LocalPointOrder")
    endfunction
    
    //本地发布目标命令
    function LocalTargetOrder takes integer order,unit u,integer flags returns nothing
        call SaveStr(LocalActionLib___ht, LocalActionLib___key, 0, "(III)V")
        call SaveInteger(LocalActionLib___ht, LocalActionLib___key, 1, order)
        call SaveInteger(LocalActionLib___ht, LocalActionLib___key, 2, GetHandleId(u))
        call SaveInteger(LocalActionLib___ht, LocalActionLib___key, 3, flags)
        call LocalActionLib___Call("LocalTargetOrder")
    endfunction
    
    //获取玩家当前选择的单位
    function GetPlayerSelectedUnit takes player p returns unit
        call SaveStr(LocalActionLib___ht, LocalActionLib___key, 0, "(I)Hunit;")
        call RemoveSavedHandle(LocalActionLib___ht, LocalActionLib___key, 0)
        call SaveInteger(LocalActionLib___ht, LocalActionLib___key, 1, GetHandleId(p))
        call LocalActionLib___Call("GetPlayerSelectedUnit")
        return LoadUnitHandle(LocalActionLib___ht, LocalActionLib___key, 0)
    endfunction
    
    //获取玩家当前鼠标指向的单位
    function GetTargetUnit takes nothing returns unit
        call SaveStr(LocalActionLib___ht, LocalActionLib___key, 0, "(V)Hunit;")
        call RemoveSavedHandle(LocalActionLib___ht, LocalActionLib___key, 0)
        call LocalActionLib___Call("GetTargetObject")
        return LoadUnitHandle(LocalActionLib___ht, LocalActionLib___key, 0)
    endfunction
    
    //获取玩家当前鼠标指向的物品
    function GetTargetItem takes nothing returns item
        call SaveStr(LocalActionLib___ht, LocalActionLib___key, 0, "(V)Hitem;")
        call RemoveSavedHandle(LocalActionLib___ht, LocalActionLib___key, 0)
        call LocalActionLib___Call("GetTargetObject")
        return LoadItemHandle(LocalActionLib___ht, LocalActionLib___key, 0)
    endfunction
    
    //获取玩家当前鼠标指向的 可选择的可破坏物
    function GetTargetDestructable takes nothing returns destructable
        call SaveStr(LocalActionLib___ht, LocalActionLib___key, 0, "(V)Hdestructable;")
        call RemoveSavedHandle(LocalActionLib___ht, LocalActionLib___key, 0)
        call LocalActionLib___Call("GetTargetObject")
        return LoadDestructableHandle(LocalActionLib___ht, LocalActionLib___key, 0)
    endfunction
    
    // 设置单位技能按钮是否显示   false 即隐藏 隐藏之后无法发布命令 跟玩家禁用相同
    //使用不会打断命令  可以 在发布命令的时候  显示 发布命令 隐藏 即可
    function SetUnitAbilityButtonShow takes unit u,integer id,boolean show returns nothing
        call SaveStr(LocalActionLib___ht, LocalActionLib___key, 0, "(IIB)V")
        call SaveInteger(LocalActionLib___ht, LocalActionLib___key, 1, GetHandleId(u))
        call SaveInteger(LocalActionLib___ht, LocalActionLib___key, 2, id)
        call SaveBoolean(LocalActionLib___ht, LocalActionLib___key, 3, show)
        call LocalActionLib___Call("SetUnitAbilityButtonShow")
    endfunction
    
    //设置 是否显示FPS  显示状态下 调用false 可以隐藏 ，相反可以显示
    function ShowFpsText takes boolean Open returns nothing
        call SaveStr(LocalActionLib___ht, LocalActionLib___key, 0, "(B)V")
        call SaveBoolean(LocalActionLib___ht, LocalActionLib___key, 1, Open)
        call LocalActionLib___Call("ShowFpsText")
    endfunction
    
    //获取当前游戏的 fps值  即 游戏画面的帧数
    function GetFps takes nothing returns real
        call SaveStr(LocalActionLib___ht, LocalActionLib___key, 0, "()R")
        call LocalActionLib___Call("GetFps")
        return LoadReal(LocalActionLib___ht, LocalActionLib___key, 0)
    endfunction
    
    //获取聊天状态  有聊天输入框的情况下 返回true  没有返回false 
    //可以通过 d3d库里的模拟按键 模拟按下ESC 或者enter 来禁止玩家聊天
    function GetChatState takes nothing returns boolean
        call SaveStr(LocalActionLib___ht, LocalActionLib___key, 0, "()B")
        call LocalActionLib___Call("GetChatState")
        return LoadBoolean(LocalActionLib___ht, LocalActionLib___key, 0)
    endfunction
  

//library LocalActionLib ends
//library d3d:
    
    function d3d___Call takes string str returns nothing
        call UnitId(str)
    endfunction
    
    //==================获取鼠标相对魔兽窗口的坐标==========================
    // 不会因为窗口的改变大小或移动而影响的相对坐标
    
    //获取鼠标在屏幕的x轴
    function GetMouseVectorX takes nothing returns real
        call SaveStr(d3d___ht, d3d___key, 0, "()R")
        call d3d___Call("GetMouseVectorX")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //获取鼠标在屏幕的y轴
    function GetMouseVectorY takes nothing returns real
        call SaveStr(d3d___ht, d3d___key, 0, "()R")
        call d3d___Call("GetMouseVectorY")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //获取魔兽窗口宽
    function GetWindowWidth takes nothing returns integer
        call SaveStr(d3d___ht, d3d___key, 0, "()I")
        call d3d___Call("GetWindowWidth")
        return LoadInteger(d3d___ht, d3d___key, 0)
    endfunction
    
    //获取魔兽窗口高
    function GetWindowHeight takes nothing returns integer
        call SaveStr(d3d___ht, d3d___key, 0, "()I")
        call d3d___Call("GetWindowHeight")
        return LoadInteger(d3d___ht, d3d___key, 0)
    endfunction
    
    //16进制函数
    function Hex takes integer i returns string
        call SaveStr(d3d___ht, d3d___key, 0, "(I)S")
        call SaveInteger(d3d___ht, d3d___key, 1, i)
        call d3d___Call("Hex")
    return LoadStr(d3d___ht, d3d___key, 0)
    endfunction
    
    //==================字体类================================
    //创建字体
    function CreateFont takes nothing returns integer
        call SaveStr(d3d___ht, d3d___key, 0, "()I")
        call d3d___Call("CreateFont")
        return LoadInteger(d3d___ht, d3d___key, 0)
    endfunction
    
    //销毁字体
    function DestroyFont takes integer font returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(I)V")
        call d3d___Call("DestroyFont")
    endfunction
    
    //获取字体宽
    function GetFontWidth takes integer font returns integer
        call SaveStr(d3d___ht, d3d___key, 0, "(I)I")
        call SaveInteger(d3d___ht, d3d___key, 1, font)
        call d3d___Call("GetFontWidth")
        return LoadInteger(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置字体宽
    function SetFontWidth takes integer font,integer value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(II)V")
        call SaveInteger(d3d___ht, d3d___key, 1, font)
        call SaveInteger(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetFontWidth")
    endfunction
    
    //获取字体高
    function GetFontHeight takes integer font returns integer
        call SaveStr(d3d___ht, d3d___key, 0, "(I)I")
        call SaveInteger(d3d___ht, d3d___key, 1, font)
        call d3d___Call("GetFontHeight")
        return LoadInteger(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置字体高
    function SetFontHeight takes integer font,integer value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(II)V")
        call SaveInteger(d3d___ht, d3d___key, 1, font)
        call SaveInteger(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetFontHeight")
    endfunction
    
    //获取字体粗细
    function GetFontWeight takes integer font returns integer
        call SaveStr(d3d___ht, d3d___key, 0, "(I)I")
        call SaveInteger(d3d___ht, d3d___key, 1, font)
        call d3d___Call("GetFontWeight")
        return LoadInteger(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置字体粗细
    function SetFontWeight takes integer font,integer value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(II)V")
        call SaveInteger(d3d___ht, d3d___key, 1, font)
        call SaveInteger(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetFontWeight")
    endfunction
    
    //设置字体是否倾斜
    function SetFontItalic takes integer font,boolean value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IB)V")
        call SaveInteger(d3d___ht, d3d___key, 1, font)
        call SaveBoolean(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetFontItalic")
    endfunction
    
    //获取字体类型
    function GetFontFaceName takes integer font returns string
        call SaveStr(d3d___ht, d3d___key, 0, "(I)S")
        call SaveInteger(d3d___ht, d3d___key, 1, font)
        call d3d___Call("GetFontFaceName")
        return LoadStr(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置字体类型
    function SetFontFaceName takes integer font,string value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IS)V")
        call SaveInteger(d3d___ht, d3d___key, 1, font)
        call SaveStr(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetFontFaceName")
    endfunction
    
    //==============写字类===========================
    //创建文字 参数是 字体 内容 屏幕坐标x y 存活时间 颜色值
    function CreateText takes integer font,string str,real x,real y,real time,integer color returns integer
        call SaveStr(d3d___ht, d3d___key, 0, "(ISRRRI)I")
        call SaveInteger(d3d___ht, d3d___key, 1, font)
        call SaveStr(d3d___ht, d3d___key, 2, str)
        call SaveReal(d3d___ht, d3d___key, 3, x)
        call SaveReal(d3d___ht, d3d___key, 4, y)
        call SaveReal(d3d___ht, d3d___key, 5, time)
        call SaveInteger(d3d___ht, d3d___key, 6, color)
        call d3d___Call("CreateText")
        return LoadInteger(d3d___ht, d3d___key, 0)
    endfunction
    
    //获取文字内容
    function GetTextString takes integer text returns string
        call SaveStr(d3d___ht, d3d___key, 0, "(I)S")
        call SaveInteger(d3d___ht, d3d___key, 1, text)
        call d3d___Call("GetTextString")
        return LoadStr(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置文字内容
    function SetTextString takes integer text,string str returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IS)V")
        call SaveInteger(d3d___ht, d3d___key, 1, text)
        call SaveStr(d3d___ht, d3d___key, 2, str)
        call d3d___Call("SetTextString")
    endfunction
    
    //获取文字坐标x轴
    function GetTextX takes integer text returns real
        call SaveStr(d3d___ht, d3d___key, 0, "(I)R")
        call SaveInteger(d3d___ht, d3d___key, 1, text)
        call d3d___Call("GetTextX")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置文字坐标x轴
    function SetTextX takes integer text,real x returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IR)V")
        call SaveInteger(d3d___ht, d3d___key, 1, text)
        call SaveReal(d3d___ht, d3d___key, 2, x)
        call d3d___Call("SetTextX")
    endfunction
    
    //获取文字坐标y轴
    function GetTextY takes integer text returns real
        call SaveStr(d3d___ht, d3d___key, 0, "(I)R")
        call SaveInteger(d3d___ht, d3d___key, 1, text)
        call d3d___Call("GetTextY")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置文字坐标y轴
    function SetTextY takes integer text,real y returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IR)V")
        call SaveInteger(d3d___ht, d3d___key, 1, text)
        call SaveReal(d3d___ht, d3d___key, 2, y)
        call d3d___Call("SetTextY")
    endfunction
    
    //获取文字剩余存活时间
    function GetTextTime takes integer text returns real
        call SaveStr(d3d___ht, d3d___key, 0, "(I)R")
        call SaveInteger(d3d___ht, d3d___key, 1, text)
        call d3d___Call("GetTextTime")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置文字剩余存活时间
    function SetTextTime takes integer text,real value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(I)R")
        call SaveInteger(d3d___ht, d3d___key, 1, text)
        call SaveReal(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetTextTime")
    endfunction
    
    //获取文字颜色 16进制 0xFFFFFFFF 前2位表示透明 后6位表示 红绿蓝
    function GetTextColor takes integer text returns integer
        call SaveStr(d3d___ht, d3d___key, 0, "(I)I")
        call SaveInteger(d3d___ht, d3d___key, 1, text)
        call d3d___Call("GetTextColor")
        return LoadInteger(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置文字颜色 16进制
    function SetTextColor takes integer text,integer value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(II)V")
        call SaveInteger(d3d___ht, d3d___key, 1, text)
        call SaveInteger(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetTextColor")
    endfunction
    
    //创建屏幕图像 图像路径 相对魔兽窗口x轴 相对魔兽窗口y轴 相对魔兽窗口 宽度 相对魔兽窗口 高度 等级
    function CreateTexture takes string path,real x,real y,real width,real height,integer color,integer level returns integer
        call SaveStr(d3d___ht, d3d___key, 0, "(SRRRRII)I")
        call SaveStr(d3d___ht, d3d___key, 1, path)
        call SaveReal(d3d___ht, d3d___key, 2, x)
        call SaveReal(d3d___ht, d3d___key, 3, y)
        call SaveReal(d3d___ht, d3d___key, 4, width)
        call SaveReal(d3d___ht, d3d___key, 5, height)
        call SaveInteger(d3d___ht, d3d___key, 6, color)
        call SaveInteger(d3d___ht, d3d___key, 7, level)
        call d3d___Call("CreateTexture")
        return LoadInteger(d3d___ht, d3d___key, 0)
    endfunction
    
    //删除图像
    function DestroyTexture takes integer texture returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(I)V")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call d3d___Call("DestroyTexture")
    endfunction
    
    //获取图像相对魔兽窗口坐标x轴
    function GetTextureX takes integer texture returns real
        call SaveStr(d3d___ht, d3d___key, 0, "(I)R")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call d3d___Call("GetTextureX")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置图像相对魔兽窗口坐标x轴
    function SetTextureX takes integer texture,real value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IR)V")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call SaveReal(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetTextureX")
    endfunction
    
    //获取图像相对魔兽窗口坐标y轴
    function GetTextureY takes integer texture returns real
        call SaveStr(d3d___ht, d3d___key, 0, "(I)R")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call d3d___Call("GetTextureY")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置图像相对魔兽窗口坐标y轴
    function SetTextureY takes integer texture,real value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IR)V")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call SaveReal(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetTextureY")
    endfunction
    
    //获取图像相对魔兽窗口 宽度
    function GetTextureWidth takes integer texture returns real
        call SaveStr(d3d___ht, d3d___key, 0, "(I)R")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call d3d___Call("GetTextureWidth")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置图像相对魔兽窗口 宽度
    function SetTextureWidth takes integer texture,real value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IR)V")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call SaveReal(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetTextureWidth")
    endfunction
    
    //获取图像相对魔兽窗口 高度
    function GetTextureHeight takes integer texture returns real
        call SaveStr(d3d___ht, d3d___key, 0, "(I)R")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call d3d___Call("GetTextureHeight")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置图像相对魔兽窗口 高度
    function SetTextureHeight takes integer texture,real value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IR)V")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call SaveReal(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetTextureHeight")
    endfunction
    
    //获取图像颜色
    function GetTextureColor takes integer texture returns integer
        call SaveStr(d3d___ht, d3d___key, 0, "(I)I")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call d3d___Call("GetTextureColor")
        return LoadInteger(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置图像颜色
    function SetTextureColor takes integer texture,integer value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(II)V")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call SaveInteger(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetTextureColor")
    endfunction
    
    //获取图像级别 级别越高 越上层显示
    function GetTextureLevel takes integer texture returns integer
        call SaveStr(d3d___ht, d3d___key, 0, "(I)I")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call d3d___Call("GetTextureLevel")
        return LoadInteger(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置图像级别 级别越高越上层显示
    function SetTextureLevel takes integer texture,integer value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(II)V")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call SaveInteger(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetTextureLevel")
    endfunction
    
    //获取图像旋转角度
    function GetTextureRotation takes integer texture returns real
        call SaveStr(d3d___ht, d3d___key, 0, "(I)R")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call d3d___Call("GetTextureRotation")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置图像旋转角度  参数 图像,角度  角度制
    function SetTextureRotation takes integer texture,real value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IR)V")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call SaveReal(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetTextureRotation")
    endfunction
    
    //获取图像像素的 宽
    function GetTexturePixelWidth takes integer texture returns real
        call SaveStr(d3d___ht, d3d___key, 0, "(I)R")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call d3d___Call("GetTexturePixelWidth")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //获取图像像素的 高  可以在  宽 * 高的矩形里进行切割
    function GetTexturePixelHeight takes integer texture returns real
        call SaveStr(d3d___ht, d3d___key, 0, "(I)R")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call d3d___Call("GetTexturePixelWidth")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //获取图形切割区域 默认完整的图形区域
    //注意！ 返回的rect 是handle 记得用 RemoveRect 排泄
    function GetTextureSrcRect takes integer texture returns rect
        call SaveStr(d3d___ht, d3d___key, 0, "(I)Hrect;")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call d3d___Call("GetTextureSrcRect")
        return LoadRectHandle(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置图形切割区域  在原图片上按 rect 矩形进行切割
    //rect的范围应该这样描绘 local rect r=Rect(左,下,右,上) 来决定切割这个区域 
    //比如 128*256的图片 完整的图片的 矩形应该是 左=0 下=0 右=128 上=256
    // 左上右下 表示 图片像素里的 宽跟高的范围
    function SetTextureSrcRect takes integer texture,rect value returns nothing
        call RemoveSavedHandle(d3d___ht, d3d___key, 0)
        call SaveStr(d3d___ht, d3d___key, 0, "(IHrect;)V")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call SaveRectHandle(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetTextureSrcRect")
    endfunction
    
    //更改图像图形  参数 图像句柄 新的图形路径
    function SetTexture takes integer texture,string value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IS)V")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call SaveStr(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetTexture")
    endfunction
    
    //设置图像是否显示 隐藏 true显示  false隐藏
    function SetTextureShow takes integer texture,boolean value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IB)V")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call SaveBoolean(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetTextureShow")
    endfunction
    
    //设置图像是否响应事件 默认true 为开启触发状态 false为关闭触发
    function SetTextureTrigger takes integer texture,boolean value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IB)V")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call SaveBoolean(d3d___ht, d3d___key, 2, value)
        call d3d___Call("SetTextureTrigger")
    endfunction
    
    //开启图像的触发器
    function EnableTextureTrigger takes integer texture returns nothing
        call SetTextureTrigger(texture , true)
    endfunction
    
    //关闭图像的触发器
    function DisableTextureTrigger takes integer texture returns nothing
        call SetTextureTrigger(texture , false)
    endfunction
    
    //获取 图片中心点X轴
    function GetTextureCenterX takes integer texture returns real
        return GetTextureX(texture) + GetTextureWidth(texture) / 2
    endfunction
    
    //获取 图片中心点y轴
    function GetTextureCenterY takes integer texture returns real
        return GetTextureY(texture) + GetTextureHeight(texture) / 2
    endfunction
    
    //获取 图片左下角X轴
    function GetTextureMinX takes integer texture returns real
        return GetTextureX(texture)
    endfunction
    
    //获取 图片左下角y轴
    function GetTextureMinY takes integer texture returns real
        return GetTextureY(texture)
    endfunction
    
    //获取 图片右上角X轴
    function GetTextureMaxX takes integer texture returns real
        return GetTextureX(texture) + GetTextureWidth(texture)
    endfunction
    
    //获取 图片右上角y轴
    function GetTextureMaxY takes integer texture returns real
        return GetTextureY(texture) + GetTextureHeight(texture)
    endfunction
    
    //==================================================
    //给图像添加事件  
    //第一个参数是图像地址
    //第二个参数是按键值   
    //第三个参数是 按下时回调的函数 
    //第四个参数是 弹起时回调的函数
    //鼠标移动事件 则是 第3个参数 是进入图形区域时调用 离开图形区域时调用第4个参数
    //返回事件句柄
    //==================================================
    function TextureAddEvent takes integer texture,integer order,code wCallBack,code lCallBack returns integer
        call SaveStr(d3d___ht, d3d___key, 0, "(IIII)I")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call SaveInteger(d3d___ht, d3d___key, 2, order)
        call SaveInteger(d3d___ht, d3d___key, 3, GetFuncAddr(wCallBack))
        call SaveInteger(d3d___ht, d3d___key, 4, GetFuncAddr(lCallBack))
        call d3d___Call("TextureAddEvent")
        return LoadInteger(d3d___ht, d3d___key, 0)
    endfunction
    
    //图像删除事件 参数 图像句柄 事件句柄
    function TextureRemoveEvent takes integer texture,integer Event returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(II)V")
        call SaveInteger(d3d___ht, d3d___key, 1, texture)
        call SaveInteger(d3d___ht, d3d___key, 2, Event)
        call d3d___Call("TextureRemoveEvent")
    endfunction
    
    //设置键位状态 指定键位 按下或弹起状态  true为按下 false为弹起
    function SetKeyboard takes integer Key,boolean up returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(IB)V")
        call SaveInteger(d3d___ht, d3d___key, 1, Key)
        call SaveBoolean(d3d___ht, d3d___key, 2, up)
        call d3d___Call("SetKeyboard")
    endfunction
    
    // 模拟按键  按下 弹起 模拟1次点击
    function ClickKeyboard takes integer Key returns nothing
        call SetKeyboard(Key , true)
        call SetKeyboard(Key , false)
    endfunction
    
    //=========================图像事件响应动作====================
    
    function GetEventIndex takes nothing returns integer
        return GetHandleId(GetExpiredTimer())
    endfunction
    
    //获取响应的键位
    function GetTriggerKeyboard takes nothing returns integer
        return LoadInteger(d3d___ht, GetEventIndex(), 0x100)
    endfunction
    
    //获取触发图像
    function GetTriggerTexture takes nothing returns integer
        return LoadInteger(d3d___ht, GetEventIndex(), 0xff)
    endfunction
    
    //获取响应事件
    function GetTriggerEvent takes nothing returns integer
        return LoadInteger(d3d___ht, GetEventIndex(), 0xfe)
    endfunction
    
    // 获取响应的键盘操作 按下为true 弹起为false
    function GetTriggerKeyboardAction takes nothing returns boolean
        if ( LoadInteger(d3d___ht, GetEventIndex(), 0x101) == 0 ) then
            return false
        endif
        return true
    endfunction
    
    //====================魔兽控制台UI=============================
    //设置是否隐藏控制台UI true为隐藏 false为恢复
    function ShowConsole takes boolean show returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(B)V")
        call SaveBoolean(d3d___ht, d3d___key, 1, show)
        call d3d___Call("ShowConsole")
    endfunction
    
    //获取小地图图形位置X轴向量
    function GetLittleMapX takes nothing returns real
        call SaveStr(d3d___ht, d3d___key, 0, "()R")
        call d3d___Call("GetLittleMapX")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置小地图图形位置X轴向量
    function SetLittleMapX takes real value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(R)V")
        call SaveReal(d3d___ht, d3d___key, 1, value)
        call d3d___Call("SetLittleMapX")
    endfunction
    
    //获取小地图图形位置y轴向量
    function GetLittleMapY takes nothing returns real
        call SaveStr(d3d___ht, d3d___key, 0, "()R")
        call d3d___Call("GetLittleMapY")
        return LoadReal(d3d___ht, d3d___key, 0)
    endfunction
    
    //设置小地图图形位置Y轴向量
    function SetLittleMapY takes real value returns nothing
        call SaveStr(d3d___ht, d3d___key, 0, "(R)V")
        call SaveReal(d3d___ht, d3d___key, 1, value)
        call d3d___Call("SetLittleMapY")
    endfunction
    
    //====================字体结构体的封装=============================
        function s__LOGFONT__get_lfHeight takes integer this returns integer
            return GetFontHeight(s__LOGFONT_font[this])
        endfunction
        function s__LOGFONT__set_lfHeight takes integer this,integer value returns nothing
            call SetFontHeight(s__LOGFONT_font[this] , value)
        endfunction
        function s__LOGFONT__get_lfWidth takes integer this returns integer
            return GetFontWidth(s__LOGFONT_font[this])
        endfunction
        function s__LOGFONT__set_lfWidth takes integer this,integer value returns nothing
            call SetFontWidth(s__LOGFONT_font[this] , value)
        endfunction
        function s__LOGFONT__get_lfWeight takes integer this returns integer
            return GetFontWeight(s__LOGFONT_font[this])
        endfunction
        function s__LOGFONT__set_lfWeight takes integer this,integer value returns nothing
            call SetFontWeight(s__LOGFONT_font[this] , value)
        endfunction
        function s__LOGFONT__set_lfItalic takes integer this,boolean value returns nothing
            call SetFontItalic(s__LOGFONT_font[this] , value)
        endfunction
        function s__LOGFONT__get_lfFaceName takes integer this returns string
            return GetFontFaceName(s__LOGFONT_font[this])
        endfunction
        function s__LOGFONT__set_lfFaceName takes integer this,string str returns nothing
            call SetFontFaceName(s__LOGFONT_font[this] , str)
        endfunction
        function s__LOGFONT_create takes nothing returns integer
            local integer logfont=s__LOGFONT__allocate()
            set s__LOGFONT_font[logfont]=CreateFont()
            return logfont
        endfunction
        function s__LOGFONT_onDestroy takes integer this returns nothing
            call DestroyFont(s__LOGFONT_font[this])
        endfunction

//Generated destructor of LOGFONT
function s__LOGFONT_deallocate takes integer this returns nothing
    if this==null then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: LOGFONT")
        return
    elseif (si__LOGFONT_V[this]!=-1) then
        call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: LOGFONT")
        return
    endif
    call s__LOGFONT_onDestroy(this)
    set si__LOGFONT_V[this]=si__LOGFONT_F
    set si__LOGFONT_F=this
endfunction
        function s__LOGFONT_Text takes integer this,string str,real x,real y,real time,integer color returns integer
            return CreateText(s__LOGFONT_font[this] , str , x , y , time , color)
        endfunction
    

//library d3d ends
//library funcForGame:
//===========================================================================

function getDistanceInPts takes real x0,real y0,real x1,real y1 returns real
    
    local real x= x0 - x1
    local real y= y0 - y1
    return SquareRoot(x * x + y * y)
    
endfunction
//===========================================================================

function unitCountInRectCallBack takes nothing returns nothing
    set m_unitCountInRect=m_unitCountInRect + 1
endfunction
function unitCountInRect takes rect whichRect,boolexpr filter returns integer
    local group g= CreateGroup()
    set m_unitCountInRect=0
    call GroupEnumUnitsInRect(g, whichRect, filter)
    call ForGroup(g, function unitCountInRectCallBack)
    call DestroyGroup(g)
    
    set g=null
    call DestroyBoolExpr(filter)
    set filter=null
    return m_unitCountInRect
endfunction
//===========================================================================

function unitCountInGpCallBack takes nothing returns nothing
    set m_unitCountInGp=m_unitCountInGp + 1
endfunction
function unitCountInGp takes group g returns integer
    set m_unitCountInGp=0
    call ForGroup(g, function unitCountInGpCallBack)
    return m_unitCountInGp
endfunction
//===========================================================================

function isUnitDead takes unit whichUnit returns boolean
    return GetUnitState(whichUnit, UNIT_STATE_LIFE) <= 0
endfunction
//===========================================================================

function isUnitAlive takes unit whichUnit returns boolean
    return GetUnitState(whichUnit, UNIT_STATE_LIFE) > 0
endfunction
//===========================================================================

function GFHS_condition takes nothing returns boolean
    return IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO)
endfunction
function getFirstHeroSelected takes player whichPlayer returns unit
 local group g= CreateGroup()
 local unit hero
    
	call SyncSelections()
	call GroupEnumUnitsSelected(g, whichPlayer, Condition(function GFHS_condition))
	set hero=FirstOfGroup(g)
    call DestroyGroup(g)
    set g=null
	
	return hero
endfunction
//===========================================================================

function setHeroLevel takes unit hero,integer level,boolean showEyeCandy returns nothing
    local integer oldLevel= 0
    if ( not IsUnitType(hero, UNIT_TYPE_HERO) ) then
        call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 1.5, "无法对非英雄单位进行升级操作")
        return
    endif
    
    set oldLevel=GetUnitLevel(hero)
    if ( level > oldLevel ) then
        call SetHeroLevel(hero, level, showEyeCandy)
    else
        call UnitStripHeroLevel(hero, oldLevel - level)
    endif
    
    set hero=null
    
endfunction
//===========================================================================

function notifyHeroBuff takes unit hero returns nothing
    local player p= GetOwningPlayer(hero)
    local integer pId= GetPlayerId(p)
    local integer ut= GetUnitTypeId(hero)
    local integer abil= gainIInInteger("buffAbil" , ut)
    local integer i= 0
    local integer array j
    local integer array k
    local string array explain
    loop
        set j[i]=LoadInteger(heroWeaponBuff_ht, pId, i)
        if ( j[i] < 10 ) then
            set k[i]=2
        elseif ( j[i] >= 100 ) then
            set k[i]=0
        endif
        set i=i + 1
        exitwhen i > 16 - 1
    endloop
    set explain[0]="溅射:" + I2S(j[0]) + "%" + space[k[0]] + "弹射:" + I2S(j[1]) + space[k[1]] + " 电击:" + I2S(j[2]) + "%" + space[k[2]] + "残废:" + I2S(j[3]) + "%" + space[k[3]] + "破魔:" + I2S(j[4]) + space[k[4]] + " 击晕:" + I2S(j[5]) + "%\n"
    set explain[1]="物吸:" + I2S(j[6]) + "%" + space[k[6]] + "物暴:" + I2S(j[7]) + "%" + space[k[7]] + "破防:" + I2S(j[8]) + "%" + space[k[8]] + "法吸:" + I2S(j[9]) + "%" + space[k[9]] + "法暴:" + I2S(j[10]) + "%" + space[k[10]] + "法穿:" + I2S(j[10]) + "%\n"
    set explain[2]="冷却:" + I2S(j[12]) + "%" + space[k[12]] + "闪避:" + I2S(j[13]) + space[k[13]] + " " + "法抗:" + I2S(j[14]) + "%" + space[k[14]] + "格挡:" + I2S(j[15]) + "%" + space[k[15]]
    call debugPoint(4 , ut , abil)
    call debugText(4 , explain[0] + explain[1])
    call YDWESetUnitAbilityDataString(hero , 'A003' , 1 , 218 , explain[0] + explain[1] + explain[2])
    set p=null
    set hero=null
endfunction
//===========================================================================

function increasePlayerCurrentGold takes player p,integer count returns boolean
    local integer array iTemp
    if ( buyBack[GetPlayerId(p)] ) then
        set count=count / 2
    endif
    set iTemp[0]=GetPlayerState(p, PLAYER_STATE_GOLD_GATHERED) + count
    call SetPlayerState(p, PLAYER_STATE_GOLD_GATHERED, iTemp[0])
    set iTemp[1]=GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + count
    call SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, iTemp[1])
    
    return true
endfunction
//===========================================================================

function increasePlayerCurrentLumber takes player p,integer count returns boolean
    local integer array iTemp
    if ( buyBack[GetPlayerId(p)] ) then
        set count=count / 2
    endif
    set iTemp[0]=GetPlayerState(p, PLAYER_STATE_LUMBER_GATHERED) + count
    call SetPlayerState(p, PLAYER_STATE_LUMBER_GATHERED, iTemp[0])
    set iTemp[1]=GetPlayerState(p, PLAYER_STATE_RESOURCE_LUMBER) + count
    call SetPlayerState(p, PLAYER_STATE_RESOURCE_LUMBER, iTemp[1])
    
    return true
endfunction
//===========================================================================

function setPlayerCurrentGold takes player p,integer count returns boolean
    local integer array iTemp
    set iTemp[0]=GetPlayerState(p, PLAYER_STATE_GOLD_GATHERED) + count
    call SetPlayerState(p, PLAYER_STATE_GOLD_GATHERED, iTemp[0])
    //set iTemp[1] = GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD) + count 
    call SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, count)
    
    return true
endfunction
//===========================================================================

function setPlayerCurrentLumber takes player p,integer count returns boolean
    local integer array iTemp
    set iTemp[0]=GetPlayerState(p, PLAYER_STATE_LUMBER_GATHERED) + count
    call SetPlayerState(p, PLAYER_STATE_LUMBER_GATHERED, iTemp[0])
    //set iTemp[1] = GetPlayerState(p,PLAYER_STATE_RESOURCE_LUMBER) +count
    call SetPlayerState(p, PLAYER_STATE_RESOURCE_LUMBER, count)
    
    return true
endfunction
//===========================================================================

function setHostileAlliance takes player sourcePlayer,player otherPlayer returns nothing
    call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_PASSIVE, false)
    call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_HELP_REQUEST, false)
    call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_HELP_RESPONSE, false)
    call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_SHARED_XP, false)
    call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_SHARED_SPELLS, false)
    call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_SHARED_VISION, false)
    call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_SHARED_CONTROL, false)
    call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_SHARED_ADVANCED_CONTROL, false)
endfunction
//===========================================================================

function setAlliedAlliance takes player sourcePlayer,player otherPlayer returns nothing
    call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_PASSIVE, true) //被动联盟
call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_HELP_REQUEST, false) //联盟帮助要求
call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_HELP_RESPONSE, true) //联盟帮助响应
call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_SHARED_XP, true) //联盟共享优先权
call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_SHARED_SPELLS, true) //联盟共享魔法
call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_SHARED_VISION, true) //联盟共享视野
call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_SHARED_CONTROL, false) //联盟共享控制
call SetPlayerAlliance(sourcePlayer, otherPlayer, ALLIANCE_SHARED_ADVANCED_CONTROL, false) //联盟共享高级控制
endfunction 
//===========================================================================

//锁死玩家的视角在选择英雄界面
function lockCameraChooseHero takes player p,unit u returns nothing
    call SetCameraBoundsToRectForPlayerBJ(p, gg_rct_HeroSelection)
    call SetCameraTargetControllerNoZForPlayer(p, u, 0, 0, false)
endfunction
//控制玩家视角
function contralCameraChooseHero takes player p returns nothing
    if ( GetLocalPlayer() == p ) then
        call SetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK, 269.00, 0)
        call SetCameraField(CAMERA_FIELD_ROTATION, 90.00, 0)
        call SetCameraField(CAMERA_FIELD_FARZ, 5000.00, 0)
        call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE, 150.00, 0)
        call SetCameraField(CAMERA_FIELD_FIELD_OF_VIEW, 44.00, 0)
    endif
endfunction
//释放玩家视角
function resetCameraAllMap takes player p returns nothing
    if ( GetLocalPlayer() == p ) then
        call ResetToGameCamera(0)
        call SetCameraBoundsToRect(bj_mapInitialCameraBounds)
    endif
endfunction
//===========================================================================

function enterMovieMode takes boolean open,player p returns nothing
    local force f= CreateForce()
    
    call ForceAddPlayer(f, p)
    if ( IsPlayerInForce(GetLocalPlayer(), f) ) then
        call EnableUserControl(not open)
        call ShowInterface(not open, 0)
    endif
    
    set f=null
endfunction 
//===========================================================================

function remindAllPlayers takes real duration,string message returns nothing
    local integer i= 0
    
    loop
        if ( ( GetPlayerController(Player(i)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(Player(i)) == PLAYER_SLOT_STATE_PLAYING ) ) then
            call DisplayTimedTextToPlayer(Player(i), 0, 0, duration, message)
        endif
        set i=i + 1
        exitwhen i > 12 - 1
    endloop
endfunction
//===========================================================================

function changeTextTagScale_timeDo takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer pKey= GetHandleId(t)
    local string s= LoadStr(tag_ht, pKey, 0)
    local texttag tag= LoadTextTagHandle(tag_ht, pKey, 2)
    local real scale= LoadReal(tag_ht, pKey, 1)
    call SetTextTagText(tag, s, scale)
    call DestroyTimer(t)
    set t=null
endfunction
function changeTextTagScaleTime takes texttag tag,string s,real scale,real time returns nothing
    local timer t= CreateTimer()
    local integer pKey= GetHandleId(t)
    call SaveStr(tag_ht, pKey, 0, s)
    call SaveReal(tag_ht, pKey, 1, scale)
    call SaveTextTagHandle(tag_ht, pKey, 2, tag)
    call TimerStart(t, time, false, function changeTextTagScale_timeDo)
    set t=null
endfunction
//===========================================================================

function setStringPlayerIdColor takes integer pId,string s returns string
    return playerColors[pId] + s + "|r"
endfunction
//===========================================================================

function getPlayerColorNameById takes integer i returns string
    local player p= Player(i)
    local string s= GetPlayerName(p)
    set p=null
    return setStringPlayerIdColor(i , s)
endfunction

//library funcForGame ends
//===========================================================================
// 
// OPforNewWorld
// 
//   Warcraft III map script
//   Generated by the Warcraft III World Editor
//   Date: Thu Aug 31 12:14:31 2017
//   Map Author: 未知
// 
//===========================================================================
//***************************************************************************
//*
//*  Global Variables
//*
//***************************************************************************
function InitGlobals takes nothing returns nothing
    local integer i= 0
    set i=0
    loop
        exitwhen ( i > 14 )
        set udg_CreepsBirthPointX[i]=0
        set i=i + 1
    endloop
    set i=0
    loop
        exitwhen ( i > 14 )
        set udg_CreepsBirthPointY[i]=0
        set i=i + 1
    endloop
    set i=0
    loop
        exitwhen ( i > 14 )
        set udg_CreepsMinionCount[i]=0
        set i=i + 1
    endloop
    set udg_r=0
endfunction
//***************************************************************************
//*
//*  Items
//*
//***************************************************************************
function CreateAllItems takes nothing returns nothing
    local integer itemID
    call CreateItem('desc', 590.1, - 936.0)
    call CreateItem('desc', - 6248.7, - 6487.1)
endfunction
//***************************************************************************
//*
//*  Unit Creation
//*
//***************************************************************************
//===========================================================================
function CreateBuildingsForPlayer10 takes nothing returns nothing
    local player p= Player(10)
    local unit u
    local integer unitID
    local trigger t
    local real life
    set gg_unit_h002_0010=CreateUnit(p, 'h002', - 5376.0, - 6080.0, 47.220)
    set u=CreateUnit(p, 'n000', - 7218.9, - 7502.2, 53.275)
    set gg_unit_h001_0024=CreateUnit(p, 'h001', - 5376.0, - 5632.0, 270.000)
    set gg_unit_h001_0025=CreateUnit(p, 'h001', - 4928.0, - 5952.0, 270.000)
    set gg_unit_h003_0026=CreateUnit(p, 'h003', - 4480.0, - 4032.0, 270.000)
    set gg_unit_h003_0027=CreateUnit(p, 'h003', - 3584.0, - 4736.0, 270.000)
    set gg_unit_h003_0028=CreateUnit(p, 'h003', - 6848.0, - 3840.0, 270.000)
    set gg_unit_h003_0029=CreateUnit(p, 'h003', - 6080.0, - 3840.0, 270.000)
    set gg_unit_h003_0030=CreateUnit(p, 'h003', - 3264.0, - 6336.0, 270.000)
    set gg_unit_h003_0031=CreateUnit(p, 'h003', - 3264.0, - 7040.0, 270.000)
    set gg_unit_h00A_0032=CreateUnit(p, 'h00A', - 3328.0, - 2304.0, 270.000)
    set gg_unit_h00B_0033=CreateUnit(p, 'h00B', - 2048.0, - 1088.0, 270.000)
    set gg_unit_h00A_0034=CreateUnit(p, 'h00A', - 192.0, - 7104.0, 270.000)
    set gg_unit_h00B_0035=CreateUnit(p, 'h00B', 3136.0, - 7040.0, 270.000)
    set gg_unit_h00A_0036=CreateUnit(p, 'h00A', - 6784.0, - 704.0, 270.000)
    set gg_unit_h00B_0037=CreateUnit(p, 'h00B', - 6848.0, 2432.0, 270.000)
    set gg_unit_h00I_0060=CreateUnit(p, 'h00I', - 4480.0, - 4800.0, 270.000)
    set gg_unit_h00I_0061=CreateUnit(p, 'h00I', - 6464.0, - 4352.0, 270.000)
    set gg_unit_h00I_0062=CreateUnit(p, 'h00I', - 3904.0, - 6720.0, 270.000)
endfunction
//===========================================================================
function CreateBuildingsForPlayer11 takes nothing returns nothing
    local player p= Player(11)
    local unit u
    local integer unitID
    local trigger t
    local real life
    set gg_unit_h000_0009=CreateUnit(p, 'h000', 5056.0, 5504.0, 235.723)
    set u=CreateUnit(p, 'n001', 6912.0, 6848.0, 270.000)
    set gg_unit_h00F_0039=CreateUnit(p, 'h00F', 4608.0, 5312.0, 270.000)
    set gg_unit_h00F_0040=CreateUnit(p, 'h00F', 5056.0, 5056.0, 270.000)
    set gg_unit_h00E_0041=CreateUnit(p, 'h00E', 3520.0, 4160.0, 270.000)
    set gg_unit_h00E_0042=CreateUnit(p, 'h00E', 4224.0, 3392.0, 270.000)
    set gg_unit_h00E_0043=CreateUnit(p, 'h00E', 5568.0, 3264.0, 270.000)
    set gg_unit_h00E_0044=CreateUnit(p, 'h00E', 6400.0, 3264.0, 270.000)
    set gg_unit_h00E_0045=CreateUnit(p, 'h00E', 3328.0, 6592.0, 270.000)
    set gg_unit_h00E_0046=CreateUnit(p, 'h00E', 3328.0, 5760.0, 270.000)
    set gg_unit_h00G_0047=CreateUnit(p, 'h00G', 3008.0, 1984.0, 270.000)
    set gg_unit_h00D_0048=CreateUnit(p, 'h00D', 1472.0, 640.0, 270.000)
    set gg_unit_h00G_0049=CreateUnit(p, 'h00G', 6464.0, 448.0, 270.000)
    set gg_unit_h00D_0050=CreateUnit(p, 'h00D', 6464.0, - 2688.0, 270.000)
    set gg_unit_h00G_0051=CreateUnit(p, 'h00G', 512.0, 6656.0, 270.000)
    set gg_unit_h00D_0052=CreateUnit(p, 'h00D', - 2624.0, 6656.0, 270.000)
    set gg_unit_h00J_0063=CreateUnit(p, 'h00J', 3840.0, 6144.0, 270.000)
    set gg_unit_h00J_0064=CreateUnit(p, 'h00J', 4160.0, 4288.0, 270.000)
    set gg_unit_h00J_0065=CreateUnit(p, 'h00J', 5952.0, 3776.0, 270.000)
endfunction
//===========================================================================
function CreateNeutralPassiveBuildings takes nothing returns nothing
    local player p= Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life
    set u=CreateUnit(p, 'h00C', 6272.0, - 6848.0, 270.000)
    set u=CreateUnit(p, 'h00C', - 6208.0, 6016.0, 270.000)
    set u=CreateUnit(p, 'h00H', - 2048.0, - 2816.0, 270.000)
    set u=CreateUnit(p, 'h00H', - 832.0, - 6016.0, 270.000)
    set u=CreateUnit(p, 'h00H', - 5632.0, - 1664.0, 270.000)
    set u=CreateUnit(p, 'h00H', 1408.0, 5440.0, 270.000)
    set u=CreateUnit(p, 'h00H', 1536.0, 2368.0, 270.000)
    set u=CreateUnit(p, 'h00H', 5440.0, 896.0, 270.000)
    set u=CreateUnit(p, 'h00K', 128.0, - 3328.0, 270.000)
    set u=CreateUnit(p, 'h00K', 64.0, 2816.0, 270.000)
endfunction
//===========================================================================
function CreatePlayerBuildings takes nothing returns nothing
    call CreateBuildingsForPlayer10()
    call CreateBuildingsForPlayer11()
endfunction
//===========================================================================
function CreatePlayerUnits takes nothing returns nothing
endfunction
//===========================================================================
function CreateAllUnits takes nothing returns nothing
    call CreateNeutralPassiveBuildings()
    call CreatePlayerBuildings()
    call CreatePlayerUnits()
endfunction
//***************************************************************************
//*
//*  Regions
//*
//***************************************************************************
function CreateRegions takes nothing returns nothing
    local weathereffect we
    set gg_rct_CreepBirth_00=Rect(- 1952.0, - 5056.0, - 1472.0, - 4544.0)
    set gg_rct_CreepBirth_01=Rect(- 192.0, - 3776.0, 224.0, - 3392.0)
    set gg_rct_CreepBirth_02=Rect(672.0, - 4864.0, 992.0, - 4544.0)
    set gg_rct_CreepBirth_03=Rect(2784.0, - 4736.0, 3104.0, - 4416.0)
    set gg_rct_CreepBirth_04=Rect(384.0, - 1920.0, 768.0, - 1600.0)
    set gg_rct_CreepBirth_05=Rect(- 768.0, 1472.0, - 448.0, 1792.0)
    set gg_rct_CreepBirth_06=Rect(- 128.0, 2848.0, 192.0, 3168.0)
    set gg_rct_CreepBirth_07=Rect(1600.0, 3808.0, 1920.0, 4128.0)
    set gg_rct_CreepBirth_08=Rect(- 224.0, 4256.0, 96.0, 4576.0)
    set gg_rct_CreepBirth_09=Rect(- 2816.0, 3872.0, - 2432.0, 4192.0)
    set gg_rct_CreepCamp_00=Rect(- 2016.0, - 5344.0, - 512.0, - 4224.0)
    set gg_rct_CreepCamp_01=Rect(- 608.0, - 4352.0, 576.0, - 3424.0)
    set gg_rct_CreepCamp_02=Rect(544.0, - 5344.0, 1760.0, - 4480.0)
    set gg_rct_CreepCamp_03=Rect(2080.0, - 5024.0, 3296.0, - 4064.0)
    set gg_rct_CreepCamp_04=Rect(- 448.0, - 2432.0, 1024.0, - 1312.0)
    set gg_rct_CreepCamp_05=Rect(- 832.0, 1184.0, 192.0, 2144.0)
    set gg_rct_CreepCamp_06=Rect(- 448.0, 2880.0, 544.0, 3776.0)
    set gg_rct_CreepCamp_07=Rect(960.0, 3520.0, 1984.0, 4384.0)
    set gg_rct_CreepCamp_08=Rect(- 448.0, 3904.0, 512.0, 4896.0)
    set gg_rct_CreepCamp_09=Rect(- 3520.0, 3520.0, - 2368.0, 4352.0)
    set gg_rct_CreepAncBirth_01=Rect(4256.0, 992.0, 4704.0, 1376.0)
    set gg_rct_CreepAncBirth_00=Rect(- 5312.0, - 832.0, - 4864.0, - 352.0)
    set gg_rct_CreepAncCamp_00=Rect(- 5440.0, - 1344.0, - 4192.0, - 64.0)
    set gg_rct_CreepAncCamp_01=Rect(3584.0, 480.0, 4832.0, 1472.0)
    set gg_rct_CreepSnowBirth=Rect(- 3168.0, 928.0, - 2720.0, 1344.0)
    set gg_rct_CreepBossBirth=Rect(3616.0, - 2528.0, 4256.0, - 1984.0)
    set gg_rct_attPoint_00=Rect(- 5056.0, - 5632.0, - 4576.0, - 5184.0)
    set gg_rct_attPoint_01=Rect(- 6016.0, - 5920.0, - 5472.0, - 5408.0)
    set gg_rct_attPoint_02=Rect(- 5088.0, - 6528.0, - 4704.0, - 6144.0)
    set gg_rct_attPoint_03=Rect(4480.0, 4736.0, 4960.0, 5216.0)
    set gg_rct_attPoint_04=Rect(4256.0, 5472.0, 4800.0, 5984.0)
    set gg_rct_attPoint_05=Rect(5280.0, 4736.0, 5824.0, 5248.0)
    set gg_rct_attPoint_06=Rect(- 6720.0, - 4192.0, - 6176.0, - 3680.0)
    set gg_rct_attPoint_07=Rect(- 6624.0, 3680.0, - 6080.0, 4192.0)
    set gg_rct_attPoint_08=Rect(- 4096.0, 5920.0, - 3552.0, 6432.0)
    set gg_rct_attPoint_09=Rect(3168.0, 5888.0, 3712.0, 6400.0)
    set gg_rct_attPoint_10=Rect(- 3552.0, - 3264.0, - 3008.0, - 2752.0)
    set gg_rct_attPoint_11=Rect(- 224.0, - 224.0, 320.0, 288.0)
    set gg_rct_attPoint_12=Rect(2592.0, 2592.0, 3136.0, 3104.0)
    set gg_rct_attPoint_13=Rect(- 3680.0, - 6944.0, - 3136.0, - 6432.0)
    set gg_rct_attPoint_14=Rect(4000.0, - 6784.0, 4544.0, - 6272.0)
    set gg_rct_attPoint_15=Rect(5856.0, - 5472.0, 6400.0, - 4960.0)
    set gg_rct_attPoint_16=Rect(5728.0, 3008.0, 6272.0, 3520.0)
    set gg_rct_SeaArea_00=Rect(- 2048.0, - 6080.0, - 1600.0, - 5408.0)
    set gg_rct_SeaArea_01=Rect(- 1664.0, - 5856.0, - 832.0, - 5472.0)
    set gg_rct_SeaArea_02=Rect(- 864.0, - 5952.0, - 384.0, - 5280.0)
    set gg_rct_SeaArea_03=Rect(- 448.0, - 5952.0, 448.0, - 3776.0)
    set gg_rct_SeaArea_04=Rect(- 640.0, - 5344.0, - 384.0, - 5088.0)
    set gg_rct_SeaArea_05=Rect(384.0, - 5952.0, 672.0, - 5248.0)
    set gg_rct_SeaArea_06=Rect(- 928.0, - 4320.0, 320.0, - 3648.0)
    set gg_rct_SeaArea_07=Rect(- 608.0, - 4672.0, - 416.0, - 4256.0)
    set gg_rct_SeaArea_08=Rect(- 448.0, - 3712.0, 320.0, - 3520.0)
    set gg_rct_SeaArea_09=Rect(- 224.0, - 3552.0, 224.0, - 3424.0)
    set gg_rct_SeaArea_10=Rect(384.0, - 4416.0, 1728.0, - 4032.0)
    set gg_rct_SeaArea_11=Rect(1696.0, - 5440.0, 2304.0, - 3648.0)
    set gg_rct_SeaArea_12=Rect(2272.0, - 4896.0, 2720.0, - 3680.0)
    set gg_rct_SeaArea_13=Rect(2240.0, - 5248.0, 2496.0, - 4864.0)
    set gg_rct_SeaArea_14=Rect(2624.0, - 4864.0, 3136.0, - 4128.0)
    set gg_rct_SeaArea_15=Rect(832.0, - 4064.0, 1600.0, - 2464.0)
    set gg_rct_SeaArea_16=Rect(1472.0, - 4544.0, 1760.0, - 3680.0)
    set gg_rct_SeaArea_17=Rect(448.0, - 3008.0, 1856.0, - 2464.0)
    set gg_rct_SeaArea_18=Rect(832.0, - 3520.0, 992.0, - 2944.0)
    set gg_rct_SeaArea_19=Rect(640.0, - 3168.0, 1728.0, - 2944.0)
    set gg_rct_SeaArea_20=Rect(- 448.0, - 2720.0, 1120.0, - 1792.0)
    set gg_rct_SeaArea_21=Rect(- 96.0, - 1824.0, 352.0, - 1248.0)
    set gg_rct_SeaArea_22=Rect(224.0, - 1856.0, 576.0, - 1440.0)
    set gg_rct_SeaArea_23=Rect(480.0, - 1856.0, 928.0, - 1600.0)
    set gg_rct_SeaArea_24=Rect(- 480.0, - 1856.0, - 32.0, - 1600.0)
    set gg_rct_SeaArea_25=Rect(- 288.0, - 1696.0, 0.0, - 1440.0)
    set gg_rct_SeaArea_26=Rect(- 1120.0, - 2912.0, - 64.0, - 2016.0)
    set gg_rct_SeaArea_27=Rect(- 2144.0, - 4128.0, - 832.0, - 2880.0)
    set gg_rct_SeaArea_28=Rect(- 1024.0, - 3072.0, - 288.0, - 2816.0)
    set gg_rct_SeaArea_29=Rect(- 896.0, - 3232.0, - 512.0, - 3008.0)
    set gg_rct_SeaArea_30=Rect(- 1216.0, - 2944.0, - 1056.0, - 2112.0)
    set gg_rct_SeaArea_31=Rect(- 1728.0, - 2944.0, - 1120.0, - 2496.0)
    set gg_rct_SeaArea_32=Rect(- 1408.0, - 2560.0, - 1152.0, - 2304.0)
    set gg_rct_SeaArea_33=Rect(- 2336.0, - 4288.0, - 1888.0, - 4000.0)
    set gg_rct_SeaArea_34=Rect(- 2272.0, - 4128.0, - 2080.0, - 3168.0)
    set gg_rct_SeaArea_35=Rect(- 2400.0, - 3744.0, - 2208.0, - 3264.0)
    set gg_rct_SeaArea_36=Rect(- 832.0, 1280.0, 256.0, 2208.0)
    set gg_rct_SeaArea_37=Rect(- 640.0, 1184.0, 224.0, 1344.0)
    set gg_rct_SeaArea_38=Rect(- 352.0, 960.0, 96.0, 1216.0)
    set gg_rct_SeaArea_39=Rect(320.0, 1728.0, 960.0, 2368.0)
    set gg_rct_SeaArea_40=Rect(128.0, 1696.0, 672.0, 2208.0)
    set gg_rct_SeaArea_41=Rect(128.0, 1408.0, 352.0, 1760.0)
    set gg_rct_SeaArea_42=Rect(256.0, 1536.0, 544.0, 1760.0)
    set gg_rct_SeaArea_43=Rect(992.0, 2240.0, 1440.0, 3520.0)
    set gg_rct_SeaArea_44=Rect(736.0, 1888.0, 1088.0, 2720.0)
    set gg_rct_SeaArea_45=Rect(480.0, 2272.0, 800.0, 2464.0)
    set gg_rct_SeaArea_46=Rect(576.0, 2432.0, 800.0, 2624.0)
    set gg_rct_SeaArea_47=Rect(992.0, 2048.0, 1280.0, 2304.0)
    set gg_rct_SeaArea_48=Rect(1216.0, 2784.0, 1568.0, 3552.0)
    set gg_rct_SeaArea_49=Rect(1472.0, 3296.0, 1984.0, 3520.0)
    set gg_rct_SeaArea_50=Rect(1952.0, 3392.0, 2336.0, 3584.0)
    set gg_rct_SeaArea_51=Rect(1504.0, 3168.0, 1728.0, 3328.0)
    set gg_rct_SeaArea_52=Rect(704.0, 3136.0, 1088.0, 4320.0)
    set gg_rct_SeaArea_53=Rect(1600.0, 4416.0, 1984.0, 5568.0)
    set gg_rct_SeaArea_54=Rect(1312.0, 4416.0, 1760.0, 5184.0)
    set gg_rct_SeaArea_55=Rect(448.0, 4256.0, 1344.0, 4928.0)
    set gg_rct_SeaArea_56=Rect(448.0, 3232.0, 768.0, 4320.0)
    set gg_rct_SeaArea_57=Rect(- 480.0, 3136.0, 448.0, 3872.0)
    set gg_rct_SeaArea_58=Rect(- 288.0, 3008.0, 320.0, 3200.0)
    set gg_rct_SeaArea_59=Rect(- 256.0, 2848.0, 256.0, 3040.0)
    set gg_rct_SeaArea_61=Rect(- 928.0, 3264.0, - 448.0, 4768.0)
    set gg_rct_SeaArea_62=Rect(- 1440.0, 2432.0, - 992.0, 3520.0)
    set gg_rct_SeaArea_63=Rect(- 1248.0, 3296.0, - 864.0, 3744.0)
    set gg_rct_SeaArea_64=Rect(- 1792.0, 2720.0, - 1344.0, 3040.0)
    set gg_rct_SeaArea_65=Rect(- 1600.0, 2592.0, - 1344.0, 3424.0)
    set gg_rct_SeaArea_66=Rect(- 1184.0, 2016.0, - 736.0, 2720.0)
    set gg_rct_SeaArea_67=Rect(- 800.0, 2112.0, - 256.0, 2400.0)
    set gg_rct_SeaArea_68=Rect(- 800.0, 2336.0, - 576.0, 2592.0)
    set gg_rct_SeaArea_69=Rect(- 2560.0, 4960.0, - 1408.0, 5312.0)
    set gg_rct_SeaArea_70=Rect(- 1920.0, 4416.0, - 1312.0, 5184.0)
    set gg_rct_SeaArea_71=Rect(- 1792.0, 4320.0, - 1056.0, 4992.0)
    set gg_rct_SeaArea_72=Rect(- 1216.0, 4064.0, - 832.0, 4832.0)
    set gg_rct_SeaArea_73=Rect(- 2176.0, 4800.0, - 1856.0, 5024.0)
    set gg_rct_SeaArea_60=Rect(224.0, 3808.0, 512.0, 4032.0)
    set gg_rct_SeaArea_74=Rect(1024.0, - 2560.0, 1408.0, - 2208.0)
    set gg_rct_HeroSelection=Rect(- 7328.0, 6368.0, - 6624.0, 7072.0)
    set gg_rct_NavyHeroBirth=Rect(- 6880.0, - 7360.0, - 6432.0, - 6976.0)
    set gg_rct_PirateHeroBirth=Rect(6144.0, 6144.0, 6656.0, 6592.0)
    set gg_rct_CreepMagmaBirth=Rect(3488.0, - 1216.0, 3936.0, - 800.0)
endfunction
//***************************************************************************
//*
//*  Custom Script Code
//*
//***************************************************************************
//TESH.scrollpos=0
//TESH.alwaysfold=0
//***************************************************************************
//*
//*  Triggers
//*
//***************************************************************************
//===========================================================================
// Trigger: FuncForDebug
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
// Trigger: FuncForGame
//===========================================================================
//TESH.scrollpos=312
//TESH.alwaysfold=0
// Trigger: DataSetAndGet
//===========================================================================
//TESH.scrollpos=27
//TESH.alwaysfold=0

//===========================================================================
// Trigger: FuncForRegister
//===========================================================================
//TESH.scrollpos=13
//TESH.alwaysfold=0
// Trigger: japiConstant
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0

        
    //键盘键位 
    //以下键位 按下 运行 TextureAddEvent 的第3个参数
    //弹起 运行 第4个参数
    
    //大键盘数字键
    
    //小键盘 数字键
    
    
    
    
    
    
    //魔兽版本 用GetGameVersion 来获取当前版本 来对比以下具体版本做出相应操作
    
    
    
    //-----------模拟聊天------------------
    
    //---------技能数据类型---------------
    
    ///<summary>冷却时间</summary>
    ///<summary>目标允许</summary>
    ///<summary>施放时间</summary>
    ///<summary>持续时间</summary>
    ///<summary>持续时间</summary>
    ///<summary>魔法消耗</summary>
    ///<summary>施放间隔</summary>
    ///<summary>影响区域</summary>
    ///<summary>施法距离</summary>
    ///<summary>数据A</summary>
    ///<summary>数据B</summary>
    ///<summary>数据C</summary>
    ///<summary>数据D</summary>
    ///<summary>数据E</summary>
    ///<summary>数据F</summary>
    ///<summary>数据G</summary>
    ///<summary>数据H</summary>
    ///<summary>数据I</summary>
    ///<summary>单位类型</summary>
    ///<summary>热键</summary>
    ///<summary>关闭热键</summary>
    ///<summary>学习热键</summary>
    ///<summary>名字</summary>
    ///<summary>图标</summary>
    ///<summary>目标效果</summary>
    ///<summary>施法者效果</summary>
    ///<summary>目标点效果</summary>
    ///<summary>区域效果</summary>
    ///<summary>投射物</summary>
    ///<summary>特殊效果</summary>
    ///<summary>闪电效果</summary>
    ///<summary>buff提示</summary>
    ///<summary>buff提示</summary>
    ///<summary>学习提示</summary>
    ///<summary>提示</summary>
    ///<summary>关闭提示</summary>
    ///<summary>学习提示</summary>
    ///<summary>提示</summary>
    ///<summary>关闭提示</summary>
    
    //----------物品数据类型----------------------
    ///<summary>物品图标</summary>
    ///<summary>物品提示</summary>
    ///<summary>物品扩展提示</summary>
    ///<summary>物品名字</summary>
    ///<summary>物品说明</summary>
    //------------单位数据类型--------------
    ///<summary>攻击1 伤害骰子数量</summary>
    ///<summary>攻击1 伤害骰子面数</summary>
    ///<summary>攻击1 基础伤害</summary>
    ///<summary>攻击1 升级奖励</summary>
    ///<summary>攻击1 最小伤害</summary>
    ///<summary>攻击1 最大伤害</summary>
    ///<summary>攻击1 全伤害范围</summary>
    ///<summary>装甲</summary>
    // attack 1 attribute adds
    ///<summary>攻击1 伤害衰减参数</summary>
    ///<summary>攻击1 武器声音</summary>
    ///<summary>攻击1 攻击类型</summary>
    ///<summary>攻击1 最大目标数</summary>
    ///<summary>攻击1 攻击间隔</summary>
    ///<summary>攻击1 攻击延迟/summary>
    ///<summary>攻击1 弹射弧度</summary>
    ///<summary>攻击1 攻击范围缓冲</summary>
    ///<summary>攻击1 目标允许</summary>
    ///<summary>攻击1 溅出区域</summary>
    ///<summary>攻击1 溅出半径</summary>
    ///<summary>攻击1 武器类型</summary>
    // attack 2 attributes (sorted in a sequencial order based on memory address)
    ///<summary>攻击2 伤害骰子数量</summary>
    ///<summary>攻击2 伤害骰子面数</summary>
    ///<summary>攻击2 基础伤害</summary>
    ///<summary>攻击2 升级奖励</summary>
    ///<summary>攻击2 伤害衰减参数</summary>
    ///<summary>攻击2 武器声音</summary>
    ///<summary>攻击2 攻击类型</summary>
    ///<summary>攻击2 最大目标数</summary>
    ///<summary>攻击2 攻击间隔</summary>
    ///<summary>攻击2 攻击延迟</summary>
    ///<summary>攻击2 攻击范围</summary>
    ///<summary>攻击2 攻击缓冲</summary>
    ///<summary>攻击2 最小伤害</summary>
    ///<summary>攻击2 最大伤害</summary>
    ///<summary>攻击2 弹射弧度</summary>
    ///<summary>攻击2 目标允许类型</summary>
    ///<summary>攻击2 溅出区域</summary>
    ///<summary>攻击2 溅出半径</summary>
    ///<summary>攻击2 武器类型</summary>
    ///<summary>装甲类型</summary>
    
    
//===========================================================================
// Trigger: newJapiLibrary
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0


//===========================================================================
// Trigger: d3dLibrary
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
// Trigger: 异步japi库
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0

//这个库里面的japi 是在本地玩家 异步的情况下运行的动作 ,不可在非异步的环境下运行
//数据需要同步之后再使用
//运行完之后 会自动同步 在触发响应之后做动作
// 本地消息的FLAG
// 这4个消息标志可以相加组合
//使用方法 本地坐标命令(命令id,坐标x轴,坐标y轴,FLAG_INSTANT + FLAG_ONLY) flag标签为   瞬发+独立
//===========================================================================
// Trigger: initData
//===========================================================================
//TESH.scrollpos=50
//TESH.alwaysfold=0

function Trig_initDataActions takes nothing returns nothing
    
    local integer i= 0
    
 
    //开启全图视野
    call FogEnable(false)
    call FogMaskEnable(false)
    

       
    set i=0
    loop
         //初始化人物等级
        set unitLevel[i]=1
        
        //初始化买活，置为false
        set buyBack[i]=false
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    
    //统计玩家在线人数
    set i=0
    loop
        if ( ( GetPlayerController(Player(i)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(Player(i)) == PLAYER_SLOT_STATE_PLAYING ) ) then
            set PLAYING_PLAYER=PLAYING_PLAYER + 1
            if ( i < 5 ) then
                set PLAYING_NAVY_PLAYER=PLAYING_NAVY_PLAYER + 1
            else
                set PLAYING_PIRATE_PLAYER=PLAYING_PIRATE_PLAYER + 1
            endif
            set isPlayer[i]=true
        endif
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    //多面板 海军VS海贼 中立行
    set panelVSRow=PLAYING_NAVY_PLAYER + 1
   
    //初始化被反补时，小兵的话语
    set denyWord[0]="!"
    set denyWord[1]="Why?!"
    set denyWord[2]="我恨啊！！"
    
    //初始化击杀助攻系统，玩家使用的hashtable
    set i=0
    loop
        set playerkill_ht[i]=InitHashtable()
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    set playerKillingWord[0]="|cFFFF0303单杀|r"
    set playerKillingWord[1]="|cFFE55BB0击杀|r"
    
    //关闭选人界面下，选择英雄时，点击按钮的作用，在选择模式才开启
    call DisableTrigger(gg_trg_ClickConfirm)
    call DisableTrigger(gg_trg_ClickConfirmByTurn)
    
endfunction
//===========================================================================
function InitTrig_initData takes nothing returns nothing
    set gg_trg_initData=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_initData, function Trig_initDataActions)
endfunction
//===========================================================================
// Trigger: AllianceSet
//===========================================================================
//TESH.scrollpos=9
//TESH.alwaysfold=0

function Trig_AllianceSetActions takes nothing returns nothing
    
    local integer i= 0
    local integer j= 0
    //海军联盟
    loop
        //友盟
        set j=0
        loop
            if ( i != j ) then
                call setAlliedAlliance(Player(i) , Player(j))
            endif
            set j=j + 1
            exitwhen j > 5 - 1
        endloop
        call setAlliedAlliance(Player(i) , Player(NAVY_PLAYER))
        call setAlliedAlliance(Player(NAVY_PLAYER) , Player(i))
        //敌人
        set j=5
        loop
            call setHostileAlliance(Player(i) , Player(j))
            set j=j + 1
            exitwhen j > 10 - 1
        endloop
        call setHostileAlliance(Player(i) , Player(PIRATE_PLAYER))
        call setHostileAlliance(Player(PIRATE_PLAYER) , Player(i))
        set i=i + 1
        exitwhen i > 5 - 1
    endloop
    call setHostileAlliance(Player(NAVY_PLAYER) , Player(PIRATE_PLAYER))
    call setHostileAlliance(Player(PIRATE_PLAYER) , Player(NAVY_PLAYER))
    //海贼联盟
    set i=5
    loop
        //敌人
        set j=0
        loop
            call setHostileAlliance(Player(i) , Player(j))
            set j=j + 1
            exitwhen j > 4
        endloop
        call setHostileAlliance(Player(i) , Player(NAVY_PLAYER))
        call setHostileAlliance(Player(NAVY_PLAYER) , Player(i))
        //友盟
        set j=5
        loop
            if ( i != j ) then
                call setAlliedAlliance(Player(i) , Player(j))
            endif
            set j=j + 1
            exitwhen j > 9
        endloop
        call setAlliedAlliance(Player(i) , Player(PIRATE_PLAYER))
        call setAlliedAlliance(Player(PIRATE_PLAYER) , Player(i))
        set i=i + 1
        exitwhen i > 9
    endloop
    
    //设置颜色
    call SetPlayerColor(Player(0), PLAYER_COLOR_AQUA)
    call SetPlayerColor(Player(1), PLAYER_COLOR_BROWN)
    call SetPlayerColor(Player(2), PLAYER_COLOR_CYAN)
    call SetPlayerColor(Player(3), PLAYER_COLOR_GREEN)
    call SetPlayerColor(Player(4), PLAYER_COLOR_LIGHT_BLUE)
    call SetPlayerColor(Player(5), PLAYER_COLOR_LIGHT_GRAY)
    call SetPlayerColor(Player(6), PLAYER_COLOR_ORANGE)
    call SetPlayerColor(Player(7), PLAYER_COLOR_PINK)
    call SetPlayerColor(Player(8), PLAYER_COLOR_PURPLE)
    call SetPlayerColor(Player(9), PLAYER_COLOR_YELLOW)
    call SetPlayerColor(Player(10), PLAYER_COLOR_RED)
    call SetPlayerColor(Player(11), PLAYER_COLOR_BLUE)
    
    set playerColors[0]="|cFF106246"
    set playerColors[1]="|cFF4E2A04"
    set playerColors[2]="|cFF1CE6B9"
    set playerColors[3]="|cFF20C000"
    set playerColors[4]="|cFF7EBFF1"
    set playerColors[5]="|cFF959697"
    set playerColors[6]="|cFFFE8A0E"
    set playerColors[7]="|cFFE55BB0"
    set playerColors[8]="|cFF540081"
    set playerColors[9]="|cFFFFFC01"
    set playerColors[10]="|cFFFF0303"
    set playerColors[11]="|cFF0042FF"
    
    //关闭所有玩家的击杀奖励，金钱获取全是用模拟给予
    set i=0
    loop
        call SetPlayerState(Player(i), PLAYER_STATE_GIVES_BOUNTY, 0)
        set i=i + 1
        exitwhen i > 14 - 1
    endloop
    set i=0
    loop
        set FORCE_PLAYER[i]=CreateForce()
        call ForceAddPlayer(FORCE_PLAYER[i], Player(i))
        if ( GetPlayerSlotState(Player(i)) == PLAYER_SLOT_STATE_PLAYING ) then
            call ForceAddPlayer(FORCE_ALL_PLAYERS, Player(i))
        endif
        set i=i + 1
        exitwhen i > 12 - 1
    endloop
    
endfunction
//===========================================================================
function InitTrig_AllianceSet takes nothing returns nothing
    set gg_trg_AllianceSet=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_AllianceSet, function Trig_AllianceSetActions)
endfunction
//===========================================================================
// Trigger: ForbidAbility
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0

function Trig_ForbidAbilityActions takes nothing returns nothing
    local integer i= 0
    //禁用魔法书
    set i=0
    loop
        call SetPlayerAbilityAvailable(Player(i), 'A00A', false)
        call SetPlayerAbilityAvailable(Player(i), 'A006', false)
        call SetPlayerAbilityAvailable(Player(i), 'A007', false)
        call SetPlayerAbilityAvailable(Player(i), 'A004', false)
        exitwhen i > 13
        set i=i + 1
    endloop
    
endfunction
//===========================================================================
function InitTrig_ForbidAbility takes nothing returns nothing
    set gg_trg_ForbidAbility=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_ForbidAbility, function Trig_ForbidAbilityActions)
endfunction
//===========================================================================
// Trigger: GameInitData
//===========================================================================
//TESH.scrollpos=9
//TESH.alwaysfold=0
function GID_timerDo takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= 0
    
    //开始初始化数据
    //野区
    call TriggerExecute(gg_trg_InitCreep)
    //进攻防御
    call TriggerExecute(gg_trg_InitAttackAndDef)
    //海区域
    call TriggerExecute(gg_trg_InitSeaData)
    //选人系统
    call TriggerExecute(gg_trg_InitChooseInterface)
    //英雄技能
    call TriggerExecute(gg_trg_InitAbilTrg)
    
    call remindAllPlayers(3 , "|cffff0000Game System had Initialized....\nGame is Coming!!!|r")
    
    //开启选择模式
    call remindAllPlayers(3 , "请等待玩家选择游戏模式")
    call TriggerExecute(gg_trg_DialogBox)
    
    //设置玩家的初始金钱
    set i=0
    loop
        call increasePlayerCurrentLumber(Player(i) , INIT_MONEY)
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    
    call DestroyTimer(t)
    set t=null
endfunction
function Trig_GameInitDataActions takes nothing returns nothing
    local integer i= 0
    local timer t= CreateTimer()
    
    set i=0
    loop
        call DisplayTimedTextToPlayer(Player(i), 0, 0, 3, "|cffff0000Game System is Initializing....|r\n将产生正常卡顿，请耐心等待...")
        set i=i + 1
        exitwhen i > 12
    endloop
    
    call TimerStart(t, 0.1, false, function GID_timerDo)
    
    set t=null
endfunction
//===========================================================================
function InitTrig_GameInitData takes nothing returns nothing
    set gg_trg_GameInitData=CreateTrigger()
    call DoNothing()
    call TriggerRegisterTimerEventSingle(gg_trg_GameInitData, 1.00)
    call TriggerAddAction(gg_trg_GameInitData, function Trig_GameInitDataActions)
endfunction
//===========================================================================
// Trigger: Constant
//===========================================================================
//TESH.scrollpos=21
//TESH.alwaysfold=0
// Trigger: UnitLevel
//===========================================================================
//TESH.scrollpos=11
//TESH.alwaysfold=0

function Trig_UnitLevelActions takes nothing returns nothing
    local player p= GetTriggerPlayer()
    local integer pId= GetPlayerId(p)
    local unit triggerUnit= GetTriggerUnit()
    local integer level= GetUnitLevel(triggerUnit)
    
    set unitLevel[pId]=level
    
    set p=null
    set triggerUnit=null
endfunction
//===========================================================================
function InitTrig_UnitLevel takes nothing returns nothing
    local integer i=0
    set gg_trg_UnitLevel=CreateTrigger()
    call DoNothing()
    loop
        call TriggerRegisterPlayerUnitEvent(gg_trg_UnitLevel, Player(i), EVENT_PLAYER_HERO_LEVEL, null)
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    call TriggerAddAction(gg_trg_UnitLevel, function Trig_UnitLevelActions)
endfunction
//===========================================================================
// Trigger: GameTime
//===========================================================================
//TESH.scrollpos=21
//TESH.alwaysfold=0

function GT_flushTime takes nothing returns nothing
    local integer i= 0
    local integer array iTemp
    
    set Sys_second=Sys_second + 1
    if ( Sys_second == 60 ) then
        set Sys_second=0
        set Sys_minute=Sys_minute + 1
        //设置分钟数
        set i=0
        loop
            if ( GetPlayerSlotState(Player(i)) == PLAYER_SLOT_STATE_PLAYING ) then
                call SetPlayerState(Player(i), PLAYER_STATE_RESOURCE_FOOD_USED, Sys_minute)
            endif
            set i=i + 1
            exitwhen i > 12 - 1
        endloop
    endif
    
    //设置秒钟数
    set i=0
    loop
        if ( GetPlayerSlotState(Player(i)) == PLAYER_SLOT_STATE_PLAYING ) then
            call SetPlayerState(Player(i), PLAYER_STATE_RESOURCE_FOOD_CAP, Sys_second)
        endif
        set i=i + 1
        exitwhen i > 12 - 1
    endloop
    
    //每秒刷新玩家的金钱和木头
    set i=0
    loop
        set iTemp[0]=GetPlayerState(Player(0), PLAYER_STATE_RESOURCE_GOLD)
        call SaveInteger(normalHeroPanel_ht, i, 11, iTemp[0])
        set iTemp[0]=GetPlayerState(Player(0), PLAYER_STATE_RESOURCE_LUMBER)
        call SaveInteger(normalHeroPanel_ht, i, 12, iTemp[0])
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    
endfunction
function Trig_GameTimeActions takes nothing returns nothing
    local timer t= CreateTimer()
    call TimerStart(t, 1, true, function GT_flushTime)
    set t=null
endfunction
//===========================================================================
function InitTrig_GameTime takes nothing returns nothing
    set gg_trg_GameTime=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_GameTime, function Trig_GameTimeActions)
endfunction
//===========================================================================
// Trigger: noteUnitMoney
//===========================================================================
//TESH.scrollpos=48
//TESH.alwaysfold=0

function Trig_noteUnitMoneyActions takes nothing returns nothing
    
    //近战、远战、炮车
    call SaveInteger(unitMenoy_ht, 'h004', 0, 30)
    call SaveInteger(unitMenoy_ht, 'h004', 1, 4)
    call SaveInteger(unitMenoy_ht, 'h006', 0, 42)
    call SaveInteger(unitMenoy_ht, 'h006', 1, 5)
    call SaveInteger(unitMenoy_ht, 'h008', 0, 60)
    call SaveInteger(unitMenoy_ht, 'h008', 1, 6)
    
    call SaveInteger(unitMenoy_ht, 'h005', 0, 30)
    call SaveInteger(unitMenoy_ht, 'h005', 1, 4)
    call SaveInteger(unitMenoy_ht, 'h007', 0, 42)
    call SaveInteger(unitMenoy_ht, 'h007', 1, 5)
    call SaveInteger(unitMenoy_ht, 'h009', 0, 60)
    call SaveInteger(unitMenoy_ht, 'h009', 1, 6)
    
    //建筑物，前中近门牙
    call SaveInteger(unitMenoy_ht, 'h00B', 0, 120)
    call SaveInteger(unitMenoy_ht, 'h00D', 0, 120)
    call SaveInteger(unitMenoy_ht, 'h00A', 0, 160)
    call SaveInteger(unitMenoy_ht, 'h00G', 0, 160)
    call SaveInteger(unitMenoy_ht, 'h003', 0, 200)
    call SaveInteger(unitMenoy_ht, 'h00E', 0, 200)
    call SaveInteger(unitMenoy_ht, 'h001', 0, 300)
    call SaveInteger(unitMenoy_ht, 'h00F', 0, 300)
    
    //兵营
    call SaveInteger(unitMenoy_ht, 'h00I', 0, 60)
    call SaveInteger(unitMenoy_ht, 'h00J', 0, 60)
    
    //水晶
    call SaveInteger(unitMenoy_ht, 'h00K', 0, 60)
    
    //远古野区
    call SaveInteger(unitMenoy_ht, 'n00E', 0, 45)
    call SaveInteger(unitMenoy_ht, 'n00E', 1, 8)
    call SaveInteger(unitMenoy_ht, 'n00F', 0, 110)
    call SaveInteger(unitMenoy_ht, 'n00F', 1, 20)
    call SaveInteger(unitMenoy_ht, 'n00D', 0, 110)
    call SaveInteger(unitMenoy_ht, 'n00D', 1, 20)
    
    //雪地
    call SaveInteger(unitMenoy_ht, 'n00H', 0, 40)
    call SaveInteger(unitMenoy_ht, 'n00H', 1, 10)
    call SaveInteger(unitMenoy_ht, 'n00I', 0, 100)
    call SaveInteger(unitMenoy_ht, 'n00I', 1, 20)
    //岩浆
    call SaveInteger(unitMenoy_ht, 'n00K', 0, 40)
    call SaveInteger(unitMenoy_ht, 'n00K', 1, 10)
    call SaveInteger(unitMenoy_ht, 'n00G', 0, 100)
    call SaveInteger(unitMenoy_ht, 'n00G', 1, 20)
    
    //海区域
    call SaveInteger(unitMenoy_ht, 'n008', 0, 30)
    call SaveInteger(unitMenoy_ht, 'n008', 1, 5)
    call SaveInteger(unitMenoy_ht, 'n006', 0, 80)
    call SaveInteger(unitMenoy_ht, 'n006', 1, 12)
    call SaveInteger(unitMenoy_ht, 'n009', 0, 20)
    call SaveInteger(unitMenoy_ht, 'n009', 1, 3)
    call SaveInteger(unitMenoy_ht, 'n003', 0, 50)
    call SaveInteger(unitMenoy_ht, 'n003', 1, 10)
    call SaveInteger(unitMenoy_ht, 'n00C', 0, 30)
    call SaveInteger(unitMenoy_ht, 'n00C', 1, 5)
    call SaveInteger(unitMenoy_ht, 'n004', 0, 70)
    call SaveInteger(unitMenoy_ht, 'n004', 1, 10)
    call SaveInteger(unitMenoy_ht, 'n00B', 0, 20)
    call SaveInteger(unitMenoy_ht, 'n00B', 1, 3)
    call SaveInteger(unitMenoy_ht, 'n005', 0, 50)
    call SaveInteger(unitMenoy_ht, 'n005', 1, 10)
    call SaveInteger(unitMenoy_ht, 'n00A', 0, 40)
    call SaveInteger(unitMenoy_ht, 'n00A', 1, 5)
    call SaveInteger(unitMenoy_ht, 'n002', 0, 80)
    call SaveInteger(unitMenoy_ht, 'n002', 1, 12)
    
    //建筑单位
    call SaveInteger(unitMenoy_ht, 'h00B', 0, 180)
    call SaveInteger(unitMenoy_ht, 'h00D', 0, 180)
    call SaveInteger(unitMenoy_ht, 'h00A', 0, 220)
    call SaveInteger(unitMenoy_ht, 'h00G', 0, 220)
    call SaveInteger(unitMenoy_ht, 'h003', 0, 260)
    call SaveInteger(unitMenoy_ht, 'h00E', 0, 260)
    call SaveInteger(unitMenoy_ht, 'h001', 0, 300)
    call SaveInteger(unitMenoy_ht, 'h00F', 0, 300)
    
    call SaveInteger(unitMenoy_ht, 'h00I', 0, 180)
    call SaveInteger(unitMenoy_ht, 'h00J', 0, 180)
    
    call SaveInteger(unitMenoy_ht, 'h00K', 0, 20)
endfunction
//===========================================================================
function InitTrig_noteUnitMoney takes nothing returns nothing
    set gg_trg_noteUnitMoney=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_noteUnitMoney, function Trig_noteUnitMoneyActions)
endfunction
//===========================================================================
// Trigger: Creeps
//===========================================================================
//TESH.scrollpos=12
//TESH.alwaysfold=0
//===========================================================================

//===========================================================================
function Trig_CreepsActions takes nothing returns nothing
    local integer i= 0

    set udg_CreepsBirthRect[0]=gg_rct_CreepBirth_00
    set udg_CreepsBirthRect[1]=gg_rct_CreepBirth_01
    set udg_CreepsBirthRect[2]=gg_rct_CreepBirth_02
    set udg_CreepsBirthRect[3]=gg_rct_CreepBirth_03
    set udg_CreepsBirthRect[4]=gg_rct_CreepBirth_04
    set udg_CreepsBirthRect[5]=gg_rct_CreepBirth_05
    set udg_CreepsBirthRect[6]=gg_rct_CreepBirth_06
    set udg_CreepsBirthRect[7]=gg_rct_CreepBirth_07
    set udg_CreepsBirthRect[8]=gg_rct_CreepBirth_08
    set udg_CreepsBirthRect[9]=gg_rct_CreepBirth_09
    
    set udg_CreepsBirthRect[10]=gg_rct_CreepAncBirth_00
    set udg_CreepsBirthRect[11]=gg_rct_CreepAncBirth_01
    
    set udg_CreepsBirthRect[12]=gg_rct_CreepSnowBirth
    set udg_CreepsBirthRect[13]=gg_rct_CreepBossBirth
    set udg_CreepsBirthRect[14]=gg_rct_CreepMagmaBirth
    

    loop
        set udg_CreepsBirthPointX[i]=GetRectCenterX(udg_CreepsBirthRect[i])
        set udg_CreepsBirthPointY[i]=GetRectCenterY(udg_CreepsBirthRect[i])
    
        set i=i + 1
        exitwhen i > 13
    endloop

    set udg_CreepsRefrushRect[0]=gg_rct_CreepCamp_00
    set udg_CreepsRefrushRect[1]=gg_rct_CreepCamp_01
    set udg_CreepsRefrushRect[2]=gg_rct_CreepCamp_02
    set udg_CreepsRefrushRect[3]=gg_rct_CreepCamp_03
    set udg_CreepsRefrushRect[4]=gg_rct_CreepCamp_04
    set udg_CreepsRefrushRect[5]=gg_rct_CreepCamp_05
    set udg_CreepsRefrushRect[6]=gg_rct_CreepCamp_06
    set udg_CreepsRefrushRect[7]=gg_rct_CreepCamp_07
    set udg_CreepsRefrushRect[8]=gg_rct_CreepCamp_08
    set udg_CreepsRefrushRect[9]=gg_rct_CreepCamp_09
    
    set udg_CreepsRefrushRect[10]=gg_rct_CreepAncCamp_00
    set udg_CreepsRefrushRect[11]=gg_rct_CreepAncCamp_01

    //海区10种普通野怪
    set udg_CreepsTypeBoss[0]='n006'
    set udg_CreepsTypeMinion[0]='n008'
    set udg_CreepsTypeBoss[1]='n003'
    set udg_CreepsTypeMinion[1]='n009'
    set udg_CreepsTypeBoss[2]='n004'
    set udg_CreepsTypeMinion[2]='n00C'
    set udg_CreepsTypeBoss[3]='n002'
    set udg_CreepsTypeMinion[3]='n00A'
    set udg_CreepsTypeBoss[4]='n005'
    set udg_CreepsTypeMinion[4]='n00B'
    set udg_CreepsTypeBoss[5]='n005'
    set udg_CreepsTypeMinion[5]='n00B'
    set udg_CreepsTypeBoss[6]='n003'
    set udg_CreepsTypeMinion[6]='n009'
    set udg_CreepsTypeBoss[7]='n007'
    set udg_CreepsTypeMinion[7]='u000'
    set udg_CreepsTypeBoss[8]='n004'
    set udg_CreepsTypeMinion[8]='n00C'
    set udg_CreepsTypeBoss[9]='n006'
    set udg_CreepsTypeMinion[9]='n008'
    //远古野怪
    set udg_CreepsTypeBoss[10]='n00F'
    set udg_CreepsTypeMinion[10]='n00E'
    set udg_CreepsTypeBoss[11]='n00D'
    set udg_CreepsTypeMinion[11]='n00E'
    //雪地野怪
    set udg_CreepsTypeBoss[12]='n00I'
    set udg_CreepsTypeMinion[12]='n00H'
    
    //Roshan
    set udg_CreepsTypeBoss[13]='n00J'
    
    //岩浆野怪
    set udg_CreepsTypeBoss[14]='n00G'
    set udg_CreepsTypeMinion[14]='n00K'
    

    //海区10种野怪
    set udg_CreepsMinionCount[0]=2
    set udg_CreepsMinionCount[1]=3
    set udg_CreepsMinionCount[2]=2
    set udg_CreepsMinionCount[3]=2
    set udg_CreepsMinionCount[4]=3
    set udg_CreepsMinionCount[5]=3
    set udg_CreepsMinionCount[6]=3
    set udg_CreepsMinionCount[7]=2
    set udg_CreepsMinionCount[8]=2
    set udg_CreepsMinionCount[9]=2
    //远古野怪
    set udg_CreepsMinionCount[10]=2
    set udg_CreepsMinionCount[11]=2
    //雪地野怪
    set udg_CreepsMinionCount[12]=2
    //岩浆野怪
    set udg_CreepsMinionCount[14]=2
    
    
    
endfunction
//===========================================================================
function InitTrig_Creeps takes nothing returns nothing
    set gg_trg_Creeps=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_Creeps, function Trig_CreepsActions)
endfunction
//===========================================================================
// Trigger: InitCreep
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_InitCreepActions takes nothing returns nothing
    
    call remindAllPlayers(2 , "初始化野区数据。")
    call TriggerExecute(gg_trg_Creeps)
    call remindAllPlayers(2 , "加载野区数据完成！")
endfunction
//===========================================================================
function InitTrig_InitCreep takes nothing returns nothing
    set gg_trg_InitCreep=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_InitCreep, function Trig_InitCreepActions)
endfunction
//===========================================================================
// Trigger: StateCreepsFlush
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_StateCreepsFlushActions takes nothing returns nothing
    call TriggerExecute(gg_trg_SeaRegionCreep)
    call TriggerExecute(gg_trg_AncientCreep)
    call TriggerExecute(gg_trg_SnowCreep)
    call TriggerExecute(gg_trg_MagmaCreep)
    call TriggerExecute(gg_trg_BossCreep)
    
endfunction
//===========================================================================
function InitTrig_StateCreepsFlush takes nothing returns nothing
    set gg_trg_StateCreepsFlush=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_StateCreepsFlush, function Trig_StateCreepsFlushActions)
endfunction
//===========================================================================
// Trigger: SeaRegionCreep
//===========================================================================
//TESH.scrollpos=28
//TESH.alwaysfold=0
//===========================================================================

//===========================================================================
function SRC_unitAlive takes nothing returns boolean
    return isUnitAlive(GetFilterUnit())
endfunction
function SRC_refresh takes nothing returns nothing
    
    local integer i= 0
    local integer j= 0
    
    
    loop
        
        if ( unitCountInRect(udg_CreepsRefrushRect[i] , Condition(function SRC_unitAlive)) == 0 ) then
            //create boss
            call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_CreepsTypeBoss[i], udg_CreepsBirthPointX[i], udg_CreepsBirthPointY[i], 0)
            //create minions
            set j=0
            loop
                call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_CreepsTypeMinion[i], udg_CreepsBirthPointX[i], udg_CreepsBirthPointY[i], 0)
                set j=j + 1
                exitwhen j >= udg_CreepsMinionCount[i]
            endloop
        
        endif
        
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    
    
    
endfunction
function Trig_SeaRegionCreepActions takes nothing returns nothing
    local timer t= CreateTimer()
    call TimerStart(t, 60, true, function SRC_refresh)
    
    set t=null
endfunction
//===========================================================================
function InitTrig_SeaRegionCreep takes nothing returns nothing
    set gg_trg_SeaRegionCreep=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_SeaRegionCreep, function Trig_SeaRegionCreepActions)
endfunction
//===========================================================================
// Trigger: AncientCreep
//===========================================================================
//TESH.scrollpos=26
//TESH.alwaysfold=0
function AC_unitAlive takes nothing returns boolean
    return ( isUnitAlive(GetFilterUnit()) )
endfunction
function AC_refresh takes nothing returns nothing
    local integer i= 10
    local integer j= 0
    
    loop
        if ( unitCountInRect(udg_CreepsRefrushRect[i] , Condition(function AC_unitAlive)) == 0 ) then
            //create boss
            call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_CreepsTypeBoss[i], udg_CreepsBirthPointX[i], udg_CreepsBirthPointY[i], 0)
            //create minions
            set j=0
            loop
                call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_CreepsTypeMinion[i], udg_CreepsBirthPointX[i], udg_CreepsBirthPointY[i], 0)
                set j=j + 1
                exitwhen j >= udg_CreepsMinionCount[i]
            endloop
        endif
        
        
        set i=i + 1
        exitwhen i > 11
    endloop
endfunction
function Trig_AncientCreepActions takes nothing returns nothing
    
    local timer t= CreateTimer()
    call TimerStart(t, 120, true, function AC_refresh)
    
    set t=null
    
endfunction
//===========================================================================
function InitTrig_AncientCreep takes nothing returns nothing
    set gg_trg_AncientCreep=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_AncientCreep, function Trig_AncientCreepActions)
endfunction
//===========================================================================
// Trigger: SnowCreep
//===========================================================================
//TESH.scrollpos=23
//TESH.alwaysfold=0

function SC_createSnowCreep takes nothing returns nothing
    local integer i= 12
    local integer j= 0
    
    //create boss
    call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_CreepsTypeBoss[i], udg_CreepsBirthPointX[i], udg_CreepsBirthPointY[i], 0)
    //create minions
    set j=0
    loop
        call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_CreepsTypeMinion[i], udg_CreepsBirthPointX[i], udg_CreepsBirthPointY[i], 0)
        set j=j + 1
        exitwhen j >= udg_CreepsMinionCount[i]
    endloop
    
    
    
    
endfunction
function SC_EventCondition takes nothing returns boolean
    
    return ( GetUnitTypeId(GetTriggerUnit()) == 'n00I' )
    
endfunction
function Trig_SnowCreepActions takes nothing returns nothing
    local timer t= CreateTimer()
    call TimerStart(t, 120, false, function SC_createSnowCreep)
    
    set t=null
endfunction
//===========================================================================
function InitTrig_SnowCreep takes nothing returns nothing
    set gg_trg_SnowCreep=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerUnitEvent(gg_trg_SnowCreep, Player(PLAYER_NEUTRAL_AGGRESSIVE), EVENT_PLAYER_UNIT_DEATH, null)
    call TriggerAddCondition(gg_trg_SnowCreep, Condition(function SC_EventCondition))
    call TriggerAddAction(gg_trg_SnowCreep, function Trig_SnowCreepActions)
endfunction
//===========================================================================
// Trigger: MagmaCreep
//===========================================================================
//TESH.scrollpos=1
//TESH.alwaysfold=0

function MC_createMagmaCreep takes nothing returns nothing
    local integer i= 14
    local integer j= 0
    
    //create boss
    call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_CreepsTypeBoss[i], udg_CreepsBirthPointX[i], udg_CreepsBirthPointY[i], 0)
    //create minions
    set j=0
    loop
        call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_CreepsTypeMinion[i], udg_CreepsBirthPointX[i], udg_CreepsBirthPointY[i], 0)
        set j=j + 1
        exitwhen j >= udg_CreepsMinionCount[i]
    endloop
    
    
    
endfunction
function Trig_MagmaCreepActions takes nothing returns nothing
    local timer t= CreateTimer()
    call TimerStart(t, 120, false, function MC_createMagmaCreep)
    
    set t=null
endfunction
//===========================================================================
function MC_EventCondition takes nothing returns boolean
    
    return ( GetUnitTypeId(GetTriggerUnit()) == 'n00G' )
    
endfunction
function InitTrig_MagmaCreep takes nothing returns nothing
    set gg_trg_MagmaCreep=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerUnitEvent(gg_trg_MagmaCreep, Player(PLAYER_NEUTRAL_AGGRESSIVE), EVENT_PLAYER_UNIT_DEATH, null)
    call TriggerAddCondition(gg_trg_MagmaCreep, Condition(function MC_EventCondition))
    call TriggerAddAction(gg_trg_MagmaCreep, function Trig_MagmaCreepActions)
endfunction
//===========================================================================
// Trigger: BossCreep
//===========================================================================
//TESH.scrollpos=9
//TESH.alwaysfold=0
function BC_EventCondition takes nothing returns boolean
    
    return ( GetUnitTypeId(GetTriggerUnit()) == 'n00J' )
    
endfunction
function BC_CreateBoss takes nothing returns nothing
    
    call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_CreepsTypeBoss[13], udg_CreepsBirthPointX[13], udg_CreepsBirthPointY[13], 0)
    
    
    
endfunction
function Trig_BossCreepActions takes nothing returns nothing
    local timer t= CreateTimer()
    
    call TimerStart(t, 480, false, function BC_CreateBoss)
    
    set t=null
endfunction
//===========================================================================
function InitTrig_BossCreep takes nothing returns nothing
    set gg_trg_BossCreep=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerUnitEvent(gg_trg_BossCreep, Player(PLAYER_NEUTRAL_AGGRESSIVE), EVENT_PLAYER_UNIT_DEATH, null)
    call TriggerAddCondition(gg_trg_BossCreep, Condition(function BC_EventCondition))
    call TriggerAddAction(gg_trg_BossCreep, function Trig_BossCreepActions)
endfunction
//===========================================================================
// Trigger: Soldiers
//===========================================================================
//TESH.scrollpos=44
//TESH.alwaysfold=0
//===========================================================================

//===========================================================================
function Trig_SoldiersActions takes nothing returns nothing
    
    
    set soldierBirthXUp[NAVY_CAMP]=GetRectCenterX(gg_rct_attPoint_01)
    set soldierBirthYUp[NAVY_CAMP]=GetRectCenterY(gg_rct_attPoint_01)
    set soldierBirthXUp[PIRATE_CAMP]=GetRectCenterX(gg_rct_attPoint_04)
    set soldierBirthYUp[PIRATE_CAMP]=GetRectCenterY(gg_rct_attPoint_04)
    
    set soldierBirthXMin[NAVY_CAMP]=GetRectCenterX(gg_rct_attPoint_00)
    set soldierBirthYMin[NAVY_CAMP]=GetRectCenterY(gg_rct_attPoint_00)
    set soldierBirthXMin[PIRATE_CAMP]=GetRectCenterX(gg_rct_attPoint_03)
    set soldierBirthYMin[PIRATE_CAMP]=GetRectCenterY(gg_rct_attPoint_03)
    
    set soldierBirthXDow[NAVY_CAMP]=GetRectCenterX(gg_rct_attPoint_02)
    set soldierBirthYDow[NAVY_CAMP]=GetRectCenterY(gg_rct_attPoint_02)
    set soldierBirthXDow[PIRATE_CAMP]=GetRectCenterX(gg_rct_attPoint_05)
    set soldierBirthYDow[PIRATE_CAMP]=GetRectCenterY(gg_rct_attPoint_05)
    
    
    set warrior[NAVY_CAMP]='h004'
    set bowman[NAVY_CAMP]='h006'
    set warrior[PIRATE_CAMP]='h005'
    set bowman[PIRATE_CAMP]='h007'
    
    set artillery[NAVY_CAMP]='h008'
    set artillery[PIRATE_CAMP]='h009'
    
    
    set warriorCount[MAIN_ROAD]=3
    set bowmanCount[MAIN_ROAD]=2
    set warriorCount[SIDE_ROAD]=3
    set bowmanCount[SIDE_ROAD]=1
    set artilleryCount[MAIN_ROAD]=1
    set artilleryCount[SIDE_ROAD]=1
    set superSoldierCount=2
    
endfunction
//===========================================================================
function InitTrig_Soldiers takes nothing returns nothing
    set gg_trg_Soldiers=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_Soldiers, function Trig_SoldiersActions)
endfunction
//===========================================================================
// Trigger: AttackDir
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
//===========================================================================

//===========================================================================
//===========================================================================
function AD_Condition takes nothing returns boolean
    return ( IsUnitOwnedByPlayer(GetFilterUnit(), Player(NAVY_PLAYER)) or IsUnitOwnedByPlayer(GetFilterUnit(), Player(PIRATE_PLAYER)) )
endfunction
function Trig_AttackDirActions takes nothing returns nothing
    
    local real array x
    local real array y
    local integer i= 0
    

    //记录必须要经过的矩形
    set attackRectUp[0]=gg_rct_attPoint_01
    set attackRectUp[1]=gg_rct_attPoint_06
    set attackRectUp[2]=gg_rct_attPoint_07
    set attackRectUp[3]=gg_rct_attPoint_08
    set attackRectUp[4]=gg_rct_attPoint_09
    set attackRectUp[5]=gg_rct_attPoint_04
    //把规则矩形转化为不规则区域
    set i=0
    loop
        set attackRegionUp[i]=CreateRegion()
        call RegionAddRect(attackRegionUp[i], attackRectUp[i])
        set i=i + 1
        exitwhen i > 5
    endloop
    //从地图中获取进攻点坐标
    set x[0]=- 5376.0
    set y[0]=- 6080.0
    set i=1
    loop
        set x[i]=GetRectCenterX(attackRectUp[i - 1])
        set y[i]=GetRectCenterY(attackRectUp[i - 1])
        set i=i + 1
        exitwhen i > 6
    endloop
    set x[7]=5056.0
    set y[7]=5504.0
    //把进攻点坐标保存在不规则区域中
    set i=0
    loop
        call saveRInRegion(x[i + 2] , "navyX" , attackRegionUp[i])
        call saveRInRegion(y[i + 2] , "navyY" , attackRegionUp[i])
        call saveRInRegion(x[i] , "pirateX" , attackRegionUp[i])
        call saveRInRegion(y[i] , "pirateY" , attackRegionUp[i])
        set i=i + 1
        exitwhen i > 5
    endloop
    //为上路进攻添加触发事件
    set i=0
    loop
        call TriggerRegisterEnterRegion(gg_trg_SoldierAttackUp, attackRegionUp[i], Condition(function AD_Condition))
        set i=i + 1
        exitwhen i > 5
    endloop

    //记录必须要经过的矩形
    set attackRectDow[0]=gg_rct_attPoint_02
    set attackRectDow[1]=gg_rct_attPoint_13
    set attackRectDow[2]=gg_rct_attPoint_14
    set attackRectDow[3]=gg_rct_attPoint_15
    set attackRectDow[4]=gg_rct_attPoint_16
    set attackRectDow[5]=gg_rct_attPoint_05
    //把规则矩形转化为不规则区域
    set i=0
    loop
        set attackRegionDow[i]=CreateRegion()
        call RegionAddRect(attackRegionDow[i], attackRectDow[i])
        set i=i + 1
        exitwhen i > 5
    endloop
    //从地图中获取进攻点坐标
    set x[0]=- 5376.0
    set y[0]=- 6080.0
    set i=1
    loop
        set x[i]=GetRectCenterX(attackRectDow[i - 1])
        set y[i]=GetRectCenterY(attackRectDow[i - 1])
        set i=i + 1
        exitwhen i > 6
    endloop
    set x[7]=5056.0
    set y[7]=5504.0
    //把进攻点坐标保存在不规则区域中
    set i=0
    loop
        call saveRInRegion(x[i + 2] , "navyX" , attackRegionDow[i])
        call saveRInRegion(y[i + 2] , "navyY" , attackRegionDow[i])
        call saveRInRegion(x[i] , "pirateX" , attackRegionDow[i])
        call saveRInRegion(y[i] , "pirateY" , attackRegionDow[i])
        set i=i + 1
        exitwhen i > 5
    endloop
    //为下路进攻添加触发事件
    set i=0
    loop
        call TriggerRegisterEnterRegion(gg_trg_SoldierAttackDow, attackRegionDow[i], Condition(function AD_Condition))
        set i=i + 1
        exitwhen i > 5
    endloop
    

    //记录必须要经过的矩形
    set attackRectMin[0]=gg_rct_attPoint_00
    set attackRectMin[1]=gg_rct_attPoint_10
    set attackRectMin[2]=gg_rct_attPoint_11
    set attackRectMin[3]=gg_rct_attPoint_12
    set attackRectMin[4]=gg_rct_attPoint_03
    //把规则矩形转化为不规则区域
    set i=0
    loop
        set attackRegionMin[i]=CreateRegion()
        call RegionAddRect(attackRegionMin[i], attackRectMin[i])
        set i=i + 1
        exitwhen i > 4
    endloop
    //从地图中获取进攻点坐标
    set x[0]=- 5376.0
    set y[0]=- 6080.0
    set i=1
    loop
        set x[i]=GetRectCenterX(attackRectMin[i - 1])
        set y[i]=GetRectCenterY(attackRectMin[i - 1])
        set i=i + 1
        exitwhen i > 5
    endloop
    set x[6]=5056.0
    set y[6]=5504.0
    //把进攻点坐标保存在不规则区域中
    set i=0
    loop
        call saveRInRegion(x[i + 2] , "navyX" , attackRegionMin[i])
        call saveRInRegion(y[i + 2] , "navyY" , attackRegionMin[i])
        call saveRInRegion(x[i] , "pirateX" , attackRegionMin[i])
        call saveRInRegion(y[i] , "pirateY" , attackRegionMin[i])
        set i=i + 1
        exitwhen i > 4
    endloop
    //为中路进攻添加触发事件
    set i=0
    loop
        call TriggerRegisterEnterRegion(gg_trg_SoldierAttackMin, attackRegionMin[i], Condition(function AD_Condition))
        set i=i + 1
        exitwhen i > 4
    endloop
endfunction
//===========================================================================
function InitTrig_AttackDir takes nothing returns nothing
    set gg_trg_AttackDir=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_AttackDir, function Trig_AttackDirActions)
endfunction
//===========================================================================
// Trigger: Towers
//===========================================================================
//TESH.scrollpos=12
//TESH.alwaysfold=0
function Trig_TowersActions takes nothing returns nothing
    //防御塔默认无敌
    call SetUnitInvulnerable(gg_unit_h002_0010, true)
    call SetUnitInvulnerable(gg_unit_h001_0024, true)
    call SetUnitInvulnerable(gg_unit_h001_0025, true)
    call SetUnitInvulnerable(gg_unit_h00I_0061, true)
    call SetUnitInvulnerable(gg_unit_h003_0028, true)
    call SetUnitInvulnerable(gg_unit_h003_0029, true)
    call SetUnitInvulnerable(gg_unit_h00I_0060, true)
    call SetUnitInvulnerable(gg_unit_h003_0026, true)
    call SetUnitInvulnerable(gg_unit_h003_0027, true)
    call SetUnitInvulnerable(gg_unit_h003_0030, true)
    call SetUnitInvulnerable(gg_unit_h003_0031, true)
    call SetUnitInvulnerable(gg_unit_h00I_0062, true)
    call SetUnitInvulnerable(gg_unit_h00A_0034, true)
    call SetUnitInvulnerable(gg_unit_h00A_0032, true)
    call SetUnitInvulnerable(gg_unit_h00A_0036, true)
    call SetUnitInvulnerable(gg_unit_h000_0009, true)
    call SetUnitInvulnerable(gg_unit_h00F_0039, true)
    call SetUnitInvulnerable(gg_unit_h00F_0040, true)
    call SetUnitInvulnerable(gg_unit_h00J_0063, true)
    call SetUnitInvulnerable(gg_unit_h00E_0045, true)
    call SetUnitInvulnerable(gg_unit_h00E_0046, true)
    call SetUnitInvulnerable(gg_unit_h00J_0064, true)
    call SetUnitInvulnerable(gg_unit_h00E_0041, true)
    call SetUnitInvulnerable(gg_unit_h00E_0042, true)
    call SetUnitInvulnerable(gg_unit_h00J_0065, true)
    call SetUnitInvulnerable(gg_unit_h00E_0043, true)
    call SetUnitInvulnerable(gg_unit_h00E_0044, true)
    call SetUnitInvulnerable(gg_unit_h00G_0049, true)
    call SetUnitInvulnerable(gg_unit_h00G_0047, true)
    call SetUnitInvulnerable(gg_unit_h00D_0052, true)
endfunction
//===========================================================================
function InitTrig_Towers takes nothing returns nothing
    set gg_trg_Towers=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_Towers, function Trig_TowersActions)
endfunction
//===========================================================================
// Trigger: InitAttackAndDef
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_InitAttackAndDefActions takes nothing returns nothing
    call remindAllPlayers(2 , "初始化工兵进攻。")
    call TriggerExecute(gg_trg_Soldiers)
    call TriggerExecute(gg_trg_AttackDir)
    call TriggerExecute(gg_trg_Towers)
    call remindAllPlayers(2 , "加载工兵进攻完毕！")
endfunction
//===========================================================================
function InitTrig_InitAttackAndDef takes nothing returns nothing
    set gg_trg_InitAttackAndDef=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_InitAttackAndDef, function Trig_InitAttackAndDefActions)
endfunction
//===========================================================================
// Trigger: StateFlushSoldiersAll
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_StateFlushSoldiersAllActions takes nothing returns nothing
    call TriggerExecute(gg_trg_CreateSoldiersUp)
    call TriggerExecute(gg_trg_CreateSoldiersDow)
    call TriggerExecute(gg_trg_CreateSoldiersMin)
    
endfunction
//===========================================================================
function InitTrig_StateFlushSoldiersAll takes nothing returns nothing
    set gg_trg_StateFlushSoldiersAll=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_StateFlushSoldiersAll, function Trig_StateFlushSoldiersAllActions)
endfunction
//===========================================================================
// Trigger: SoldierLeak
//===========================================================================
//TESH.scrollpos=8
//TESH.alwaysfold=0

function SL_eventCondition takes nothing returns boolean
    return not IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE)
endfunction
function Trig_SoldierLeakActions takes nothing returns nothing
    
    local unit u= GetTriggerUnit()
    call FlushChildHashtable(SET_GET_HASH, GetHandleId(u))
    set u=null
    
endfunction
//===========================================================================
function InitTrig_SoldierLeak takes nothing returns nothing
    set gg_trg_SoldierLeak=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerUnitEvent(gg_trg_SoldierLeak, Player(NAVY_PLAYER), EVENT_PLAYER_UNIT_ATTACKED, Condition(function SL_eventCondition))
    call TriggerAddAction(gg_trg_SoldierLeak, function Trig_SoldierLeakActions)
endfunction
//===========================================================================
// Trigger: CreateSoldiersUp
//===========================================================================
//TESH.scrollpos=48
//TESH.alwaysfold=0
//===========================================================================

//===========================================================================
function CSU_create takes nothing returns nothing
    local integer i= 0
    local integer j= 0
    local player array p
    
    set p[0]=Player(NAVY_PLAYER)
    set p[1]=Player(PIRATE_PLAYER)
    loop
        set j=0
        loop
            call CreateUnit(p[i], warrior[i], soldierBirthXUp[i], soldierBirthYUp[i], 0)
            
            set j=j + 1
            exitwhen j > ( warriorCount[SIDE_ROAD] - 1 )
        endloop
        
        set j=0
        loop
            call CreateUnit(p[i], bowman[i], soldierBirthXUp[i], soldierBirthYUp[i], 0)
            set j=j + 1
            exitwhen j > ( bowmanCount[SIDE_ROAD] - 1 )
        endloop
        
        set i=i + 1
        exitwhen i > 1
    endloop
    
    set p[0]=null
    set p[1]=null
endfunction 
function CSU_createArt takes nothing returns nothing
    local integer i= 0
    local integer j= 0
    local player array p
    
    set p[0]=Player(NAVY_PLAYER)
    set p[1]=Player(PIRATE_PLAYER)
    loop
        set j=0
        loop
            call CreateUnit(p[i], artillery[i], soldierBirthXUp[i], soldierBirthYUp[i], 0)
            set j=j + 1
            exitwhen j > ( artilleryCount[SIDE_ROAD] - 1 )
        endloop
        set i=i + 1
        exitwhen i > 1
    endloop
    
endfunction
function Trig_CreateSoldiersUpActions takes nothing returns nothing
    local timer array t
    set t[0]=CreateTimer()
    call TimerStart(t[0], 30, true, function CSU_create)
    
    set t[1]=CreateTimer()
    call TimerStart(t[1], 120, true, function CSU_createArt)
    set t[0]=null
    set t[1]=null
endfunction
//===========================================================================
function InitTrig_CreateSoldiersUp takes nothing returns nothing
    set gg_trg_CreateSoldiersUp=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_CreateSoldiersUp, function Trig_CreateSoldiersUpActions)
endfunction
//===========================================================================
// Trigger: SoldierAttackUp
//===========================================================================
//TESH.scrollpos=6
//TESH.alwaysfold=0

function Trig_SoldierAttackUpActions takes nothing returns nothing
    
    local region r= GetTriggeringRegion()
    local unit u= GetTriggerUnit()
    local real x
    local real y
    
    if ( IsUnitOwnedByPlayer(u, Player(NAVY_PLAYER)) ) then
        set x=gainRInRegion("navyX" , r)
        set y=gainRInRegion("navyY" , r)
    elseif ( IsUnitOwnedByPlayer(u, Player(PIRATE_PLAYER)) ) then
        set x=gainRInRegion("pirateX" , r)
        set y=gainRInRegion("pirateY" , r)
    endif
    call saveRInUnit(x , "attX" , u)
    call saveRInUnit(y , "attY" , u)
    call IssuePointOrder(u, "attack", x, y)
    
    set u=null
    set r=null
    
endfunction
//===========================================================================
function InitTrig_SoldierAttackUp takes nothing returns nothing
    set gg_trg_SoldierAttackUp=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_SoldierAttackUp, function Trig_SoldierAttackUpActions)
endfunction
//===========================================================================
// Trigger: CreateSoldiersDow
//===========================================================================
//TESH.scrollpos=48
//TESH.alwaysfold=0
//===========================================================================

//===========================================================================
function CSD_create takes nothing returns nothing
    local integer i= 0
    local integer j= 0
    local player array p
    
    set p[0]=Player(NAVY_PLAYER)
    set p[1]=Player(PIRATE_PLAYER)
    loop
        set j=0
        loop
            call CreateUnit(p[i], warrior[i], soldierBirthXDow[i], soldierBirthYDow[i], 0)
            
            set j=j + 1
            exitwhen j > ( warriorCount[SIDE_ROAD] - 1 )
        endloop
        
        set j=0
        loop
            call CreateUnit(p[i], bowman[i], soldierBirthXDow[i], soldierBirthYDow[i], 0)
            set j=j + 1
            exitwhen j > ( bowmanCount[SIDE_ROAD] - 1 )
        endloop
        
        set i=i + 1
        exitwhen i > 1
    endloop
    
    set p[0]=null
    set p[1]=null
endfunction 
function CSD_createArt takes nothing returns nothing
    local integer i= 0
    local integer j= 0
    local player array p
    
    set p[0]=Player(NAVY_PLAYER)
    set p[1]=Player(PIRATE_PLAYER)
    loop
        set j=0
        loop
            call CreateUnit(p[i], artillery[i], soldierBirthXDow[i], soldierBirthYDow[i], 0)
            set j=j + 1
            exitwhen j > ( artilleryCount[SIDE_ROAD] - 1 )
        endloop
        set i=i + 1
        exitwhen i > 1
    endloop
    
endfunction
function Trig_CreateSoldiersDowActions takes nothing returns nothing
    local timer array t
    set t[0]=CreateTimer()
    call TimerStart(t[0], 30, true, function CSD_create)
    set t[1]=CreateTimer()
    call TimerStart(t[1], 120, true, function CSD_createArt)
    
    set t[0]=null
    set t[1]=null
endfunction
//===========================================================================
function InitTrig_CreateSoldiersDow takes nothing returns nothing
    set gg_trg_CreateSoldiersDow=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_CreateSoldiersDow, function Trig_CreateSoldiersDowActions)
endfunction
//===========================================================================
// Trigger: SoldierAttackDow
//===========================================================================
//TESH.scrollpos=4
//TESH.alwaysfold=0
function Trig_SoldierAttackDowActions takes nothing returns nothing
    local region r= GetTriggeringRegion()
    local unit u= GetTriggerUnit()
    local real x
    local real y
    
    if ( IsUnitOwnedByPlayer(u, Player(NAVY_PLAYER)) ) then
        set x=gainRInRegion("navyX" , r)
        set y=gainRInRegion("navyY" , r)
        
    elseif ( IsUnitOwnedByPlayer(u, Player(PIRATE_PLAYER)) ) then
        set x=gainRInRegion("pirateX" , r)
        set y=gainRInRegion("pirateY" , r)
        
    endif
    call saveRInUnit(x , "attX" , u)
    call saveRInUnit(y , "attY" , u)
    call IssuePointOrder(u, "attack", x, y)
    
    set u=null
    set r=null
endfunction
//===========================================================================
function InitTrig_SoldierAttackDow takes nothing returns nothing
    set gg_trg_SoldierAttackDow=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_SoldierAttackDow, function Trig_SoldierAttackDowActions)
endfunction
//===========================================================================
// Trigger: CreateSoldiersMin
//===========================================================================
//TESH.scrollpos=47
//TESH.alwaysfold=0
//===========================================================================

//===========================================================================
function CSM_create takes nothing returns nothing
    local integer i= 0
    local integer j= 0
    local player array p
    
    set p[0]=Player(NAVY_PLAYER)
    set p[1]=Player(PIRATE_PLAYER)
    loop
        set j=0
        loop
            call CreateUnit(p[i], warrior[i], soldierBirthXMin[i], soldierBirthYMin[i], 0)
            
            set j=j + 1
            exitwhen j > ( warriorCount[MAIN_ROAD] - 1 )
        endloop
        set j=0
        loop
            call CreateUnit(p[i], bowman[i], soldierBirthXMin[i], soldierBirthYMin[i], 0)
            set j=j + 1
            exitwhen j > ( bowmanCount[MAIN_ROAD] - 1 )
        endloop
        
        set i=i + 1
        exitwhen i > 1
    endloop
    
    set p[0]=null
    set p[1]=null
endfunction 
function CSM_createArt takes nothing returns nothing
    local integer i= 0
    local integer j= 0
    local player array p
    
    set p[0]=Player(NAVY_PLAYER)
    set p[1]=Player(PIRATE_PLAYER)
    loop
        set j=0
        loop
            call CreateUnit(p[i], artillery[i], soldierBirthXMin[i], soldierBirthYMin[i], 0)
            set j=j + 1
            exitwhen j > ( artilleryCount[MAIN_ROAD] - 1 )
        endloop
        set i=i + 1
        exitwhen i > 1
    endloop
    
endfunction
function Trig_CreateSoldiersMinActions takes nothing returns nothing
    local timer array t
    set t[0]=CreateTimer()
    call TimerStart(t[0], 30, true, function CSM_create)
    set t[1]=CreateTimer()
    call TimerStart(t[1], 120, true, function CSM_createArt)
    
    set t[0]=null
    set t[1]=null
endfunction
//===========================================================================
function InitTrig_CreateSoldiersMin takes nothing returns nothing
    set gg_trg_CreateSoldiersMin=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_CreateSoldiersMin, function Trig_CreateSoldiersMinActions)
endfunction
//===========================================================================
// Trigger: SoldierAttackMin
//===========================================================================
//TESH.scrollpos=3
//TESH.alwaysfold=0

function Trig_SoldierAttackMinActions takes nothing returns nothing
    local region r= GetTriggeringRegion()
    local unit u= GetTriggerUnit()
    local real x= 0
    local real y= 0
    
    if ( IsUnitOwnedByPlayer(u, Player(NAVY_PLAYER)) ) then
        set x=gainRInRegion("navyX" , r)
        set y=gainRInRegion("navyY" , r)
    elseif ( IsUnitOwnedByPlayer(u, Player(PIRATE_PLAYER)) ) then
        set x=gainRInRegion("pirateX" , r)
        set y=gainRInRegion("pirateY" , r)
    endif
    call saveRInUnit(x , "attX" , u)
    call saveRInUnit(y , "attY" , u)
    call IssuePointOrder(u, "attack", x, y)
    
    set u=null
    set r=null
endfunction
//===========================================================================
function InitTrig_SoldierAttackMin takes nothing returns nothing
    set gg_trg_SoldierAttackMin=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_SoldierAttackMin, function Trig_SoldierAttackMinActions)
endfunction
//===========================================================================
// Trigger: SoldierProtect
//===========================================================================
//TESH.scrollpos=94
//TESH.alwaysfold=0

function Trig_SoldierProtectConditions takes nothing returns boolean
    local unit atted= GetTriggerUnit()
    local unit atter= GetAttacker()
    local player attedP= GetOwningPlayer(atted)
    local boolean b
    
    set b=IsUnitType(atted, UNIT_TYPE_HERO) and ( not IsUnitAlly(atter, attedP) )
    
    set atter=null
    set atted=null
    set attedP=null
    return b
endfunction
//对单位组的操作
function SP_getG takes nothing returns boolean
    local unit u= GetFilterUnit()
    local unit atted= GetTriggerUnit()
    local player attedP= GetOwningPlayer(atted)
    local boolean array b
    
    set b[0]=gainBInUnit("attHero" , u)
    set b[1]=( not IsUnitType(u, UNIT_TYPE_STRUCTURE) ) and IsUnitAlly(u, attedP) and ( not b[0] ) and isUnitAlive(u)
    
    set u=null
    set atted=null
    set attedP=null
    
    return b[1]
    
endfunction
//进行防卫攻击
function SP_gDo takes nothing returns nothing
    
    local unit atter= GetAttacker()
    local unit u= GetEnumUnit()
    
    call IssueTargetOrder(u, "attack", atter)
    call saveBInUnit(true , "attHero" , u)
    
    set atter=null
    set u=null
endfunction
//撤销防卫攻击
function SP_gDo2 takes nothing returns nothing
    
    local unit u= GetEnumUnit()
    call IssuePointOrder(u, "attack", gainRInUnit("attX" , u), gainRInUnit("attY" , u))
    call saveBInUnit(false , "attHero" , u)
    
    set u=null
endfunction
//对计时器的操作
function SP_timerAction takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer tId= GetHandleId(t)
    local string s= I2S(tId)
    local unit atted= LoadUnitHandle(SPELL_HS, tId, StringHash("atted"))
    local unit atter= LoadUnitHandle(SPELL_HS, tId, StringHash("atter"))
    local real array x
    local real array y
    local real dis
    local group g
    
    set x[0]=GetUnitX(atted)
    set y[0]=GetUnitY(atted)
    set x[1]=GetUnitX(atter)
    set y[1]=GetUnitY(atter)
    set dis=getDistanceInPts(x[0] , y[0] , x[1] , y[1])
    if ( dis > 800 ) then
        //两英雄相距过远，小兵不再保护英雄
        set g=LoadGroupHandle(SPELL_HS, tId, StringHash("group"))
        call ForGroup(g, function SP_gDo2)
        call DestroyGroup(g)
        call FlushChildHashtable(SPELL_HS, tId)
    else
        call TimerStart(t, 1, false, function SP_timerAction)
    endif
    
    set t=null
    set atted=null
    set atter=null
    set g=null
endfunction
//本事件触发动作
function Trig_SoldierProtectActions takes nothing returns nothing
    local unit atter= GetAttacker()
    local unit atted= GetTriggerUnit()
    local group g= CreateGroup()
    local timer t= CreateTimer()
    local integer tId= GetHandleId(t)
    local real x= GetUnitX(atted)
    local real y= GetUnitY(atted)
    
    call GroupEnumUnitsInRange(g, x, y, 500, Condition(function SP_getG))
    call ForGroup(g, function SP_gDo)
    call TimerStart(t, 1, false, function SP_timerAction)
    call SaveGroupHandle(SPELL_HS, tId, StringHash("group"), g)
    call SaveUnitHandle(SPELL_HS, tId, StringHash("atter"), atter)
    call SaveUnitHandle(SPELL_HS, tId, StringHash("atted"), atted)
    
    set atter=null
    set atted=null
    set g=null
    set t=null
endfunction
//===========================================================================
function InitTrig_SoldierProtect takes nothing returns nothing
    set gg_trg_SoldierProtect=CreateTrigger()
    call DoNothing()
    call triggerRegisterHeroEvent(gg_trg_SoldierProtect , EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(gg_trg_SoldierProtect, Condition(function Trig_SoldierProtectConditions))
    call TriggerAddAction(gg_trg_SoldierProtect, function Trig_SoldierProtectActions)
endfunction
//===========================================================================
// Trigger: TowerProtect
//===========================================================================
//TESH.scrollpos=78
//TESH.alwaysfold=0
function TwP_getG takes nothing returns boolean
    return IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE)
endfunction

function TwP_eventConditions takes nothing returns boolean
    local unit sourcer= GetEventDamageSource()
    local unit victim= GetTriggerUnit()
    local unit array u
    local player victimP= GetOwningPlayer(victim)
    local boolean array b
    local group g= CreateGroup()
    local real x= GetUnitX(sourcer)
    local real y= GetUnitY(sourcer)
    local integer i= 0
    
    if ( IsUnitAlly(sourcer, victimP) ) then
    //双方为友军
        set sourcer=null
        set victim=null
        set victimP=null
        call DestroyGroup(g)
        set g=null
        return false
    endif
    
    call GroupEnumUnitsInRange(g, x, y, 750, Condition(function TwP_getG))
    set i=unitCountInGp(g)
    if ( i > 0 ) then
        set u[0]=FirstOfGroup(g)
        set b[1]=IsUnitAlly(u[0], victimP)
    else
        set b[1]=false
    endif
    set b[0]=IsUnitType(sourcer, UNIT_TYPE_HERO) and IsUnitType(victim, UNIT_TYPE_HERO)
    
    set sourcer=null
    set victim=null
    set u[0]=null
    set victimP=null
    call DestroyGroup(g)
    set g=null
    
    return b[0] and b[1]
endfunction
//命令建筑单位对英雄发布攻击
function TwP_gDo takes nothing returns nothing
    local boolean array b
    local unit array u
    
    set u[0]=GetEnumUnit()
    set u[1]=GetEventDamageSource()
    set b[0]=gainBInUnit("attHero" , u[0])
    if ( b[0] ) then
        //防御塔正在攻击英雄
    else
        call IssueTargetOrder(u[0], "attack", u[1])
    endif
    
    set u[0]=null
    set u[1]=null
endfunction
function Trig_TowerProtectActions takes nothing returns nothing
    local unit sourcer= GetEventDamageSource()
    local player p= GetOwningPlayer(sourcer)
    local unit u= GetTriggerUnit()
    local group g= CreateGroup()
    local real x= GetUnitX(sourcer)
    local real y= GetUnitY(sourcer)
    
    if ( IsUnitAlly(u, p) ) then
        call GroupEnumUnitsInRange(g, x, y, 800, Condition(function TwP_getG))
        call ForGroup(g, function TwP_gDo)
    endif
    
    set p=null
    set u=null
    set sourcer=null
    call DestroyGroup(g)
    set g=null
endfunction
//===========================================================================
function InitTrig_TowerProtect takes nothing returns nothing
    set gg_trg_TowerProtect=CreateTrigger()
    call DoNothing()
    //事件由选人时注册
    call TriggerAddCondition(gg_trg_TowerProtect, Condition(function TwP_eventConditions))
    call TriggerAddAction(gg_trg_TowerProtect, function Trig_TowerProtectActions)
endfunction
//===========================================================================
// Trigger: TowerAttack
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_TowerAttackConditions takes nothing returns boolean
    return IsUnitType(GetAttacker(), UNIT_TYPE_STRUCTURE)
endfunction
function Trig_TowerAttackActions takes nothing returns nothing
    local unit atted= GetTriggerUnit()
    local unit atter= GetAttacker()
    
    if ( not IsUnitType(atted, UNIT_TYPE_HERO) ) then
        //防御塔正在攻击小兵
        call saveBInUnit(false , "attHero" , atter)
    endif
    
    set atted=null
    set atter=null
endfunction
//===========================================================================
function InitTrig_TowerAttack takes nothing returns nothing
    local integer i= 0
    set gg_trg_TowerAttack=CreateTrigger()
    call DoNothing()
    loop
        call TriggerRegisterPlayerUnitEvent(gg_trg_TowerAttack, Player(i), EVENT_PLAYER_UNIT_ATTACKED, null)
        set i=i + 1
        exitwhen i > 12 - 1
    endloop
    call TriggerAddAction(gg_trg_TowerAttack, function Trig_TowerAttackActions)
    call TriggerAddCondition(gg_trg_TowerAttack, Condition(function Trig_TowerAttackConditions))
endfunction
//===========================================================================
// Trigger: TowerDefendRel
//===========================================================================
//TESH.scrollpos=174
//TESH.alwaysfold=0
function Trig_TowerDefendRelActions takes nothing returns nothing
    local unit u= GetTriggerUnit()
    //海军防御塔防御解除
    if ( u == gg_unit_h00B_0037 ) then
        call SetUnitInvulnerable(gg_unit_h00A_0036, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00A_0036 ) then
        call SetUnitInvulnerable(gg_unit_h003_0028, false)
        call SetUnitInvulnerable(gg_unit_h003_0029, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h003_0028 ) then
        call SetUnitInvulnerable(gg_unit_h00I_0061, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h003_0029 ) then
        call SetUnitInvulnerable(gg_unit_h00I_0061, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00I_0061 ) then
        //海军上路兵营被摧毁
        call SetUnitInvulnerable(gg_unit_h001_0024, false)
        call SetUnitInvulnerable(gg_unit_h001_0025, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00B_0033 ) then
        call SetUnitInvulnerable(gg_unit_h00A_0032, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00A_0032 ) then
        call SetUnitInvulnerable(gg_unit_h003_0026, false)
        call SetUnitInvulnerable(gg_unit_h003_0027, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h003_0026 ) then
        call SetUnitInvulnerable(gg_unit_h00I_0060, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h003_0027 ) then
        call SetUnitInvulnerable(gg_unit_h00I_0060, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00I_0060 ) then
        //海军中路兵营被摧毁
        call SetUnitInvulnerable(gg_unit_h001_0024, false)
        call SetUnitInvulnerable(gg_unit_h001_0025, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00B_0035 ) then
        call SetUnitInvulnerable(gg_unit_h00A_0034, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00A_0034 ) then
        call SetUnitInvulnerable(gg_unit_h003_0030, false)
        call SetUnitInvulnerable(gg_unit_h003_0031, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h003_0030 ) then
        call SetUnitInvulnerable(gg_unit_h00I_0062, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h003_0031 ) then
        call SetUnitInvulnerable(gg_unit_h00I_0062, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00I_0062 ) then
        //海军下路路兵营被摧毁
        call SetUnitInvulnerable(gg_unit_h001_0024, false)
        call SetUnitInvulnerable(gg_unit_h001_0025, false)
        set u=null
        return
    endif
  //解锁主基地
    if ( u == gg_unit_h001_0024 ) then
        if ( isUnitDead(gg_unit_h001_0025) and isUnitDead(gg_unit_h00A_0036) and isUnitDead(gg_unit_h00A_0032) and isUnitDead(gg_unit_h00A_0034) ) then
            call SetUnitInvulnerable(gg_unit_h002_0010, false)
        endif
    endif
    if ( u == gg_unit_h001_0025 ) then
        if ( isUnitDead(gg_unit_h001_0024) and isUnitDead(gg_unit_h00A_0036) and isUnitDead(gg_unit_h00A_0032) and isUnitDead(gg_unit_h00A_0034) ) then
            call SetUnitInvulnerable(gg_unit_h002_0010, false)
        endif
    endif
    
    //海贼防御塔被摧毁
    if ( u == gg_unit_h00D_0052 ) then
        call SetUnitInvulnerable(gg_unit_h00G_0051, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00G_0051 ) then
        call SetUnitInvulnerable(gg_unit_h00E_0045, false)
        call SetUnitInvulnerable(gg_unit_h00E_0046, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00E_0045 ) then
        call SetUnitInvulnerable(gg_unit_h00J_0063, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00E_0046 ) then
        call SetUnitInvulnerable(gg_unit_h00J_0063, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00J_0063 ) then
        //海军中路兵营被摧毁
        call SetUnitInvulnerable(gg_unit_h00F_0040, false)
        call SetUnitInvulnerable(gg_unit_h00F_0039, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00D_0048 ) then
        call SetUnitInvulnerable(gg_unit_h00G_0047, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00G_0047 ) then
        call SetUnitInvulnerable(gg_unit_h00E_0042, false)
        call SetUnitInvulnerable(gg_unit_h00E_0041, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00E_0042 ) then
        call SetUnitInvulnerable(gg_unit_h00J_0064, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00E_0041 ) then
        call SetUnitInvulnerable(gg_unit_h00J_0064, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00J_0064 ) then
        //海军中路兵营被摧毁
        call SetUnitInvulnerable(gg_unit_h00F_0040, false)
        call SetUnitInvulnerable(gg_unit_h00F_0039, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00D_0050 ) then
        call SetUnitInvulnerable(gg_unit_h00G_0049, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00G_0049 ) then
        call SetUnitInvulnerable(gg_unit_h00E_0044, false)
        call SetUnitInvulnerable(gg_unit_h00E_0043, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00E_0044 ) then
        call SetUnitInvulnerable(gg_unit_h00J_0065, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00E_0043 ) then
        call SetUnitInvulnerable(gg_unit_h00J_0065, false)
        set u=null
        return
    endif
    if ( u == gg_unit_h00J_0065 ) then
        //海军中路兵营被摧毁
        call SetUnitInvulnerable(gg_unit_h00F_0040, false)
        call SetUnitInvulnerable(gg_unit_h00F_0039, false)
        set u=null
        return
    endif
    //解锁主基地
    if ( u == gg_unit_h00F_0040 ) then
        if ( isUnitDead(gg_unit_h00F_0039) and isUnitDead(gg_unit_h00G_0051) and isUnitDead(gg_unit_h00G_0047) and isUnitDead(gg_unit_h00G_0049) ) then
            call SetUnitInvulnerable(gg_unit_h000_0009, false)
        endif
    endif
    if ( u == gg_unit_h00F_0039 ) then
        if ( isUnitDead(gg_unit_h00F_0040) and isUnitDead(gg_unit_h00G_0051) and isUnitDead(gg_unit_h00G_0047) and isUnitDead(gg_unit_h00G_0049) ) then
            call SetUnitInvulnerable(gg_unit_h000_0009, false)
        endif
    endif
endfunction
//===========================================================================
function InitTrig_TowerDefendRel takes nothing returns nothing
    set gg_trg_TowerDefendRel=CreateTrigger()
    call DoNothing()
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00B_0037, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00A_0036, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h003_0028, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h003_0029, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00I_0061, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00B_0033, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00A_0032, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h003_0026, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h003_0027, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00I_0060, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00B_0035, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00A_0034, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h003_0030, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h003_0031, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00I_0062, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h001_0024, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h001_0025, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00D_0052, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00G_0051, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00E_0045, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00E_0046, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00J_0063, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00D_0048, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00G_0047, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00E_0042, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00E_0041, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00J_0064, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00D_0050, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00G_0049, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00E_0044, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00E_0043, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00J_0065, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00F_0040, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(gg_trg_TowerDefendRel, gg_unit_h00F_0039, EVENT_UNIT_DEATH)
    call TriggerAddAction(gg_trg_TowerDefendRel, function Trig_TowerDefendRelActions)
endfunction
//===========================================================================
// Trigger: SeaAreas
//===========================================================================
//TESH.scrollpos=83
//TESH.alwaysfold=0
function Trig_SeaAreasConditons takes nothing returns boolean
    return ( GetUnitAbilityLevel(GetFilterUnit(), 'Aloc') == 0 )
endfunction
function Trig_SeaAreasActions takes nothing returns nothing
    set SEA_REGION=CreateRegion()
    
    call RegionAddRect(SEA_REGION, gg_rct_SeaArea_00)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_01)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_02)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_03)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_04)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_05)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_06)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_07)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_08)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_09)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_10)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_11)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_12)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_13)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_14)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_15)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_16)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_17)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_18)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_19)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_20)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_21)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_22)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_23)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_24)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_25)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_26)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_27)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_28)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_29)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_30)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_31)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_32)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_33)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_34)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_35)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_36)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_37)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_38)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_39)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_40)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_41)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_42)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_43)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_44)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_45)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_46)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_47)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_48)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_49)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_50)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_51)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_52)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_53)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_54)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_55)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_56)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_57)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_58)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_59)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_60)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_61)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_62)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_63)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_64)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_65)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_66)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_67)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_68)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_69)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_70)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_71)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_72)
	call RegionAddRect(SEA_REGION, gg_rct_SeaArea_73)
    call RegionAddRect(SEA_REGION, gg_rct_SeaArea_74)
    
    //注册事件
    call TriggerRegisterEnterRegion(gg_trg_EnterSea, SEA_REGION, Condition(function Trig_SeaAreasConditons))
    call TriggerRegisterLeaveRegion(gg_trg_ExitSea, SEA_REGION, Condition(function Trig_SeaAreasConditons))
    
endfunction
//===========================================================================
function InitTrig_SeaAreas takes nothing returns nothing
    set gg_trg_SeaAreas=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_SeaAreas, function Trig_SeaAreasActions)
endfunction
//===========================================================================
// Trigger: UnitSeaDebuff
//===========================================================================
//TESH.scrollpos=77
//TESH.alwaysfold=0

function Trig_UnitSeaDebuffActions takes nothing returns nothing
    
    //能力者重罚
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H00T')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H00W')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H00M')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01Z')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H00S')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H014')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H00L')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01K')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H015')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H000')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01M')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01C')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H00X')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H022')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H016')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H019')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01A')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H00P')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H00R')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01D')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01E')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H013')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01H')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01F')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H00N')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01G')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H010')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01L')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H010')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01P')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H00Q')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01R')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H00U')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01U')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H00Z')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H017')
    call saveIInInteger(SEAR_DEVILER , "SEAR_DEBUF" , 'H01I')
    
    //能力者海行
    call saveIInInteger(SEAR_DEVIL_WORLD , "SEAR_DEBUF" , 'H01N')
    call saveIInInteger(SEAR_DEVIL_WORLD , "SEAR_DEBUF" , 'H01Q')
    
    //海族
    call saveIInInteger(SEAR_NEPTUNE , "SEAR_DEBUF" , 'H00V')
    call saveIInInteger(SEAR_NEPTUNE , "SEAR_DEBUF" , 'H01S')
    call saveIInInteger(SEAR_NEPTUNE , "SEAR_DEBUF" , 'H011')
    
    call saveIInInteger(SEAR_NEPTUNE , "SEAR_DEBUF" , 'n00B')
    call saveIInInteger(SEAR_NEPTUNE , "SEAR_DEBUF" , 'n006')
    call saveIInInteger(SEAR_NEPTUNE , "SEAR_DEBUF" , 'n005')
    call saveIInInteger(SEAR_NEPTUNE , "SEAR_DEBUF" , 'n003')
    call saveIInInteger(SEAR_NEPTUNE , "SEAR_DEBUF" , 'n009')
    call saveIInInteger(SEAR_NEPTUNE , "SEAR_DEBUF" , 'n002')
    call saveIInInteger(SEAR_NEPTUNE , "SEAR_DEBUF" , 'n00A')
    call saveIInInteger(SEAR_NEPTUNE , "SEAR_DEBUF" , 'n008')
    
    //浮空型
    
    call saveIInInteger(SEAR_FLOAT , "SEAR_FLOAT" , 'n004')
    call saveIInInteger(SEAR_FLOAT , "SEAR_FLOAT" , 'n00c')
    
    //僵尸类
    
endfunction
//===========================================================================
function InitTrig_UnitSeaDebuff takes nothing returns nothing
    set gg_trg_UnitSeaDebuff=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_UnitSeaDebuff, function Trig_UnitSeaDebuffActions)
endfunction
//===========================================================================
// Trigger: InitSeaData
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_InitSeaDataActions takes nothing returns nothing
    
    call remindAllPlayers(2 , "初始化海生存区数据。")
    call TriggerExecute(gg_trg_SeaAreas)
    call TriggerExecute(gg_trg_UnitSeaDebuff)
    call remindAllPlayers(2 , "加载海生存区数据完毕！")
    
endfunction
//===========================================================================
function InitTrig_InitSeaData takes nothing returns nothing
    set gg_trg_InitSeaData=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_InitSeaData, function Trig_InitSeaDataActions)
endfunction
//===========================================================================
// Trigger: EnterSea
//===========================================================================
//TESH.scrollpos=30
//TESH.alwaysfold=0

//能力者海行类的计时器，每秒降低蓝
function timerActions takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit u= LoadUnitHandle(SPELL_HS, GetHandleId(t), StringHash("unit"))
    local real r= 0
    if ( GetUnitAbilityLevel(u, 'A00A') != 0 ) then
        set r=GetUnitState(u, UNIT_STATE_MANA) - GetUnitState(u, UNIT_STATE_MAX_MANA) * 0.01
        if ( r < 0 ) then
            set r=0
        endif
        call SetUnitState(u, UNIT_STATE_MANA, r)
        
        call TimerStart(t, 1, false, function timerActions)
    else
        call DestroyTimer(t)
    endif
    
    set u=null
    set t=null
endfunction
function Trig_EnterSeaConditons takes nothing returns boolean
    return ( GetUnitAbilityLevel(GetFilterUnit(), 'Aloc') == 0 )
endfunction
function Trig_EnterSeaActions takes nothing returns nothing
    local timer t= CreateTimer()
    local integer tId= GetHandleId(t)
    local unit triggerUnit= GetTriggerUnit()
    local unit array doll
    local player p= GetOwningPlayer(triggerUnit)
    local integer pId= GetPlayerId(p)
    local integer unitType= GetUnitTypeId(triggerUnit)
    local integer seaDebuf= gainIInInteger("SEAR_DEBUF" , unitType)
    local integer level= unitLevel[pId] / 10 + 1
    local real x= GetUnitX(triggerUnit)
    local real y= GetUnitY(triggerUnit)
    
    if ( level == 4 ) then
        set level=3
    endif
    
    if ( seaDebuf == SEAR_FLOAT ) then
        //浮空型
    elseif ( seaDebuf == SEAR_NORMAL ) then
        //非能力者
        set doll[0]=CreateUnit(p, 'e001', x, y, 0)
        call UnitAddAbility(doll[0], 'A002')
        call SetUnitAbilityLevel(doll[0], 'A002', level)
        call IssueTargetOrder(doll[0], "slow", triggerUnit)
        call UnitApplyTimedLife(doll[0], '0', 0.1)
        set doll[0]=null
        
    elseif ( seaDebuf == SEAR_DEVILER ) then
        //能力者重罚型
        set doll[1]=CreateUnit(p, 'e001', x, y, 0)
        call UnitAddAbility(doll[1], 'A000')
        call IssueTargetOrder(doll[1], "doom", triggerUnit)
        call UnitApplyTimedLife(doll[1], '0', 0.1)
        
        set doll[0]=CreateUnit(p, 'e001', x, y, 0)
        call UnitAddAbility(doll[0], 'A001')
        call SetUnitAbilityLevel(doll[0], 'A001', level)
        call IssueTargetOrder(doll[0], "slow", triggerUnit)
        call UnitApplyTimedLife(doll[0], '0', 0.1)
        
        set doll[0]=null
        set doll[1]=null
        
    elseif ( seaDebuf == SEAR_DEVIL_WORLD ) then
        //能力者海行型
        set doll[0]=CreateUnit(p, 'e001', x, y, 0)
        call UnitAddAbility(doll[0], 'A002')
        call SetUnitAbilityLevel(doll[0], 'A002', level)
        call IssueTargetOrder(doll[0], "slow", triggerUnit)
        call UnitApplyTimedLife(doll[0], '0', 0.1)
        set doll[0]=null
        
        call UnitAddAbility(triggerUnit, 'A00A')
        call TimerStart(t, 1, false, function timerActions)
        call SaveUnitHandle(SPELL_HS, tId, StringHash("unit"), triggerUnit)
        
    elseif ( seaDebuf == SEAR_NEPTUNE ) then
        //海族
        if ( level == 1 ) then
            call UnitAddAbility(triggerUnit, 'A004')
        elseif ( level == 2 ) then
            call UnitAddAbility(triggerUnit, 'A006')
        else
            call UnitAddAbility(triggerUnit, 'A007')
        endif
        
    elseif ( seaDebuf == SEAR_CORPSE ) then
        //僵尸类
        
    endif
    
    set p=null
    set triggerUnit=null
    set t=null
endfunction
//===========================================================================
function InitTrig_EnterSea takes nothing returns nothing
    set gg_trg_EnterSea=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_EnterSea, function Trig_EnterSeaActions)
endfunction
//===========================================================================
// Trigger: ExitSea
//===========================================================================
//TESH.scrollpos=9
//TESH.alwaysfold=0

function Trig_ExitSeaActions takes nothing returns nothing
    local unit triggerUnit= GetTriggerUnit()
    local unit array doll
    local integer unitType= GetUnitTypeId(triggerUnit)
    local integer seaDebuf= gainIInInteger("SEAR_DEBUF" , unitType)
    
    if ( seaDebuf == SEAR_FLOAT ) then
        //浮空型
    elseif ( seaDebuf == SEAR_NORMAL ) then
        //非能力者
        call UnitRemoveAbility(triggerUnit, 'B002')
        
    elseif ( seaDebuf == SEAR_DEVILER ) then
        //能力者重罚型
        call UnitRemoveAbility(triggerUnit, 'B001')
        call UnitRemoveAbility(triggerUnit, 'B000')
        
    elseif ( seaDebuf == SEAR_DEVIL_WORLD ) then
        //能力者海行型
        call UnitRemoveAbility(triggerUnit, 'B002')
        call UnitRemoveAbility(triggerUnit, 'A00A')
        
    elseif ( seaDebuf == SEAR_NEPTUNE ) then
        //海族
        if ( UnitRemoveAbility(triggerUnit, 'B004') ) then
        
        elseif ( UnitRemoveAbility(triggerUnit, 'B006') ) then
        
        else
            call UnitRemoveAbility(triggerUnit, 'B007')
        endif
    endif
    
    set triggerUnit=null
    
    
endfunction
//===========================================================================
function InitTrig_ExitSea takes nothing returns nothing
    set gg_trg_ExitSea=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_ExitSea, function Trig_ExitSeaActions)
endfunction
//===========================================================================
// Trigger: HeroInfo
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_HeroInfoActions takes nothing returns nothing
    local integer i= 0
    local integer j= 0
    
    //中立，海军，海贼被选择英雄的单位池
    set ChosenHeroPool[0]=CreateUnitPool()
    set ChosenHeroPool[1]=CreateUnitPool()
    set ChosenHeroPool[2]=CreateUnitPool()
    
    //中立，海军，海贼 的英雄数量 17/17/21
    set HeroSelectedNum[0]=17
    set HeroSelectedNum[1]=17
    set HeroSelectedNum[2]=21
    
    //中立势力
    set chosenHeroInfo[0]=InitHashtable()
    //海军势力
    set chosenHeroInfo[1]=InitHashtable()
    //海贼势力
    set chosenHeroInfo[2]=InitHashtable()
    
    //-----------------------------------中立势力--
    
    // 悲哀的分割线
    set i=0
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B01Z') //头像
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H01Q') //单位类型
    call SaveStr(chosenHeroInfo[0], i, 2, "史基")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00305|r")
    call SaveStr(chosenHeroInfo[0], i, 4, "|cFFFFFF66*力量|r - 25 + 2.8↑")
    call SaveStr(chosenHeroInfo[0], i, 5, " 敏捷 - 17 + 1.7↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 20 + 2.0↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnsijiicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B010')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H00M')
    call SaveStr(chosenHeroInfo[0], i, 2, "爱德华·纽盖特")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战 |cFF00FF00150|r 移动 |cFF00FF00285|r")
    call SaveStr(chosenHeroInfo[0], i, 4, "|cFFFFFF66*力量|r - 32 + 3.2↑")
    call SaveStr(chosenHeroInfo[0], i, 5, " 敏捷 - 12 + 1.2↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 18 + 1.8↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnbhzicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B026')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H012')
    call SaveStr(chosenHeroInfo[0], i, 2, "香克斯")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00295|r")
    call SaveStr(chosenHeroInfo[0], i, 4, " 力量 - 21 + 2.0↑")
    call SaveStr(chosenHeroInfo[0], i, 5, "|cFFFFFF66*敏捷|r - 27 + 2.9↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 16 + 1.5↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnhficon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B00Q') //头像破坏物
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H013') //英雄id
    call SaveStr(chosenHeroInfo[0], i, 2, "马歇尔·D·汀奇")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战 |cFF00FF00100|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[0], i, 4, "|cFFFFFF66*力量|r - 25 + 2.8↑")
    call SaveStr(chosenHeroInfo[0], i, 5, " 敏捷 - 18 + 1.8↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 19 + 1.9↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnhhzicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B00R')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H00U')
    call SaveStr(chosenHeroInfo[0], i, 2, "多弗朗明哥")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[0], i, 4, "|cFFFFFF66*力量|r - 22 + 2.5↑")
    call SaveStr(chosenHeroInfo[0], i, 5, " 敏捷 - 22 + 2.2↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 18 + 1.8↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btndflmgicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B00S')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H00R')
    call SaveStr(chosenHeroInfo[0], i, 2, "克洛克达尔")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[0], i, 4, "|cFFFFFF66*力量|r - 27 + 3.0↑")
    call SaveStr(chosenHeroInfo[0], i, 5, " 敏捷 - 18 + 1.8↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 17 + 1.7↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btncrocodileicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B00U')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H01K')
    call SaveStr(chosenHeroInfo[0], i, 2, "波雅·罕库克")
    call SaveStr(chosenHeroInfo[0], i, 3, "远程 |cFF00FF00600|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[0], i, 4, " 力量 - 21 + 2.1↑")
    call SaveStr(chosenHeroInfo[0], i, 5, "|cFFFFFF66*敏捷|r - 25 + 2.8↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 16 + 1.6↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnndicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B00T')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H00N')
    call SaveStr(chosenHeroInfo[0], i, 2, "巴基")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战射程 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[0], i, 4, " 力量 - 23 + 2.3↑")
    call SaveStr(chosenHeroInfo[0], i, 5, "|cFFFFFF66*敏捷|r - 25 + 2.8↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 14 + 1.4↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnbjicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B00C')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H01I')
    call SaveStr(chosenHeroInfo[0], i, 2, "莫利亚")
    call SaveStr(chosenHeroInfo[0], i, 3, "远程 |cFF00FF00600|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[0], i, 4, " 力量 - 22 + 2.2↑")
    call SaveStr(chosenHeroInfo[0], i, 5, " 敏捷 - 14 + 1.4↑")
    call SaveStr(chosenHeroInfo[0], i, 6, "|cFFFFFF66*智力|r - 26 + 2.9↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnmlyicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B010')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H00S')
    call SaveStr(chosenHeroInfo[0], i, 2, "巴索罗缪·大熊")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00295|r")
    call SaveStr(chosenHeroInfo[0], i, 4, "|cFFFFFF66*力量|r - 31 + 3.4↑")
    call SaveStr(chosenHeroInfo[0], i, 5, " 敏捷 - 14 + 1.4↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 17 + 1.7↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btndaxiongicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B01M')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H020')
    call SaveStr(chosenHeroInfo[0], i, 2, "鹰眼·米霍克")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00305|r")
    call SaveStr(chosenHeroInfo[0], i, 4, "|cFFFFFF66*力量|r - 24 + 2.4↑")
    call SaveStr(chosenHeroInfo[0], i, 5, " 敏捷 - 20 + 2.0↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 15 + 1.5↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnyyicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B02I')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H01S')
    call SaveStr(chosenHeroInfo[0], i, 2, "吉贝尔")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战 |cFF00FF00132|r 移动 |cFF00FF00305|r")
    call SaveStr(chosenHeroInfo[0], i, 4, "|cFFFFFF66*力量|r - 23 + 2.3↑")
    call SaveStr(chosenHeroInfo[0], i, 5, " 敏捷 - 22 + 2.2↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 16 + 1.6↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnspicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B021')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H00W')
    call SaveStr(chosenHeroInfo[0], i, 2, "艾尼路")
    call SaveStr(chosenHeroInfo[0], i, 3, "远程 |cFF00FF00600|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[0], i, 4, "|cFFFFFF66*力量|r - 23 + 2.6↑")
    call SaveStr(chosenHeroInfo[0], i, 5, " 敏捷 - 20 + 2.0↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 19 + 1.9↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnenlicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B020')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H01W')
    call SaveStr(chosenHeroInfo[0], i, 2, "薇薇公主")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00295|r")
    call SaveStr(chosenHeroInfo[0], i, 4, " 力量 - 20 + 2.0↑")
    call SaveStr(chosenHeroInfo[0], i, 5, "|cFFFFFF66*敏捷|r - 25 + 2.5↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 14 + 1.4↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnvvicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B02A')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H01P')
    call SaveStr(chosenHeroInfo[0], i, 2, "萨博")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00295|r")
    call SaveStr(chosenHeroInfo[0], i, 4, " 力量 - 20 + 1.8↑")
    call SaveStr(chosenHeroInfo[0], i, 5, "|cFFFFFF66*敏捷|r - 26 + 3.1↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 16 + 1.6↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnsaboicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B008')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H01Z')
    call SaveStr(chosenHeroInfo[0], i, 2, "伊娃科夫")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[0], i, 4, "|cFFFFFF66*力量|r - 24 + 2.7↑")
    call SaveStr(chosenHeroInfo[0], i, 5, " 敏捷 - 17 + 1.7↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 22 + 2.2↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnywkficon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[0], i, 0, 'B009')
    call SaveInteger(chosenHeroInfo[0], i, 1, 'H01C')
    call SaveStr(chosenHeroInfo[0], i, 2, "多拉法尔加·罗")
    call SaveStr(chosenHeroInfo[0], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[0], i, 4, " 力量 - 22 + 2.2↑")
    call SaveStr(chosenHeroInfo[0], i, 5, "|cFFFFFF66*敏捷|r - 23 + 2.6↑")
    call SaveStr(chosenHeroInfo[0], i, 6, " 智力 - 17 + 1.7↑")
    call SaveStr(chosenHeroInfo[0], i, 7, null)
    call SaveStr(chosenHeroInfo[0], i, 8, null)
    call SaveStr(chosenHeroInfo[0], i, 9, null)
    call SaveStr(chosenHeroInfo[0], i, 10, null)
    call SaveStr(chosenHeroInfo[0], i, 11, null)
    call SaveStr(chosenHeroInfo[0], i, 12, null)
    call SaveStr(chosenHeroInfo[0], i, 13, null)
    call SaveStr(chosenHeroInfo[0], i, 14, null)
    call SaveStr(chosenHeroInfo[0], i, 15, null)
    call SaveStr(chosenHeroInfo[0], i, 16, null)
    call SaveStr(chosenHeroInfo[0], i, 17, "replaceabletextures\\commandbuttons\\btnluoicon.blp")
    set j=0
    loop
        call UnitPoolAddUnitType(ChosenHeroPool[0], LoadInteger(chosenHeroInfo[0], j, 1), 1.0)
        set j=j + 1
        exitwhen j > HeroSelectedNum[0] - 1
    endloop
    //---------------------------------------------海军势力--
    
   
    // 悲哀的分割线
    set i=0
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B012')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H021')
    call SaveStr(chosenHeroInfo[1], i, 2, "NEO·泽法")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00305|r")
    call SaveStr(chosenHeroInfo[1], i, 4, " 力量 - 27 + 2.7↑")
    call SaveStr(chosenHeroInfo[1], i, 5, "|cFFFFFF66*敏捷|r - 19 + 1.9↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 16 + 1.6↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnzficon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B01E')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H01B')
    call SaveStr(chosenHeroInfo[1], i, 2, "卡普")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[1], i, 4, "|cFFFFFF66*力量|r - 22 + 2.2↑")
    call SaveStr(chosenHeroInfo[1], i, 5, " 敏捷 - 19 + 1.9↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 18 + 1.8↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnkpicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B029')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H022')
    call SaveStr(chosenHeroInfo[1], i, 2, "佛之战国")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00500|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[1], i, 4, " 力量 - 25 + 2.5↑")
    call SaveStr(chosenHeroInfo[1], i, 5, " 敏捷 - 13 + 1.3↑")
    call SaveStr(chosenHeroInfo[1], i, 6, "|cFFFFFF66*智力|r - 24 + 2.7↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnzgicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B00E')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H00Q')
    call SaveStr(chosenHeroInfo[1], i, 2, "萨卡斯基")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00100|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[1], i, 4, "|cFFFFFF66*力量|r - 23 + 2.6↑")
    call SaveStr(chosenHeroInfo[1], i, 5, " 敏捷 - 21 + 2.1↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 18 + 1.8↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btncqicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B01F')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H015')
    call SaveStr(chosenHeroInfo[1], i, 2, "博尔萨利诺")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[1], i, 4, "|cFFFFFF66*力量|r - 23 + 2.6↑")
    call SaveStr(chosenHeroInfo[1], i, 5, " 敏捷 - 24 + 2.4↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 15 + 1.5↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnhyicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B028')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H01H')
    call SaveStr(chosenHeroInfo[1], i, 2, "麦哲伦")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00100|r 移动 |cFF00FF00295|r")
    call SaveStr(chosenHeroInfo[1], i, 4, "|cFFFFFF66*力量|r - 24 + 2.7↑")
    call SaveStr(chosenHeroInfo[1], i, 5, " 敏捷 - 18 + 1.8↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 20 + 2.0↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnmglicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B00A')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H01U')
    call SaveStr(chosenHeroInfo[1], i, 2, "腾虎·一笑")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00295|r")
    call SaveStr(chosenHeroInfo[1], i, 4, "|cFFFFFF66*力量|r - 24 + 2.4↑")
    call SaveStr(chosenHeroInfo[1], i, 5, " 敏捷 - 19 + 2.0↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 18 + 1.8↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnthicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B00O')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H01E')
    call SaveStr(chosenHeroInfo[1], i, 2, "路奇")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00130|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[1], i, 4, "|cFFFFFF66*力量|r - 28 + 3.1↑")
    call SaveStr(chosenHeroInfo[1], i, 5, " 敏捷 - 19 + 1.9↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 15 + 1.5↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnlqicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B01C')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H019')
    call SaveStr(chosenHeroInfo[1], i, 2, "卡库")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00305|r")
    call SaveStr(chosenHeroInfo[1], i, 4, " 力量 - 22 + 2.2↑")
    call SaveStr(chosenHeroInfo[1], i, 5, "|cFFFFFF66*敏捷|r - 25 + 2.8↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 15 + 1.5↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnkakuicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B025')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H016')
    call SaveStr(chosenHeroInfo[1], i, 2, "加布拉")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00100|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[1], i, 4, "|cFFFFFF66*力量|r - 25 + 2.8↑")
    call SaveStr(chosenHeroInfo[1], i, 5, " 敏捷 - 21 + 2.1↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 16 + 1.6↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnjblicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B01B')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H01A')
    call SaveStr(chosenHeroInfo[1], i, 2, "卡里法")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00140|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[1], i, 4, " 力量 - 20 + 2.0↑")
    call SaveStr(chosenHeroInfo[1], i, 5, "|cFFFFFF66*敏捷|r - 27 + 3.0↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 15 + 1.5↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnklficon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B01A')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H01Y')
    call SaveStr(chosenHeroInfo[1], i, 2, "枭")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[1], i, 4, "|cFFFFFF66*力量|r - 24 + 2.4↑")
    call SaveStr(chosenHeroInfo[1], i, 5, " 敏捷 - 20 + 2.0↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 15 + 1.5↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnxiaoicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B019')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H01V')
    call SaveStr(chosenHeroInfo[1], i, 2, "维尔戈")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00295|r")
    call SaveStr(chosenHeroInfo[1], i, 4, "|cFFFFFF66*力量|r - 24 + 2.8↑")
    call SaveStr(chosenHeroInfo[1], i, 5, " 敏捷 - 22 + 2.3↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 20 + 1.8↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnvrgicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B01G')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H01D')
    call SaveStr(chosenHeroInfo[1], i, 2, "龙马")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00305|r")
    call SaveStr(chosenHeroInfo[1], i, 4, " 力量 - 21 + 2.1↑")
    call SaveStr(chosenHeroInfo[1], i, 5, "|cFFFFFF66*敏捷|r - 25 + 2.8↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 16 + 1.6↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnlmicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B00V')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H01L')
    call SaveStr(chosenHeroInfo[1], i, 2, "佩罗娜")
    call SaveStr(chosenHeroInfo[1], i, 3, "远程 |cFF00FF00100|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[1], i, 4, " 力量 - 19 + 1.9↑")
    call SaveStr(chosenHeroInfo[1], i, 5, " 敏捷 - 20 + 2.0↑")
    call SaveStr(chosenHeroInfo[1], i, 6, "|cFFFFFF66*智力|r - 23 + 2.6↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnplnicon.blp")
     // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B011')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H01N')
    call SaveStr(chosenHeroInfo[1], i, 2, "库赞")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00100|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[1], i, 4, "|cFFFFFF66*力量|r - 25 + 2.8↑")
    call SaveStr(chosenHeroInfo[1], i, 5, " 敏捷 - 18 + 1.8↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 19 + 1.9↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnqzicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[1], i, 0, 'B01D')
    call SaveInteger(chosenHeroInfo[1], i, 1, 'H01R')
    call SaveStr(chosenHeroInfo[1], i, 2, "斯摩卡")
    call SaveStr(chosenHeroInfo[1], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[1], i, 4, "|cFFFFFF66*力量|r - 24 + 2.7↑")
    call SaveStr(chosenHeroInfo[1], i, 5, " 敏捷 - 21 + 2.1↑")
    call SaveStr(chosenHeroInfo[1], i, 6, " 智力 - 17 + 1.7↑")
    call SaveStr(chosenHeroInfo[1], i, 7, null)
    call SaveStr(chosenHeroInfo[1], i, 8, null)
    call SaveStr(chosenHeroInfo[1], i, 9, null)
    call SaveStr(chosenHeroInfo[1], i, 10, null)
    call SaveStr(chosenHeroInfo[1], i, 11, null)
    call SaveStr(chosenHeroInfo[1], i, 12, null)
    call SaveStr(chosenHeroInfo[1], i, 13, null)
    call SaveStr(chosenHeroInfo[1], i, 14, null)
    call SaveStr(chosenHeroInfo[1], i, 15, null)
    call SaveStr(chosenHeroInfo[1], i, 16, null)
    call SaveStr(chosenHeroInfo[1], i, 17, "replaceabletextures\\commandbuttons\\btnsmokericon.blp")
    
    set j=0
    loop
        call UnitPoolAddUnitType(ChosenHeroPool[1], LoadInteger(chosenHeroInfo[1], j, 1), 1.0)
        set j=j + 1
        exitwhen j > HeroSelectedNum[1] - 1
    endloop
    //------------------------------------------------------海贼势力--
    
     // 悲哀的分割线
    set i=0
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B01X')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H01F')
    call SaveStr(chosenHeroInfo[2], i, 2, "蒙奇·D·路飞")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00180|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[2], i, 4, "|cFFFFFF66*力量|r - 25 + 2.8↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 23 + 2.3↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 14 + 1.4↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnlufficon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B00Z')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H023')
    call SaveStr(chosenHeroInfo[2], i, 2, "罗罗诺亚·索隆")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00295|r")
    call SaveStr(chosenHeroInfo[2], i, 4, "|cFFFFFF66*力量|r - 26 + 2.6↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 20 + 2.0↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 15 + 1.5↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnzoroicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B00Y')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H01T')
    call SaveStr(chosenHeroInfo[2], i, 2, "山治")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00100|r 移动 |cFF00FF00305|r")
    call SaveStr(chosenHeroInfo[2], i, 4, " 力量 - 17 + 1.7↑")
    call SaveStr(chosenHeroInfo[2], i, 5, "|cFFFFFF66*敏捷|r - 25 + 2.5↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 19 + 1.9↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnszicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B00X')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H01J')
    call SaveStr(chosenHeroInfo[2], i, 2, "娜美")
    call SaveStr(chosenHeroInfo[2], i, 3, "远程 |cFF00FF00500|r 移动 |cFF00FF00295|r")
    call SaveStr(chosenHeroInfo[2], i, 4, " 力量 - 18 + 1.8↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 17 + 1.7↑")
    call SaveStr(chosenHeroInfo[2], i, 6, "|cFFFFFF66*智力|r - 24 + 2.4↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnnameiicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B00W')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H010')
    call SaveStr(chosenHeroInfo[2], i, 2, "尼可·罗宾")
    call SaveStr(chosenHeroInfo[2], i, 3, "远程 |cFF00FF00500|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[2], i, 4, " 力量 - 21 + 2.1↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 15 + 1.5↑")
    call SaveStr(chosenHeroInfo[2], i, 6, "|cFFFFFF66*智力|r - 26 + 2.9↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnrobinicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B022')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H00Y')
    call SaveStr(chosenHeroInfo[2], i, 2, "弗兰奇")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00295|r")
    call SaveStr(chosenHeroInfo[2], i, 4, "|cFFFFFF66*力量|r - 28 + 3.1↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 14 + 1.4↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 17 + 1.7↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnflqicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B023')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H00O')
    call SaveStr(chosenHeroInfo[2], i, 2, "布鲁克")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00305|r")
    call SaveStr(chosenHeroInfo[2], i, 4, " 力量 - 19 + 1.9↑")
    call SaveStr(chosenHeroInfo[2], i, 5, "|cFFFFFF66*敏捷|r - 28 + 3.1↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 15 + 1.5↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnbrookicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B01T')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H01X')
    call SaveStr(chosenHeroInfo[2], i, 2, "乌索布")
    call SaveStr(chosenHeroInfo[2], i, 3, "远程 |cFF00FF00600|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[2], i, 4, " 力量 - 18 + 1.8↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 16 + 1.6↑")
    call SaveStr(chosenHeroInfo[2], i, 6, "|cFFFFFF66*智力|r - 25 + 2.5↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnwspicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B00P')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H01M')
    call SaveStr(chosenHeroInfo[2], i, 2, "东尼东尼·乔巴")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[2], i, 4, "|cFFFFFF66*力量|r - 24 + 2.7↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 22 + 2.2↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 16 + 1.6↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnqbicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B027')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H00X')
    call SaveStr(chosenHeroInfo[2], i, 2, "冯·克雷")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00100|r 移动 |cFF00FF00305|r")
    call SaveStr(chosenHeroInfo[2], i, 4, " 力量 - 20 + 2.0↑")
    call SaveStr(chosenHeroInfo[2], i, 5, "|cFFFFFF66*敏捷|r - 24 + 2.7↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 18 + 1.8↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnfklicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B01S')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H00Z')
    call SaveStr(chosenHeroInfo[2], i, 2, "银狐·福克西")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00110|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[2], i, 4, "|cFFFFFF66*力量|r - 23 + 2.6↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 22 + 2.2↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 17 + 1.7↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnfoxicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B01R')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H014')
    call SaveStr(chosenHeroInfo[2], i, 2, "巴兹尔·霍金斯")
    call SaveStr(chosenHeroInfo[2], i, 3, "远程 |cFF00FF00500|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[2], i, 4, " 力量 - 20 + 1.8↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " |cFFFFFF66*敏捷|r - 27 + 2.5↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 18 + 2.2↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnhjsicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B01Q')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H00P')
    call SaveStr(chosenHeroInfo[2], i, 2, "卡彭·贝基")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[2], i, 4, "|cFFFFFF66*力量|r - 25 + 2.8↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 21 + 2.1↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 16 + 1.6↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btncaponeicon.blp")
    
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B01H')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H00T')
    call SaveStr(chosenHeroInfo[2], i, 2, "X·德雷克")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00100|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[2], i, 4, "|cFFFFFF66*力量|r - 25 + 2.8↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 20 + 2.0↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 17 + 1.7↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btndeleikeicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B01I')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H017')
    call SaveStr(chosenHeroInfo[2], i, 2, "尤斯塔斯·基德")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[2], i, 4, "|cFFFFFF66*力量|r - 24 + 2.7↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 22 + 2.2↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 16 + 1.6↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnjideicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B01J')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H018')
    call SaveStr(chosenHeroInfo[2], i, 2, "基拉")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00305|r")
    call SaveStr(chosenHeroInfo[2], i, 4, " 力量 - 20 + 2.0↑")
    call SaveStr(chosenHeroInfo[2], i, 5, "|cFFFFFF66*敏捷|r - 24 + 2.4↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 15 + 1.5↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnjilaicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B01K')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H01G')
    call SaveStr(chosenHeroInfo[2], i, 2, "马尔高")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00100|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[2], i, 4, " 力量 - 22 + 2.2↑")
    call SaveStr(chosenHeroInfo[2], i, 5, "|cFFFFFF66*敏捷|r - 23 + 2.6↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 17 + 1.7↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnmarkeicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B01L')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H010')
    call SaveStr(chosenHeroInfo[2], i, 2, "乔兹")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[2], i, 4, "|cFFFFFF66*力量|r - 25 + 2.8↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 24 + 2.4↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 13 + 1.3↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btngeorgeicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B01W')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H00L')
    call SaveStr(chosenHeroInfo[2], i, 2, "波克卡斯·D·艾斯")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[2], i, 4, "|cFFFFFF66*力量|r - 27 + 3.0↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 18 + 1.8↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 17 + 1.7↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnaceicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B01N')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H011')
    call SaveStr(chosenHeroInfo[2], i, 2, "霍地·琼斯")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00150|r 移动 |cFF00FF00285|r")
    call SaveStr(chosenHeroInfo[2], i, 4, "|cFFFFFF66*力量|r - 27 + 2.7↑")
    call SaveStr(chosenHeroInfo[2], i, 5, " 敏捷 - 17 + 1.8↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 25 + 1.9↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnhdqsicon.blp")
    // 悲哀的分割线
    set i=i + 1
    call SaveInteger(chosenHeroInfo[2], i, 0, 'B01V')
    call SaveInteger(chosenHeroInfo[2], i, 1, 'H00V')
    call SaveStr(chosenHeroInfo[2], i, 2, "恶龙")
    call SaveStr(chosenHeroInfo[2], i, 3, "近战 |cFF00FF00128|r 移动 |cFF00FF00300|r")
    call SaveStr(chosenHeroInfo[2], i, 4, " 力量 - 20 + 2.0↑")
    call SaveStr(chosenHeroInfo[2], i, 5, "|cFFFFFF66*敏捷|r - 25 + 2.5↑")
    call SaveStr(chosenHeroInfo[2], i, 6, " 智力 - 14 + 1.4↑")
    call SaveStr(chosenHeroInfo[2], i, 7, null)
    call SaveStr(chosenHeroInfo[2], i, 8, null)
    call SaveStr(chosenHeroInfo[2], i, 9, null)
    call SaveStr(chosenHeroInfo[2], i, 10, null)
    call SaveStr(chosenHeroInfo[2], i, 11, null)
    call SaveStr(chosenHeroInfo[2], i, 12, null)
    call SaveStr(chosenHeroInfo[2], i, 13, null)
    call SaveStr(chosenHeroInfo[2], i, 14, null)
    call SaveStr(chosenHeroInfo[2], i, 15, null)
    call SaveStr(chosenHeroInfo[2], i, 16, null)
    call SaveStr(chosenHeroInfo[2], i, 17, "replaceabletextures\\commandbuttons\\btnelongicon.blp")
    
    set j=0
    loop
        call UnitPoolAddUnitType(ChosenHeroPool[2], LoadInteger(chosenHeroInfo[2], j, 1), 1.0)
        set j=j + 1
        exitwhen j > HeroSelectedNum[2] - 1
    endloop
endfunction
//===========================================================================
function InitTrig_HeroInfo takes nothing returns nothing
    set gg_trg_HeroInfo=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_HeroInfo, function Trig_HeroInfoActions)
endfunction
//===========================================================================
// Trigger: PlayerHashInfo
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0


function Trig_PlayerHashInfoActions takes nothing returns nothing
    local integer i= 0
    
    set PlayerChosenHash=InitHashtable()
    loop
        call SaveDestructableHandle(PlayerChosenHash, i, 0, null)
        call SaveDestructableHandle(PlayerChosenHash, i, 1, null)
        call SaveDestructableHandle(PlayerChosenHash, i, 2, null)
        call SaveDestructableHandle(PlayerChosenHash, i, 3, null)
        call SaveDestructableHandle(PlayerChosenHash, i, 4, null)
        call SaveUnitHandle(PlayerChosenHash, i, 5, null)
        call SaveHashtableHandle(PlayerChosenHash, i, 6, null)
        call SaveBoolean(PlayerChosenHash, i, 7, false)
        call SaveBoolean(PlayerChosenHash, i, 8, false)
        call SaveBoolean(PlayerChosenHash, i, 9, false)
        call SaveBoolean(PlayerChosenHash, i, 10, false)
        call SaveReal(PlayerChosenHash, i, 11, 0)
        call SaveReal(PlayerChosenHash, i, 12, 0)
        
        set i=i + 1
        exitwhen i > 9
    endloop
    
    //新建单位hashtable
    set UnitChosenHash[0]=InitHashtable()
    set UnitChosenHash[1]=InitHashtable()
    set UnitChosenHash[2]=InitHashtable()
    
    set isEndOfChoice=false
    set i=0
    loop
        set isFinishOfChoice[i]=false
        set i=i + 1
        exitwhen i > 9
    endloop
    
endfunction
//===========================================================================
function InitTrig_PlayerHashInfo takes nothing returns nothing
    set gg_trg_PlayerHashInfo=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_PlayerHashInfo, function Trig_PlayerHashInfoActions)
endfunction
//===========================================================================
// Trigger: InitChooseInterface
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_InitChooseInterfaceActions takes nothing returns nothing
    call remindAllPlayers(2 , "初始化英雄选择界面。")
    call TriggerExecute(gg_trg_HeroInfo)
    call TriggerExecute(gg_trg_PlayerHashInfo)
    call remindAllPlayers(2 , "加载英雄选择界面完毕！")
    
endfunction
//===========================================================================
function InitTrig_InitChooseInterface takes nothing returns nothing
    set gg_trg_InitChooseInterface=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_InitChooseInterface, function Trig_InitChooseInterfaceActions)
endfunction
//===========================================================================
// Trigger: startChosenInterface
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_startChosenInterfaceActions takes nothing returns nothing
    call TriggerExecute(gg_trg_ChooseInterface)
    call TriggerExecute(gg_trg_NotifyPanel)
    call TriggerExecute(gg_trg_CreatePanel)
    
endfunction
//===========================================================================
function InitTrig_startChosenInterface takes nothing returns nothing
    set gg_trg_startChosenInterface=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_startChosenInterface, function Trig_startChosenInterfaceActions)
endfunction
//===========================================================================
// Trigger: ChooseInterface
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0

//控制玩家的可视窗口
function CI_playingPlayer takes nothing returns boolean
    return ( ( ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerController(GetFilterPlayer()) != MAP_CONTROL_NONE ) ) )
endfunction
function CI_playerDo takes nothing returns nothing
    local player p= GetEnumPlayer()
    local integer id= GetPlayerId(p)
    
    set fogModifier[id]=CreateFogModifierRect(p, FOG_OF_WAR_VISIBLE, gg_rct_HeroSelection, true, false)
    call FogModifierStart(fogModifier[id])
    call lockCameraChooseHero(p , uCenter)
    
    set p=null
endfunction
function CI_contralWin takes nothing returns nothing
    local force f= CreateForce()
    local boolexpr filter= Condition(function CI_playingPlayer)
    
    call ForceEnumPlayers(f, filter)
    call ForForce(f, function CI_playerDo)
    
    call DestroyBoolExpr(filter)
    set filter=null
    set f=null
endfunction
//控制玩家视角
function CI_timerCamera takes nothing returns nothing
    local integer i= 0
    local timer t= GetExpiredTimer()
    
    if ( isEndOfChoice ) then
        //选人阶段终止
    else
        call TimerStart(t, 0.2, false, function CI_timerCamera)
        set i=0
        loop
            if ( not isFinishOfChoice[i] ) then
            //个人未完成选人
                if ( GetPlayerSlotState(Player(i)) == PLAYER_SLOT_STATE_PLAYING ) then
                    call contralCameraChooseHero(Player(i))
                endif
            endif
            
            set i=i + 1
            exitwhen i > 10 - 1
        endloop
        
    endif
    
    set t=null
endfunction
//生成英雄头像
function CI_createDest takes real centralX,real centralY,integer cols,integer camp,integer startX,integer startY returns nothing
 local real x=0
 local real y=0
 local integer col= 0
 local integer cow= 0
 local integer index= 0
 local integer objectId= 0
 local integer unitType= 0
 local unit u
	loop
		set x=centralX + startX + I2R(col) * 12.0
		set y=centralY + startY - I2R(cow) * 14.0
	
		if ( col > cols - 1 ) then
			set col=0
			set cow=cow + 1
		else
			set col=col + 1
		endif
        //生成对应的英雄头像
		set objectId=LoadInteger(chosenHeroInfo[camp], index, 0)
		call SaveDestructableHandle(heroPict_hash, camp, index, CreateDestructable(objectId, x, y, 180.0, 0.12, 1))
        
        //生成对应的选取马甲
        set u=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE), 'e000', x, y, 0)
        call SetUnitVertexColor(u, 255, 255, 255, 0)
        call SaveUnitHandle(unitClick_hash, camp, index, u)
        call SaveBoolean(UnitChosenHash[camp], index, 0, false)
        call SaveInteger(UnitChosenHash[camp], index, 1, objectId)
        call SaveReal(UnitChosenHash[camp], index, 3, x)
		call SaveReal(UnitChosenHash[camp], index, 4, y)
        
        set unitType=LoadInteger(chosenHeroInfo[camp], index, 1)
        call SaveInteger(chosenHeroInfo[camp], index, 2, unitType)
        
		call saveIInUnit(index , "index" , u)
		call saveIInUnit(camp , "camp" , u)
        //把单位和单位类型绑定，随机英雄时使用
		call saveUInInteger(u , "indexUnit" , unitType)
        
		set index=index + 1
		exitwhen index > HeroSelectedNum[camp] - 1
	endloop
	set u=null
endfunction
/////////-------------------------------
function Trig_ChooseInterfaceActions takes nothing returns nothing
    local real centralX= GetRectCenterX(gg_rct_HeroSelection)
    local real centralY= GetRectCenterY(gg_rct_HeroSelection)
    local real x= 0.0
    local real y= 0.0
    local integer i= 0
    local integer j= 0
    local integer k= 0
    local destructable lastDestruct= null
    local timer tCamera= CreateTimer()
    
    set heroPict_hash=InitHashtable()
    set unitClick_hash=InitHashtable()
    
    set backgroundPict=CreateDestructable('B02H', centralX, centralY, 180.0, 1.0, 1)
    set uCenter=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE), 'e002', centralX, centralY, 0)
    
    //创建玩家选择英雄框框
    loop
        if ( i < 5 ) then
            set j=j + 1
            set x=centralX - 18.0
            set y=centralY + ( 22.0 - I2R(j) * 12.0 )
            call SaveDestructableHandle(PlayerChosenHash, i, 0, CreateDestructable('B02C', x, y, 180.0, 0.13, 1))
            call SaveReal(PlayerChosenHash, i, 11, x)
            call SaveReal(PlayerChosenHash, i, 12, y)
        else
            set k=k + 1
            set x=centralX + 18.0
            set y=centralY + ( 22.0 - I2R(k) * 12.0 )
            call SaveDestructableHandle(PlayerChosenHash, i, 0, CreateDestructable('B02C', x, y, 180.0, 0.13, 1))
            call SaveReal(PlayerChosenHash, i, 11, x)
            call SaveReal(PlayerChosenHash, i, 12, y)
        endif
        
        set i=i + 1
        exitwhen i > 9
    endloop
    
    //随机图标
    set x=centralX - 10.0
    set y=centralY - 55.0
    set uRandom=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE), 'e003', x, y, 0.0)
    call SetUnitVertexColor(uRandom, 0, 0, 0, 0)
    set randomEmptyFrame=CreateDestructable('B02C', x, y, 180.0, 0.13, 1)
    set randomPicture=CreateDestructable('B02M', x, y, 180.0, 0.12, 1)
    
    
    //确定图标
    set x=centralX + 10.0
    set y=centralY - 55.0
    set uConfirm=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE), 'e004', x, y, 0.0)
    call SetUnitVertexColor(uConfirm, 0, 0, 0, 0)
    set confirmEmptyFrame=CreateDestructable('B02C', x, y, 180.0, 0.13, 1)
    set confirmPicture=CreateDestructable('B02G', x, y, 180.0, 0.12, 1)
    
    
    //VS图标
    set x=centralX + 0.5
    set y=centralY - 14.0
    set VSPicture=CreateDestructable('B01Y', x, y, 180.0, 0.12, 1)
    
    //创建中立阵营
    call CI_createDest(centralX , centralY , 10 , 0 , - 60 , 42)
    //创建海军阵营
    call CI_createDest(centralX , centralY , 5 , 1 , - 110 , 10)
    //创建海贼阵营
    call CI_createDest(centralX , centralY , 5 , 2 , 50 , 10)
    
    
    
    //控制玩家的可视窗口
    call CI_contralWin()
    
    //控制玩家视角
    call TimerStart(tCamera, 0.2, false, function CI_timerCamera)
    
    
endfunction
//===========================================================================
function InitTrig_ChooseInterface takes nothing returns nothing
    set gg_trg_ChooseInterface=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_ChooseInterface, function Trig_ChooseInterfaceActions)
endfunction
//===========================================================================
// Trigger: CreatePanel
//===========================================================================
//TESH.scrollpos=9
//TESH.alwaysfold=0
function Trig_CreatePanelActions takes nothing returns nothing
    local integer i= 0
    local multiboarditem boardItem= null
    
    set ChooseHeroPanel=CreateMultiboard()
    call MultiboardSetColumnCount(ChooseHeroPanel, 1)
    call MultiboardSetRowCount(ChooseHeroPanel, 10)
    call MultiboardSetTitleText(ChooseHeroPanel, "英雄信息")
    call MultiboardSetTitleTextColor(ChooseHeroPanel, 255, 0, 0, 255)
    call MultiboardSetItemsWidth(ChooseHeroPanel, 0.07)
    set i=0
    loop
        set boardItem=MultiboardGetItem(ChooseHeroPanel, i, 0)
        if ( i < 5 ) then
            call MultiboardSetItemStyle(boardItem, true, false)
        else
            call MultiboardSetItemStyle(boardItem, true, true)
        endif
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    
     call MultiboardDisplay(ChooseHeroPanel, true)
    
    set boardItem=null
endfunction
//===========================================================================
function InitTrig_CreatePanel takes nothing returns nothing
    set gg_trg_CreatePanel=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_CreatePanel, function Trig_CreatePanelActions)
endfunction
//===========================================================================
// Trigger: ClickRandom
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_ClickRandomActions takes nothing returns nothing
    local player p= GetTriggerPlayer()
    local integer pId= GetPlayerId(p)
    local unit u= GetTriggerUnit()
    local unit lastUnit= null
    local integer index= 0
    local integer camp= 0
    local integer array iTemp
    local real x= 0
    local real y= 0
    
    if ( LoadBoolean(PlayerChosenHash, pId, 7) ) then
        //已经确认选取的英雄
        call debugText(4 , "您已经确选了英雄，无法再次选择")
        set p=null
        set u=null
        return
    endif
    
    if ( not LoadBoolean(PlayerChosenHash, pId, 9) ) then
        call SaveBoolean(PlayerChosenHash, pId, 9, true)
    endif
    
    //获取上一个点击的单位
    set lastUnit=LoadUnitHandle(PlayerChosenHash, pId, 5)
    //上一次点击选取也是随机单位
    if ( GetUnitTypeId(lastUnit) == 'e003' ) then
        set p=null
        set u=null
        set lastUnit=null
        return
    endif
    
    
    
    set camp=gainIInUnit("camp" , lastUnit)
    set index=gainIInUnit("index" , lastUnit)
    //设置上一个被选择单位可以被选择
    call SaveBoolean(UnitChosenHash[camp], index, 0, false)
    //把上一个被选择单位对应的英雄，添加回其对应的单位池中
    set iTemp[0]=LoadInteger(chosenHeroInfo[camp], index, 1)
    call UnitPoolAddUnitType(ChosenHeroPool[camp], iTemp[0], 1.0)
    //删除当前选择的英雄头像和暗图标
    call RemoveDestructable(LoadDestructableHandle(PlayerChosenHash, pId, 1))
    call RemoveDestructable(LoadDestructableHandle(PlayerChosenHash, pId, 2))
    
    //设置为随机选择英雄
    call SaveBoolean(PlayerChosenHash, pId, 8, true)
    //保存当前单位
    call SaveUnitHandle(PlayerChosenHash, pId, 5, uRandom)
    //生成当前选择的随机问号头像
    set x=LoadReal(PlayerChosenHash, pId, 11)
    set y=LoadReal(PlayerChosenHash, pId, 12)
    call SaveDestructableHandle(PlayerChosenHash, pId, 1, CreateDestructable('B02M', x, y, 180.0, 0.12, 1))
    
    set u=null
    set lastUnit=null
    set p=null
endfunction
//=================
function CR_registFilter takes nothing returns boolean
    local unit u= GetFilterUnit()
    local integer uType= GetUnitTypeId(u)
    
    set u=null
    return uType == 'e003'
    
endfunction
//===========================================================================
function InitTrig_ClickRandom takes nothing returns nothing
    local integer i=0
    set gg_trg_ClickRandom=CreateTrigger()
    call DoNothing()
    loop
        call TriggerRegisterPlayerUnitEvent(gg_trg_ClickRandom, Player(i), EVENT_PLAYER_UNIT_SELECTED, Condition(function CR_registFilter))
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    call TriggerAddAction(gg_trg_ClickRandom, function Trig_ClickRandomActions)
endfunction
//===========================================================================
// Trigger: ClickConfirm
//===========================================================================
//TESH.scrollpos=119
//TESH.alwaysfold=0

//为选取的英雄添加指定单位事件
function CC_registerEvent takes unit u returns nothing
    
    //注册建筑智能保护英雄
    call TriggerRegisterUnitEvent(gg_trg_TowerProtect, u, EVENT_UNIT_DAMAGED)
    //注册助攻伤害记录
    call TriggerRegisterUnitEvent(gg_trg_AssistDamage, u, EVENT_UNIT_DAMAGED)
endfunction
function Trig_ClickConfirmActions takes nothing returns nothing
    local player p= GetTriggerPlayer()
    local integer pId= GetPlayerId(p)
    local real x= 0
    local real y= 0
    local integer camp= 0
    local integer index= 0
    local integer ut= 0
    local unit array uTemp
    local integer array iTemp
    
    if ( not LoadBoolean(PlayerChosenHash, pId, 9) ) then
        //没有点击确认图标外的图标
        set p=null
        return
    endif
    
    //设置确定选择英雄
    call SaveBoolean(PlayerChosenHash, pId, 7, true)
    
    //准备生成英雄
    if ( IsPlayerAlly(p, Player(NAVY_PLAYER)) ) then
        //海军的盟友
        set x=GetRectCenterX(gg_rct_NavyHeroBirth)
        set y=GetRectCenterX(gg_rct_NavyHeroBirth)
    else
        set x=GetRectCenterX(gg_rct_PirateHeroBirth)
        set y=GetRectCenterX(gg_rct_PirateHeroBirth)
    endif
    
    if ( LoadBoolean(PlayerChosenHash, pId, 8) ) then
    //生成随机英雄
        //生成随机阵营
        set iTemp[0]=R2I(GetRandomReal(0.0, 0.29) * 10)
        set uTemp[0]=PlaceRandomUnit(ChosenHeroPool[iTemp[0]], p, x, y, 0)
        if ( uTemp[0] == null ) then
            call debugText(14 , "无法随机生成单位")
        endif
        call debugText(14 , I2S(iTemp[0]))
        //保存玩家对应的英雄
        set HERO_OF_PLAYER[pId]=uTemp[0]
        
        //把英雄类型从单位池中删除
        set ut=GetUnitTypeId(uTemp[0])
        //call debugText(14,I2S(GetUnitTypeId(uTemp[0])))
        call UnitPoolRemoveUnitType(ChosenHeroPool[iTemp[0]], ut)
        
        //随机到的英雄，无法再被手选
        set uTemp[1]=gainUInInteger("indexUnit" , ut)
        set camp=gainIInUnit("camp" , uTemp[1])
        set index=gainIInUnit("index" , uTemp[1])
        call SaveUnitHandle(PlayerChosenHash, pId, 5, uTemp[1])
        call SaveBoolean(UnitChosenHash[camp], index, 0, true)
        
       
        //保存选择英雄的头像的字符串
        call SaveStr(PlayerChosenHash, pId, 13, LoadStr(chosenHeroInfo[camp], index, 17))
        
    else
    //生成手选英雄给予玩家
        set uTemp[0]=LoadUnitHandle(PlayerChosenHash, pId, 5)
        set camp=gainIInUnit("camp" , uTemp[0])
        set index=gainIInUnit("index" , uTemp[0])
        set ut=LoadInteger(chosenHeroInfo[camp], index, 1)
        //保存选择英雄的头像的字符串
        call SaveStr(PlayerChosenHash, pId, 13, LoadStr(chosenHeroInfo[camp], index, 17))
       
        //生成玩家指定英雄
        set HERO_OF_PLAYER[pId]=CreateUnit(p, ut, x, y, 0)
        
        //无法再 -repick
        call SaveBoolean(PlayerChosenHash, pId, 10, true)
        
        //调整玩家金钱
        call increasePlayerCurrentLumber(Player(pId) , HAND_MONEY)
    endif
    
    
    
    //个人完成英雄选择
    set isFinishOfChoice[pId]=true
    //解放视角
    call resetCameraAllMap(Player(pId))
    if ( GetLocalPlayer() == p ) then
        call PanCameraToTimed(x, y, 0.1)
    endif
    call FogModifierStop(fogModifier[pId])
    
    //设置确认英雄玩家框
    set x=LoadReal(PlayerChosenHash, pId, 11)
    set y=LoadReal(PlayerChosenHash, pId, 12)
    call SaveDestructableHandle(PlayerChosenHash, pId, 4, CreateDestructable('B02L', x, y, 180.0, 0.12, 1))
    //设置英雄被选中的交叉
    set x=LoadReal(UnitChosenHash[camp], index, 3)
    set y=LoadReal(UnitChosenHash[camp], index, 4)
    call SaveDestructableHandle(PlayerChosenHash, pId, 3, CreateDestructable('B00H', x, y, 180.0, 0.12, 1))
    
    
    //更换多面板
    if ( GetLocalPlayer() == p ) then
        call MultiboardDisplay(ChooseHeroPanel, false)
        call MultiboardDisplay(normalHeroPanel_mb, true)
    endif
    call TriggerExecute(gg_trg_InitPanel)
    
    //为防御塔保护英雄，注册事件
    call CC_registerEvent(HERO_OF_PLAYER[pId])
    
    set uTemp[0]=null
    set uTemp[1]=null
    set p=null
endfunction
//===========================RegisterFilter
function CC_registFilter takes nothing returns boolean
    local unit u= GetFilterUnit()
    local integer uType= GetUnitTypeId(u)
    
    set u=null
    return uType == 'e004'
    
endfunction
//===========================================================================
function InitTrig_ClickConfirm takes nothing returns nothing
    local integer i= 0
    set gg_trg_ClickConfirm=CreateTrigger()
    call DoNothing()
    loop
        call TriggerRegisterPlayerUnitEvent(gg_trg_ClickConfirm, Player(i), EVENT_PLAYER_UNIT_SELECTED, Condition(function CC_registFilter))
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    call TriggerAddAction(gg_trg_ClickConfirm, function Trig_ClickConfirmActions)
endfunction
//===========================================================================
// Trigger: ClickHeroPict
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_ClickHeroPictActions takes nothing returns nothing
    local unit u= GetTriggerUnit()
    local integer camp= gainIInUnit("camp" , u)
    local integer index= gainIInUnit("index" , u)
    local player p= GetTriggerPlayer()
    local integer pId= GetPlayerId(p)
    local real x=0
    local real y= 0
    local unit array uTemp
    local integer array iTemp
    local integer i= 0
    local multiboarditem boardItem= null
    
    //已经确认了英雄的选择
    if ( LoadBoolean(PlayerChosenHash, pId, 7) ) then
        call DisplayTimedTextToPlayer(Player(pId), 0, 0, 4, "|cffff0000您已经确选了英雄，无法再次选择|r")
        set p=null
        set u=null
        return
    endif
    
    //该单位已经被选择
    if ( LoadBoolean(UnitChosenHash[camp], index, 0) ) then
        call DisplayTimedTextToPlayer(Player(pId), 0, 0, 4, "|cff00ff00该单位已被选择，无法再次选择|r")
        set p=null
        set u=null
        return
    endif
    
    //可以使用确定按钮
    if ( not LoadBoolean(PlayerChosenHash, pId, 9) ) then
        call SaveBoolean(PlayerChosenHash, pId, 9, true)
    endif
    
    //设置上一个被选择单位不再被选择
    set uTemp[0]=LoadUnitHandle(PlayerChosenHash, pId, 5)
    set iTemp[0]=gainIInUnit("camp" , uTemp[0])
    set iTemp[1]=gainIInUnit("index" , uTemp[0])
    call SaveBoolean(UnitChosenHash[iTemp[0]], iTemp[1], 0, false)
    //把上一个被选择单位对应的英雄，添加回其对应的单位池中
    set iTemp[2]=LoadInteger(chosenHeroInfo[iTemp[0]], iTemp[1], 1)
    call UnitPoolAddUnitType(ChosenHeroPool[iTemp[0]], iTemp[2], 1.0)
    
    //删除当前选择的英雄头像和暗图标
    call RemoveDestructable(LoadDestructableHandle(PlayerChosenHash, pId, 1))
    call RemoveDestructable(LoadDestructableHandle(PlayerChosenHash, pId, 2))
    
    //设置当前单位已被选择
    call SaveBoolean(UnitChosenHash[camp], index, 0, true)
    //保存当前单位
    call SaveUnitHandle(PlayerChosenHash, pId, 5, u)
    //设置不为随机选择英雄
    call SaveBoolean(PlayerChosenHash, pId, 8, false)
    //把当前被选择单位对应的英雄，从其对应的单位池中删除
    set iTemp[2]=LoadInteger(chosenHeroInfo[camp], index, 1)
    call UnitPoolRemoveUnitType(ChosenHeroPool[camp], iTemp[2])
    //生成当前选择的英雄头像和暗图标
    set x=LoadReal(PlayerChosenHash, pId, 11)
    set y=LoadReal(PlayerChosenHash, pId, 12)
    set iTemp[3]=LoadInteger(chosenHeroInfo[camp], index, 0)
    call SaveDestructableHandle(PlayerChosenHash, pId, 1, CreateDestructable(iTemp[3], x, y, 180.0, 0.12, 1))
    set x=LoadReal(UnitChosenHash[camp], index, 3)
    set y=LoadReal(UnitChosenHash[camp], index, 4)
    call SaveDestructableHandle(PlayerChosenHash, pId, 2, CreateDestructable('B02J', x, y, 180.0, 0.12, 1))
    //生成特效单位
    set uTemp[1]=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE), 'e005', x, y, 0)
    call UnitApplyTimedLife(uTemp[1], '0', 0.4)
    call SetUnitVertexColor(uTemp[1], 0, 0, 0, 255)
    if ( GetLocalPlayer() != p ) then
        call ShowUnit(uTemp[1], false)
    endif
    
    
    //处理多面板信息显示
    set i=0
    loop
        set boardItem=MultiboardGetItem(ChooseHeroPanel, i, 0)
        if ( GetLocalPlayer() == p ) then
            call MultiboardSetItemValue(boardItem, LoadStr(chosenHeroInfo[camp], index, i + 2))
        endif
        set i=i + 1
        exitwhen i > 5 - 1
    endloop
    
    set boardItem=null
    set uTemp[0]=null
    set uTemp[1]=null
    set uTemp[2]=null
    set uTemp[3]=null
    set p=null
    set u=null
endfunction
//=================boolexpr filter
function CH_registFilter takes nothing returns boolean
    local unit u= GetFilterUnit()
    local integer uType= GetUnitTypeId(u)
    
    set u=null
    return uType == 'e000'
    
endfunction
//===========================================================================
function Trig_ClickHeroPictConditions takes nothing returns boolean
    return true
endfunction
function InitTrig_ClickHeroPict takes nothing returns nothing
    local integer i= 0
    set gg_trg_ClickHeroPict=CreateTrigger()
    call DoNothing()
    loop
        call TriggerRegisterPlayerUnitEvent(gg_trg_ClickHeroPict, Player(i), EVENT_PLAYER_UNIT_SELECTED, Condition(function CH_registFilter))
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    call TriggerAddAction(gg_trg_ClickHeroPict, function Trig_ClickHeroPictActions)
endfunction
//===========================================================================
// Trigger: Repick
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0

function Trig_RepickConditions takes nothing returns boolean
    local player p= GetTriggerPlayer()
    local integer pId= GetPlayerId(p)
    local boolean b= LoadBoolean(PlayerChosenHash, pId, 8)
    local boolean b1= LoadBoolean(PlayerChosenHash, pId, 10)
    
    set p=null
    return b and not b1
    
endfunction
function Trig_RepickActions takes nothing returns nothing
    local player p= GetTriggerPlayer()
    local integer pId= GetPlayerId(p)
    local unit lastUnit= LoadUnitHandle(PlayerChosenHash, pId, 5)
    local integer camp= gainIInUnit("camp" , lastUnit)
    local integer index= gainIInUnit("index" , lastUnit)
    local integer ut= 0
    local unit array uTemp
    
    //删除英雄头像和暗图标
    call RemoveDestructable(LoadDestructableHandle(PlayerChosenHash, pId, 1))
    call RemoveDestructable(LoadDestructableHandle(PlayerChosenHash, pId, 2))
    call RemoveDestructable(LoadDestructableHandle(PlayerChosenHash, pId, 3))
    call RemoveDestructable(LoadDestructableHandle(PlayerChosenHash, pId, 4))
    call SaveBoolean(PlayerChosenHash, pId, 7, false)
    call SaveBoolean(PlayerChosenHash, pId, 10, true)
    
    //删除英雄，并且把英雄类型添加回单位池
    set ut=GetUnitTypeId(HERO_OF_PLAYER[pId])
    set uTemp[0]=gainUInInteger("indexUnit" , ut)
    set camp=gainIInUnit("camp" , uTemp[0])
    set index=gainIInUnit("index" , uTemp[0])
    call UnitPoolAddUnitType(ChosenHeroPool[camp], ut, 1.0)
    call SaveBoolean(UnitChosenHash[camp], index, 0, false)
    
    call RemoveUnit(HERO_OF_PLAYER[pId])
    
     //个人未完成英雄选择
    set isFinishOfChoice[pId]=false
    //锁定视角
    call lockCameraChooseHero(p , uCenter)
    call FogModifierStart(fogModifier[pId])
    //更换多面板
    if ( GetLocalPlayer() == p ) then
        call MultiboardDisplay(normalHeroPanel_mb, false)
        call MultiboardDisplay(ChooseHeroPanel, true)
    endif
    
    //调整玩家金钱
    call increasePlayerCurrentLumber(p , REPICK_MONEY)
    
    set uTemp[0]=null
    set p=null
endfunction
//===========================================================================
function InitTrig_Repick takes nothing returns nothing
    local integer i= 0
    set gg_trg_Repick=CreateTrigger()
    call DoNothing()
    loop
        call TriggerRegisterPlayerChatEvent(gg_trg_Repick, Player(i), "-repick", true)
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    call TriggerAddCondition(gg_trg_Repick, Condition(function Trig_RepickConditions))
    call TriggerAddAction(gg_trg_Repick, function Trig_RepickActions)
endfunction
//===========================================================================
// Trigger: TurnToChoose
//===========================================================================
//TESH.scrollpos=4
//TESH.alwaysfold=0

function TTC_resetChoose takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer pKey= GetHandleId(t)
    local integer pId= LoadInteger(turnToChoose_ht, pKey, 0)
    local string s= LoadStr(turnToChoose_ht, pKey, 1)
    
    call enterMovieMode(false , Player(pId))
    call remindAllPlayers(3 , s)
    
    call DestroyTimer(t)
    set t=null
endfunction
//===================mai 动作
function Trig_TurnToChooseActions takes nothing returns nothing
    local timer array t
    local integer i= 1
    local real j= 14
    local integer pKey= 0
    local integer array iTemp
    local string array chat
    
    loop
        call enterMovieMode(true , Player(i))
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    
    //关闭通常模式时的选人，打开论选模式选人
    call EnableTrigger(gg_trg_ClickConfirmByTurn)
    
    call remindAllPlayers(3 , "|cffff0000请玩家一选择英雄|r\n\n|cff00ff004秒后授权其他玩家|r")
    set iTemp[0]=5
    set iTemp[1]=6
    set iTemp[2]=1
    set iTemp[3]=2
    set iTemp[4]=7
    set iTemp[5]=8
    set iTemp[6]=3
    set iTemp[7]=4
    set iTemp[8]=9
    set chat[0]="玩家6 " + getPlayerColorNameById(5) + " 获得|cffffff00【授权】|r"
    set chat[1]="玩家7 " + getPlayerColorNameById(6) + " 获得|cffffff00【授权】|r"
    set chat[2]="玩家2 " + getPlayerColorNameById(1) + " 获得|cffffff00【授权】|r"
    set chat[3]="玩家3 " + getPlayerColorNameById(2) + " 获得|cffffff00【授权】|r"
    set chat[4]="玩家8 " + getPlayerColorNameById(7) + " 获得|cffffff00【授权】|r"
    set chat[5]="玩家9 " + getPlayerColorNameById(8) + " 获得|cffffff00【授权】|r"
    set chat[6]="玩家4 " + getPlayerColorNameById(3) + " 获得|cffffff00【授权】|r"
    set chat[7]="玩家5 " + getPlayerColorNameById(4) + " 获得|cffffff00【授权】|r"
    set chat[8]="玩家10 " + getPlayerColorNameById(9) + " 获得|cffffff00【授权】|r"
    
    set i=0
    loop
        if ( GetPlayerSlotState(Player(iTemp[i])) == PLAYER_SLOT_STATE_PLAYING ) then
            set t[i]=CreateTimer()
            set pKey=GetHandleId(t[i])
            call SaveInteger(turnToChoose_ht, pKey, 0, iTemp[i])
            call SaveStr(turnToChoose_ht, pKey, 1, chat[i])
            call TimerStart(t[i], j, false, function TTC_resetChoose)
            set t[i]=null
        endif
        if ( GetPlayerSlotState(Player(iTemp[i + 1])) == PLAYER_SLOT_STATE_PLAYING ) then
            set t[i + 1]=CreateTimer()
            set pKey=GetHandleId(t[i + 1])
            call SaveInteger(turnToChoose_ht, pKey, 0, iTemp[i + 1])
            call SaveStr(turnToChoose_ht, pKey, 1, chat[i + 1])
            call TimerStart(t[i + 1], j, false, function TTC_resetChoose)
            set t[i + 1]=null
        endif
        set i=i + 2
        set j=j + 14
        exitwhen i > 9 - 1
    endloop
    
    
endfunction
//===========================================================================
function InitTrig_TurnToChoose takes nothing returns nothing
    set gg_trg_TurnToChoose=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_TurnToChoose, function Trig_TurnToChooseActions)
endfunction
//===========================================================================
// Trigger: UseTurnChoose
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0

function Trig_UseTurnChooseActions takes nothing returns nothing
    call TriggerExecute(gg_trg_TurnToChoose)
    
endfunction
//===========================================================================
function InitTrig_UseTurnChoose takes nothing returns nothing
    set gg_trg_UseTurnChoose=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_UseTurnChoose, function Trig_UseTurnChooseActions)
endfunction
//===========================================================================
// Trigger: NotifyPanel
//===========================================================================
//TESH.scrollpos=243
//TESH.alwaysfold=0

function NP_initAppelation takes nothing returns nothing
    set appellation[0]="炮灰海军"
    set appellation[1]="炮灰海贼"
    set appellation[2]="初涉大海" // 4
set appellation[3]="一船之长" // 5
set appellation[4]="独霸一方"
    set appellation[5]="超新星" // 7
set appellation[6]="|ff00ff00七武海|r"
    set appellation[7]="|ff0000ff四皇|r"
    set appellation[8]="|ffff0000世界最强|r" // 10
endfunction
function NP_initReliveTimer takes nothing returns nothing
    local integer i= 0
    set i=0
    loop
        set reliveHero_timer[i]=CreateTimer()
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
endfunction
function NP_initHeroPanel takes nothing returns nothing
//-英雄头像，玩家名称，当前称号，复活计时，大招CD，击杀，死亡，助攻，连杀，正/反,金币，赏金
    local integer i= 0
    
    set normalHeroPanel_mb=CreateMultiboard()
    
    set i=0
    loop
        call SaveStr(normalHeroPanel_ht, i, 0, LoadStr(PlayerChosenHash, i, 13)) //英雄头像
        call SaveStr(normalHeroPanel_ht, i, 1, GetPlayerName(Player(i))) //玩家名称
        call SaveInteger(normalHeroPanel_ht, i, 2, 0) //最大连杀
        call SaveTimerHandle(normalHeroPanel_ht, i, 3, null) //复活计时计时器
        call SaveTimerHandle(normalHeroPanel_ht, i, 4, null) //大招CD计时器
        call SaveInteger(normalHeroPanel_ht, i, 5, 0) //击杀
        call SaveInteger(normalHeroPanel_ht, i, 6, 0) //死亡
        call SaveInteger(normalHeroPanel_ht, i, 7, 0) //助攻
        call SaveInteger(normalHeroPanel_ht, i, 8, 0) //连杀
        call SaveInteger(normalHeroPanel_ht, i, 9, 0) //正补
        call SaveInteger(normalHeroPanel_ht, i, 10, 0) //反补
        call SaveInteger(normalHeroPanel_ht, i, 11, 0) //金币
        call SaveInteger(normalHeroPanel_ht, i, 12, 0) //赏金
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
endfunction
function NP_createPanle takes nothing returns nothing
//-(英雄头像)玩家名称，当前称号，复活计时，大招CD，击杀，死亡，助攻，连杀，正/反,金币，赏金
    local integer i= 0
    local multiboarditem mbi= null
    
    call MultiboardSetColumnCount(normalHeroPanel_mb, 11)
    call MultiboardSetRowCount(normalHeroPanel_mb, PLAYING_PLAYER + 2)
    
    call MultiboardSetTitleText(normalHeroPanel_mb, "英雄榜")
    call MultiboardSetTitleTextColor(normalHeroPanel_mb, 255, 0, 0, 255)
    //项目风格
    call MultiboardSetItemsStyle(normalHeroPanel_mb, true, false)
    set i=1
    loop
        set mbi=MultiboardGetItem(normalHeroPanel_mb, i, 0)
        call MultiboardSetItemStyle(mbi, true, true)
        call MultiboardSetItemWidth(mbi, 0.03)
        set mbi=MultiboardGetItem(normalHeroPanel_mb, i, 1)
        call MultiboardSetItemWidth(mbi, 0.02)
        set mbi=MultiboardGetItem(normalHeroPanel_mb, i, 2)
        call MultiboardSetItemWidth(mbi, 0.02)
        set mbi=MultiboardGetItem(normalHeroPanel_mb, i, 3)
        call MultiboardSetItemValueColor(mbi, 0, 0, 255, 255)
        call MultiboardSetItemWidth(mbi, 0.02)
        set mbi=MultiboardGetItem(normalHeroPanel_mb, i, 4)
        call MultiboardSetItemValueColor(mbi, 255, 0, 0, 255)
        call MultiboardSetItemWidth(mbi, 0.02)
        set mbi=MultiboardGetItem(normalHeroPanel_mb, i, 5)
        call MultiboardSetItemValueColor(mbi, 255, 153, 204, 255)
        call MultiboardSetItemWidth(mbi, 0.02)
        set mbi=MultiboardGetItem(normalHeroPanel_mb, i, 6)
        call MultiboardSetItemValueColor(mbi, 255, 163, 0, 255)
        call MultiboardSetItemWidth(mbi, 0.02)
        set mbi=MultiboardGetItem(normalHeroPanel_mb, i, 7)
        call MultiboardSetItemValueColor(mbi, 255, 104, 0, 255)
        call MultiboardSetItemWidth(mbi, 0.02)
        set mbi=MultiboardGetItem(normalHeroPanel_mb, i, 8)
        call MultiboardSetItemWidth(mbi, 0.025)
        set mbi=MultiboardGetItem(normalHeroPanel_mb, i, 9)
        call MultiboardSetItemValueColor(mbi, 255, 255, 0, 255)
        call MultiboardSetItemWidth(mbi, 0.025)
        set mbi=MultiboardGetItem(normalHeroPanel_mb, i, 10)
        call MultiboardSetItemValueColor(mbi, 255, 255, 0, 255)
        call MultiboardSetItemWidth(mbi, 0.025)
        
        set i=i + 1
        exitwhen i > PLAYING_PLAYER + 2
    endloop
    set mbi=MultiboardGetItem(normalHeroPanel_mb, panelVSRow, 0)
    call MultiboardSetItemStyle(mbi, true, false)
    
    //初始化第一行形象
    
    //玩家
    set mbi=MultiboardGetItem(normalHeroPanel_mb, 0, 0)
    call MultiboardSetItemValue(mbi, "玩家")
    call MultiboardSetItemWidth(mbi, 0.03)
    //称谓
    set mbi=MultiboardGetItem(normalHeroPanel_mb, 0, 1)
    call MultiboardSetItemValue(mbi, "称谓")
    call MultiboardSetItemWidth(mbi, 0.02)
    //复活计时
    set mbi=MultiboardGetItem(normalHeroPanel_mb, 0, 2)
    call MultiboardSetItemStyle(mbi, false, true)
    call MultiboardSetItemIcon(mbi, "ReplaceableTextures\\CommandButtons\\BTNAnkh.blp")
    call MultiboardSetItemWidth(mbi, 0.02)
    //大招计时
    set mbi=MultiboardGetItem(normalHeroPanel_mb, 0, 3)
    call MultiboardSetItemStyle(mbi, false, true)
    call MultiboardSetItemIcon(mbi, "ReplaceableTextures\\CommandButtons\\BTNCancel.blp")
    call MultiboardSetItemWidth(mbi, 0.02)
    //击杀
    set mbi=MultiboardGetItem(normalHeroPanel_mb, 0, 4)
    call MultiboardSetItemStyle(mbi, true, false)
    call MultiboardSetItemValue(mbi, "|cffff0000杀|r")
    call MultiboardSetItemValueColor(mbi, 255, 0, 0, 255)
    call MultiboardSetItemWidth(mbi, 0.02)
    //死亡
    set mbi=MultiboardGetItem(normalHeroPanel_mb, 0, 5)
    call MultiboardSetItemStyle(mbi, true, false)
    call MultiboardSetItemValue(mbi, "|cffff99cc死|r")
    call MultiboardSetItemValueColor(mbi, 255, 0, 0, 255)
    call MultiboardSetItemWidth(mbi, 0.02)
    //助攻
    set mbi=MultiboardGetItem(normalHeroPanel_mb, 0, 6)
    call MultiboardSetItemStyle(mbi, true, false)
    call MultiboardSetItemValue(mbi, "|cffff9900助|r")
    call MultiboardSetItemValueColor(mbi, 255, 0, 0, 255)
    call MultiboardSetItemWidth(mbi, 0.02)
    //连杀
    set mbi=MultiboardGetItem(normalHeroPanel_mb, 0, 7)
    call MultiboardSetItemStyle(mbi, true, false)
    call MultiboardSetItemValue(mbi, "|cffff6800连杀|r")
    call MultiboardSetItemValueColor(mbi, 255, 0, 0, 255)
    call MultiboardSetItemWidth(mbi, 0.02)
    //正反补
    set mbi=MultiboardGetItem(normalHeroPanel_mb, 0, 8)
    call MultiboardSetItemStyle(mbi, true, false)
    call MultiboardSetItemValue(mbi, "|cffffff00正|r/|cffff0000反|r")
    call MultiboardSetItemValueColor(mbi, 255, 0, 0, 255)
    call MultiboardSetItemWidth(mbi, 0.025)
    //金钱
    set mbi=MultiboardGetItem(normalHeroPanel_mb, 0, 9)
    call MultiboardSetItemStyle(mbi, false, true)
    call MultiboardSetItemIcon(mbi, "ReplaceableTextures\\CommandButtons\\BTNMGExchange.blp")
    call MultiboardSetItemWidth(mbi, 0.025)
    //赏金
    set mbi=MultiboardGetItem(normalHeroPanel_mb, 0, 10)
    call MultiboardSetItemStyle(mbi, false, true)
    call MultiboardSetItemIcon(mbi, "ReplaceableTextures\\CommandButtons\\DJ_Reward_Paper.blp")
    call MultiboardSetItemWidth(mbi, 0.025)
    
    call MultiboardDisplay(normalHeroPanel_mb, false)
    
    set mbi=null
endfunction
//刷新多面板
function flushPanel takes nothing returns nothing
//-(英雄头像)玩家名称，当前称号，复活计时，大招CD，击杀，死亡，助攻，连杀，正/反,金币，赏金
    local multiboarditem mbi= null
    local player p= null
    local integer i= 0
    local integer array iTemp
    local integer row= 0
    local timer t= null
    local real r= 0
    local player localP= GetLocalPlayer()
    
    //处理海军多面板部分
    set i=0
    loop
        if ( isPlayer[i] ) then
            set row=row + 1
            
            //称号
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 13)
            set iTemp[1]=LoadInteger(normalHeroPanel_ht, i, 2)
            if ( iTemp[0] > iTemp[1] and iTemp[0] >= 4 and iTemp[0] <= 10 ) then
                set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 1)
                call MultiboardSetItemValue(mbi, appellation[iTemp[0] - 2])
                call SaveInteger(normalHeroPanel_ht, i, 2, iTemp[0])
            endif
            
            //复活计时
            set t=LoadTimerHandle(normalHeroPanel_ht, i, 3)
            if ( t != null ) then
                set r=TimerGetRemaining(t)
                set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 2)
                if ( r < 0.5 ) then
                    call MultiboardSetItemValue(mbi, "Live")
                else
                    call MultiboardSetItemValue(mbi, I2S(R2I(r)))
                endif
                
            endif
            
            //大招CD
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 3)
            set t=LoadTimerHandle(normalHeroPanel_ht, i, 4)
            if ( IsPlayerAlly(Player(i), localP) ) then
                if ( t != null ) then
                    set r=TimerGetRemaining(t)
                    call MultiboardSetItemValue(mbi, R2S(r))
                else
                    call MultiboardSetItemValue(mbi, "0")
                endif
            endif
            
            //击杀
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 5)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 4)
            call MultiboardSetItemValue(mbi, I2S(iTemp[0]))
            
            //死亡
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 6)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 5)
            call MultiboardSetItemValue(mbi, I2S(iTemp[0]))
            
            //助攻
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 7)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 6)
            call MultiboardSetItemValue(mbi, I2S(iTemp[0]))
            
            //连杀
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 8)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 7)
            call MultiboardSetItemValue(mbi, I2S(iTemp[0]))
            
            //正反补
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 9)
            set iTemp[1]=LoadInteger(normalHeroPanel_ht, i, 10)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 8)
            call MultiboardSetItemValue(mbi, I2S(iTemp[0]) + "/" + I2S(iTemp[1]))
            
            //金币
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 11)
            //set iTemp[0] = GetPlayerState(Player(i),PLAYER_STATE_RESOURCE_GOLD)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 9)
            if ( IsPlayerAlly(Player(i), localP) ) then
                call MultiboardSetItemValue(mbi, I2S(iTemp[0]))
            endif
           
            //赏金
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 12)
            //set iTemp[0] = GetPlayerState(Player(i),PLAYER_STATE_RESOURCE_GOLD)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 10)
            call MultiboardSetItemValue(mbi, I2S(iTemp[0]))
            
        endif
        
        set i=i + 1
        exitwhen i > 5 - 1
    endloop
    
    //处理中间行
    set row=row + 1
    
    //处理海贼阵营
    //处理海军多面板部分
    set i=5
    loop
        if ( isPlayer[i] ) then
            set row=row + 1
            
            //称号
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 13)
            set iTemp[1]=LoadInteger(normalHeroPanel_ht, i, 2)
            if ( iTemp[0] > iTemp[1] and iTemp[0] >= 4 and iTemp[0] <= 10 ) then
                set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 1)
                call MultiboardSetItemValue(mbi, appellation[iTemp[0] - 2])
                call SaveInteger(normalHeroPanel_ht, i, 2, iTemp[0])
            endif
            //复活计时
            set t=LoadTimerHandle(normalHeroPanel_ht, i, 3)
            if ( t != null ) then
                set r=TimerGetRemaining(t)
                set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 2)
                if ( r < 0.5 ) then
                    call MultiboardSetItemValue(mbi, "Live")
                else
                    call MultiboardSetItemValue(mbi, R2S(r))
                endif
                
            endif
            
            //大招CD
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 3)
            set t=LoadTimerHandle(normalHeroPanel_ht, i, 4)
            if ( IsPlayerAlly(Player(i), localP) ) then
                if ( t != null ) then
                    set r=TimerGetRemaining(t)
                    call MultiboardSetItemValue(mbi, R2S(r))
                endif
            endif
            
            //击杀
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 5)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 4)
            call MultiboardSetItemValue(mbi, I2S(iTemp[0]))
            
            //死亡
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 6)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 5)
            call MultiboardSetItemValue(mbi, I2S(iTemp[0]))
            
            //助攻
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 7)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 6)
            call MultiboardSetItemValue(mbi, I2S(iTemp[0]))
            
            //连杀
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 8)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 7)
            call MultiboardSetItemValue(mbi, I2S(iTemp[0]))
            
            //正反补
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 9)
            set iTemp[1]=LoadInteger(normalHeroPanel_ht, i, 10)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 8)
            call MultiboardSetItemValue(mbi, I2S(iTemp[0]) + "/" + I2S(iTemp[1]))
            
            //金币
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 11)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 9)
            if ( IsPlayerAlly(Player(i), localP) ) then
                call MultiboardSetItemValue(mbi, I2S(iTemp[0]))
            endif
            
            //赏金
            set iTemp[0]=LoadInteger(normalHeroPanel_ht, i, 12)
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 10)
            call MultiboardSetItemValue(mbi, I2S(iTemp[0]))
            
        endif
        
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    
    set p=null
    set t=null
    set mbi=null
endfunction
function Trig_NotifyPanelActions takes nothing returns nothing
    local timer t= CreateTimer()
    
    //初始化称号:最大连杀超过4时，才会更换
    call NP_initAppelation()
    
    //初始化英雄复活计时器
    call NP_initReliveTimer()
    
    //初始化玩家列资料
    call NP_initHeroPanel()
    
    //创建显示的多面板
    call NP_createPanle()
    
    //定时刷新多面板
    call TimerStart(t, 0.5, true, function flushPanel)
    set t=null
endfunction
//===========================================================================
function InitTrig_NotifyPanel takes nothing returns nothing
    set gg_trg_NotifyPanel=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_NotifyPanel, function Trig_NotifyPanelActions)
endfunction
//===========================================================================
// Trigger: InitPanel
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_InitPanelActions takes nothing returns nothing
    local integer i= 0
    local integer row= 0
    local multiboarditem mbi= null
    
    set i=0
    loop
        if ( isPlayer[i] ) then
            set row=row + 1
            
            //玩家头像和名称
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 0)
            call MultiboardSetItemValue(mbi, GetPlayerName(Player(i)))
            call MultiboardSetItemIcon(mbi, LoadStr(PlayerChosenHash, i, 13))
        endif
        
        set i=i + 1
        exitwhen i > 5 - 1
    endloop
    
    //处理中间行
    set row=row + 1
    
    //处理海贼阵营
    //处理海军多面板部分
    set i=5
    loop
        if ( isPlayer[i] ) then
            set row=row + 1
            //玩家头像和名称
            set mbi=MultiboardGetItem(normalHeroPanel_mb, row, 0)
            call MultiboardSetItemValue(mbi, GetPlayerName(Player(i)))
            call MultiboardSetItemIcon(mbi, LoadStr(PlayerChosenHash, i, 13))
        endif
        
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    
    set mbi=null
endfunction
//===========================================================================
function InitTrig_InitPanel takes nothing returns nothing
    set gg_trg_InitPanel=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_InitPanel, function Trig_InitPanelActions)
endfunction
//===========================================================================
// Trigger: HeroRelive
//
// 复活：等级*2 + 分钟/2 + 杀人数 - 死亡数*（1.5+分钟/120） - 最大连杀*1.2      1--150
//===========================================================================
//TESH.scrollpos=22
//TESH.alwaysfold=0

function HR_heroRelive takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer tKey= GetHandleId(t)
    local timerdialog td= LoadTimerDialogHandle(SPELL_HS, tKey, 0)
    local integer pId= LoadInteger(SPELL_HS, tKey, 1)
    local unit hero= HERO_OF_PLAYER[pId]
    local real x= 0
    local real y= 0
    
    
    //清楚计时器窗口
    call DestroyTimerDialog(td)
    
    //复活英雄
    if ( isUnitDead(hero) ) then
        if ( pId < 5 ) then
            set x=GetRectCenterX(gg_rct_NavyHeroBirth)
            set y=GetRectCenterY(gg_rct_NavyHeroBirth)
        else
            set x=GetRectCenterX(gg_rct_PirateHeroBirth)
            set y=GetRectCenterY(gg_rct_PirateHeroBirth)
        endif
        
        call ReviveHero(hero, x, y, true)
    endif
    //保存复活计时器
    call SaveTimerHandle(normalHeroPanel_ht, pId, 3, null)
    
    call DestroyTimer(t)
    set t=null
    set td=null
    set hero=null
endfunction
//================main动作
function Trig_HeroReliveActions takes nothing returns nothing
    local unit u= GetTriggerUnit()
    local player p= GetTriggerPlayer()
    local integer pId= GetPlayerId(p)
    local timer t= CreateTimer()
    local timer lastTimer= LoadTimerHandle(normalHeroPanel_ht, pId, 3)
    local real remainingTime= 0
    local integer pKey= GetHandleId(t)
    local timerdialog td= null
    local real levelTime= I2R(unitLevel[pId]) * 2
    local real minTime= I2R(Sys_minute) / 2
    local real killTime= I2R(LoadInteger(normalHeroPanel_ht, pId, 5))
    local real deadTime= I2R(LoadInteger(normalHeroPanel_ht, pId, 6)) * ( 1.5 + I2R(Sys_minute) / 120 )
    local real maxTime= I2R(LoadInteger(normalHeroPanel_ht, pId, 2)) * 1.2
    
    local real reliveTime= levelTime + minTime + killTime - deadTime + maxTime
    
    if ( reliveTime > 150 ) then
        set reliveTime=150
    elseif ( reliveTime < 1 ) then
        set reliveTime=1
    endif
    
    //处理上一个复活计时器
    if ( lastTimer != null ) then
        set remainingTime=TimerGetRemaining(lastTimer)
        set reliveTime=reliveTime + remainingTime
        
        call DestroyTimer(lastTimer)
    endif
    
    //开启复活计时
    call TimerStart(t, reliveTime, false, function HR_heroRelive)
    //计时器窗口
    set td=CreateTimerDialog(t)
    call TimerDialogSetTitle(td, "英雄复活：")
    call TimerDialogSetTitleColor(td, 255, 0, 255, 255)
    call TimerDialogSetTimeColor(td, 255, 0, 0, 255)
    if ( p == GetLocalPlayer() ) then
        call TimerDialogDisplay(td, true)
    endif
    call SaveTimerDialogHandle(SPELL_HS, pKey, 0, td)
    
    call SaveInteger(SPELL_HS, pKey, 1, pId)
    
    //保存复活计时器
    call SaveTimerHandle(normalHeroPanel_ht, pId, 3, t)
    
    call debugText(4 , "马上复活：" + R2S(reliveTime))
    
    set td=null
    set p=null
    set u=null
    set lastTimer=null
    set t=null
endfunction
//===========================================================================
function HR_registerFilter takes nothing returns boolean
    local unit u= GetTriggerUnit()
    
    local boolean b= ( IsUnitType(u, UNIT_TYPE_HERO) and ( not IsUnitIllusion(u) ) and ( GetUnitAbilityLevel(u, 'A015') == 0 ) )
    
    set u=null
    
    return b
endfunction
function InitTrig_HeroRelive takes nothing returns nothing
    local integer i= 0
    set gg_trg_HeroRelive=CreateTrigger()
    call DoNothing()
    loop
        call TriggerRegisterPlayerUnitEvent(gg_trg_HeroRelive, Player(i), EVENT_PLAYER_UNIT_DEATH, null)
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    call TriggerAddCondition(gg_trg_HeroRelive, Condition(function HR_registerFilter))
    call TriggerAddAction(gg_trg_HeroRelive, function Trig_HeroReliveActions)
endfunction
//===========================================================================
// Trigger: KillerHero
//
// 连续击杀还没有播放音效
//===========================================================================
//TESH.scrollpos=480
//TESH.alwaysfold=0


function KH_getAssistForce takes integer killerPId,integer killedPId,integer start,integer end,integer time,force f returns force
    local integer i= 0
    local integer currentTime= Sys_second + Sys_minute * 60
 local integer lastTime= 0
 local real allDamage= 0
 local real array damage
    local integer pKey= GetHandleId(f)
    
    set i=0
    loop
        //-1 标识当前的位置，没有英雄
        call SaveReal(killerAndAssister_ht, pKey, i, - 1)
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    
    set i=start
    loop
        if ( i != killerPId ) then
            //获取增益行为助攻玩家
            set lastTime=LoadInteger(playerkill_ht[killerPId], i, 0)
            if ( currentTime - lastTime < time ) then
            //目标玩家符合要求
                call ForceAddPlayer(f, Player(i))
                set allDamage=allDamage + LoadReal(playerkill_ht[killerPId], i, 1)
                set damage[i]=damage[i] + LoadReal(playerkill_ht[killerPId], i, 1)
                call SaveReal(killerAndAssister_ht, pKey, i, damage[i])
            endif
            //获取伤害行为助攻玩家
            set lastTime=LoadInteger(playerkill_ht[killedPId], i, 0)
            if ( currentTime - lastTime < 10 ) then
            //目标玩家符合要求
                if ( IsPlayerInForce(Player(i), f) ) then
                    call ForceAddPlayer(f, Player(i))
                endif
                set allDamage=allDamage + LoadReal(playerkill_ht[killedPId], i, 1)
                set damage[i]=damage[i] + LoadReal(playerkill_ht[killerPId], i, 1)
                call SaveReal(killerAndAssister_ht, pKey, i, damage[i])
            endif
        endif
        set i=i + 1
        exitwhen i > end - 1
    endloop
    
    call SaveReal(killerAndAssister_ht, pKey, 10, allDamage)
    
    return f
endfunction

function HK_playerAssistKillReward takes force f,integer killedPId,integer money returns nothing
    local integer pKey= GetHandleId(f)
    local unit deader= HERO_OF_PLAYER[killedPId]
    local player killedP= Player(killedPId)
    local player localP= GetLocalPlayer()
    local real rTemp= 0
    local integer i= 0
    local real allDamage= LoadReal(killerAndAssister_ht, pKey, 10) + 1
    local real proportion= 1
    local integer gold= 0
    local integer allLumber= 0
    local integer lumber= 0
    local texttag tag= CreateTextTag()
    local string s= "助攻： "
    
    //计算玩家木头奖励
    set allLumber=GetPlayerState(killedP, PLAYER_STATE_RESOURCE_LUMBER) * 3 / 10
    if ( allLumber < 50 ) then
        set allLumber=50
    elseif ( allLumber > 5000 ) then
        set allLumber=5000
    endif
    
    //计算助攻玩家的奖励
    set i=0
    loop
        set rTemp=LoadReal(killerAndAssister_ht, pKey, i)
        if ( rTemp != - 1 ) then
            set proportion=rTemp / allDamage
            if ( proportion > 0.6 ) then
                set proportion=0.6
            elseif ( proportion < 0.2 ) then
                set proportion=0.2
            endif
            set gold=R2I(proportion * I2R(money))
            if ( gold < 5 ) then
                set gold=5
            endif
            set lumber=R2I(proportion * I2R(allLumber))
            //给予助攻奖励
            call increasePlayerCurrentGold(Player(i) , gold)
            call increasePlayerCurrentLumber(Player(i) , lumber)
            
            //显示金币奖励
            call SetTextTagText(tag, "+ " + I2S(gold) + "$", 0.024)
            call SetTextTagPosUnit(tag, deader, 0.1)
            call SetTextTagColor(tag, 255, 255, 0, 255)
            call SetTextTagVelocity(tag, 0, 0.064)
            call SetTextTagPermanent(tag, false)
            call SetTextTagLifespan(tag, 1.2)
            if ( IsPlayerInForce(localP, bj_FORCE_PLAYER[i]) ) then
                call SetTextTagVisibility(tag, true)
            endif
            
            set s=s + setStringPlayerIdColor(i , GetPlayerName(Player(i))) + "  "
            
        endif
        
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    
    //显示助攻文字
    set i=0
    loop
        call DisplayTimedTextToPlayer(Player(i), 0, 0, 3, s)
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    set deader=null
    set tag=null
    set localP=null
    set killedP=null
endfunction

function HK_playerKillHeroReward takes integer killerPId,integer killedPId,boolean isOnly returns integer
    local integer i= 0
    local integer money= 0
    local integer mbase= 0
    local integer killCorrection= 0
    local integer minCorrection= 0
    local integer levelDeffer= unitLevel[killedPId] - unitLevel[killerPId]
    local integer killCount= LoadInteger(normalHeroPanel_ht, killedPId, 5)
    local integer deadCount= LoadInteger(normalHeroPanel_ht, killedPId, 6)
    local integer temp= 0
    local integer lumber= 0
    
    local player killerP= Player(killerPId)
    local player killedP= Player(killedPId)
    local string s= null
    local integer colorIndex= 0
    
    local texttag tag= CreateTextTag()
    local unit deader= HERO_OF_PLAYER[killedPId]
    local player localP= GetLocalPlayer()
    
    //计算玩家金钱奖励
    if ( isOnly ) then
        set mbase=250
        set killCorrection=12
        set minCorrection=3
    else
        set mbase=200
        set killCorrection=8
        set minCorrection=2
        set colorIndex=0
    endif
    set temp=mbase * ( 10 + levelDeffer ) / 10
    if ( temp < 0 ) then
        set temp=0
    endif
    set money=temp + killCount * killCorrection - deadCount * 10 + Sys_minute * minCorrection
    if ( money < 5 ) then
        set money=5
        set i=0
        loop
            call DisplayTimedTextToPlayer(Player(i), 0, 0, 2, setStringPlayerIdColor(killedPId , GetPlayerName(killedP)) + " |cffff0000已经不值钱啦！求你们别再杀啦！|r")
            set i=i + 1
            exitwhen i > 10 - 1
        endloop
    endif
    //计算玩家木头奖励
    set lumber=GetPlayerState(killedP, PLAYER_STATE_RESOURCE_LUMBER) * 3 / 10
    if ( lumber < 50 ) then
        set lumber=50
    elseif ( lumber > 5000 ) then
        set lumber=5000
    endif
    
    //给予击杀玩家奖励
    call increasePlayerCurrentGold(killerP , money)
    call increasePlayerCurrentLumber(killerP , lumber)
    
    //显示击杀玩家文字
    set s="玩家： " + setStringPlayerIdColor(killerPId , GetPlayerName(killerP)) + playerKillingWord[colorIndex] + setStringPlayerIdColor(killedPId , GetPlayerName(killedP)) + " !获得 |cffffff00" + I2S(money) + "$|r, |cff008000" + I2S(lumber) + "|r赏金!"
    set i=0
    loop
        call DisplayTimedTextToPlayer(Player(i), 0, 0, 3, s)
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    
    //显示击杀玩家奖励漂浮文字
    call SetTextTagText(tag, "+ " + I2S(money) + "$", 0.024)
    call SetTextTagPosUnit(tag, deader, 0.1)
    call SetTextTagColor(tag, 255, 255, 0, 255)
    call SetTextTagVelocity(tag, 0, 0.064)
    call SetTextTagPermanent(tag, false)
    call SetTextTagLifespan(tag, 1.2)
    if ( IsPlayerInForce(localP, bj_FORCE_PLAYER[killerPId]) ) then
        call SetTextTagVisibility(tag, true)
    endif
    
    set deader=null
    set killerP=null
    set killedP=null
    set localP=null
    set tag=null
    
    return money
endfunction

function HK_adjustPlayerKillHeroData takes integer killerPId,integer killedPId returns nothing
    local integer dead= LoadInteger(normalHeroPanel_ht, killedPId, 6) + 1
    local integer kill= LoadInteger(normalHeroPanel_ht, killerPId, 5) + 1
    local integer followKill= LoadInteger(normalHeroPanel_ht, killerPId, 8) + 1
    local integer maxKill= LoadInteger(normalHeroPanel_ht, killerPId, 2)
    
    //凶手
    call SaveInteger(normalHeroPanel_ht, killerPId, 5, kill)
    if ( followKill > maxKill and followKill >= 4 ) then
    //修正凶手的称号
        call SaveInteger(normalHeroPanel_ht, killedPId, 13, followKill)
    endif
    call SaveInteger(normalHeroPanel_ht, killedPId, 8, followKill)
    
    //被害者
    call SaveInteger(normalHeroPanel_ht, killedPId, 6, dead)
    call SaveInteger(normalHeroPanel_ht, killedPId, 8, 0)
endfunction
//玩家被非玩家击杀
function HK_adjustPlayerKillHeroDataNoPlayer takes integer killedPId returns nothing
    local integer dead= LoadInteger(normalHeroPanel_ht, killedPId, 6) + 1
    
    call SaveInteger(normalHeroPanel_ht, killedPId, 6, dead)
    call SaveInteger(normalHeroPanel_ht, killedPId, 8, 0)
endfunction

function HK_adjustPlayerAssistKillData_forceDo takes nothing returns nothing
    local player p= GetEnumPlayer()
    local integer pId= GetPlayerId(p)
    local integer assist= LoadInteger(normalHeroPanel_ht, pId, 7) + 1
    
    call SaveInteger(normalHeroPanel_ht, pId, 8, assist)
    
    set p=null
endfunction
function HK_adjustPlayerAssistKillData takes force f returns nothing
    call ForForce(f, function HK_adjustPlayerAssistKillData_forceDo)
endfunction

function KH_shutDownKill takes integer killerPId,integer killedPId returns nothing
    local integer i= 0
    local integer array iTemp
    local string s= ""
    local player killerP= Player(killerPId)
    local player killedP= Player(killedPId)
    
    set iTemp[0]=LoadInteger(normalHeroPanel_ht, killedPId, 8)
    if ( iTemp[0] >= 4 ) then
        set iTemp[1]=iTemp[0] * iTemp[0] * 8
        if ( iTemp[1] > 1600 ) then
            set iTemp[1]=1600
        endif
        call increasePlayerCurrentGold(killerP , iTemp[1])
        if ( iTemp[0] > 10 ) then
            set iTemp[0]=10
        endif
        
        set i=0
        loop
            call DisplayTimedTextToPlayer(Player(i), 0, 0, 4, setStringPlayerIdColor(killerPId , GetPlayerName(killerP)) + " 终结 " + setStringPlayerIdColor(killedPId , GetPlayerName(killedP)) + appellation[iTemp[0] - 2])
            set i=i + 1
            exitwhen i > 10 - 1
        endloop
    endif
endfunction
 
function KH_continuousKill_timerDo takes nothing returns nothing
    local integer array iTemp
    local timer t= GetExpiredTimer()
    local integer pId= LoadInteger(killerAndAssister_ht, GetHandleId(t), 0)
    set iTemp[0]=LoadInteger(normalHeroPanel_ht, pId, 15) - 1
    if ( iTemp[0] == 0 ) then
        call SaveInteger(normalHeroPanel_ht, pId, 14, 0)
    endif
    
    call FlushChildHashtable(killerAndAssister_ht, GetHandleId(t))
    call DestroyTimer(t)
    set t=null
endfunction
function KH_continuousKill takes integer killerPId returns nothing
    local string s= ""
 local timer t= CreateTimer()
    local integer array iTemp
    local integer i= 0
    local integer time= 12 + 2 * LoadInteger(normalHeroPanel_ht, killerPId, 14)
    local player killerP= Player(killerPId)
    
    set iTemp[0]=LoadInteger(normalHeroPanel_ht, killerPId, 14) + 1
    set time=time + 2
    call SaveInteger(normalHeroPanel_ht, killerPId, 14, iTemp[0])
    set iTemp[1]=LoadInteger(normalHeroPanel_ht, killerPId, 15) + 1
    call SaveInteger(normalHeroPanel_ht, killerPId, 15, iTemp[1])
    call SaveInteger(killerAndAssister_ht, GetHandleId(t), 0, killerPId)
    call TimerStart(t, I2R(time), false, function KH_continuousKill_timerDo)
    
    if ( iTemp[0] >= 6 ) then
        set s=setStringPlayerIdColor(killerPId , GetPlayerName(killerP)) + "成功完成|cffff0000 封神战！！|r"
    elseif ( iTemp[0] == 5 ) then
        set s=setStringPlayerIdColor(killerPId , GetPlayerName(killerP)) + "获得一次|cffff0000 五杀！|r"
    elseif ( iTemp[0] == 4 ) then
        set s=setStringPlayerIdColor(killerPId , GetPlayerName(killerP)) + "完成|cffff0000 四杀！|r"
    elseif ( iTemp[0] == 3 ) then
        set s=setStringPlayerIdColor(killerPId , GetPlayerName(killerP)) + "完成|cffff0000 三杀！|r"
    elseif ( iTemp[0] == 2 ) then
        set s=setStringPlayerIdColor(killerPId , GetPlayerName(killerP)) + "获得|cffff0000 双杀！|r"
    endif
    if ( s != "" ) then
        set i=0
        loop
            call DisplayTimedTextToPlayer(Player(i), 0, 0, 4, s)
            set i=i + 1
            exitwhen i > 10 - 1
        endloop
    endif
    
    set killerP=null
    set t=null
endfunction
//============================main Action
function Trig_KillerHeroActions takes nothing returns nothing
 local integer i= 0
 local integer currentTime= Sys_second + Sys_minute * 60
 local integer lastTime= 0
 local real allDamage= 0
 local real array damage
 local unit killer= GetKillingUnit()
 local player killerP= GetOwningPlayer(killer)
 local integer killerPId= GetPlayerId(killerP)
 local unit killed= GetTriggerUnit()
 local player killedP= GetOwningPlayer(killed)
 local integer killedPId= GetPlayerId(killedP)
		
 local force f= CreateForce()
    local integer time= 12 + 2 * LoadInteger(normalHeroPanel_ht, killerPId, 14)
    local integer array iTemp
    local integer count= 0
    local integer money= 0
	
	//获取助攻玩家
	if ( killerPId < 10 ) then
    //当前击杀玩家为正常玩家
        if ( killerPId < 5 ) then
            set f=KH_getAssistForce(killerPId , killedPId , 0 , 5 , time , f)
        else
            set f=KH_getAssistForce(killerPId , killedPId , 5 , 10 , time , f)
        endif
    elseif ( killerPId == 10 ) then
    //当前击杀玩家为海军玩家
        set f=KH_getAssistForce(killerPId , killedPId , 0 , 5 , time , f)
    elseif ( killerPId == 11 ) then
    //当前击杀玩家为海贼玩家
        set f=KH_getAssistForce(killerPId , killedPId , 5 , 10 , time , f)
    else
    //当前击杀玩家为野怪单位
        if ( killedPId >= 5 ) then
        //当前击杀玩家为海军阵营
            set f=KH_getAssistForce(killerPId , killedPId , 0 , 5 , time , f)
        else
        //当前击杀玩家为海贼阵营
            set f=KH_getAssistForce(killerPId , killedPId , 5 , 10 , time , f)
        endif
    endif
	
    set count=CountPlayersInForceBJ(f)
    call debugText(4 , "玩家组人数：" + I2S(count))
    if ( count == 0 ) then
    //单杀
        if ( killerPId >= 10 ) then
        //当前击杀玩家为非正常玩家
        endif
        //处理击杀者的奖励与显示
        call HK_playerKillHeroReward(killerPId , killedPId , true)
    else
    //协助击杀
        if ( killerPId >= 10 ) then
        //当前击杀玩家为非正常玩家
            set i=0
            loop
                call DisplayTimedTextToPlayer(Player(i), 0, 0, 3, "玩家：" + GetPlayerName(killerP) + " 击毙 " + GetPlayerName(killedP))
                set i=i + 1
                exitwhen i > 10 - 1
            endloop
            set money=HK_playerKillHeroReward(killedPId , killedPId , false)
        else
            set money=HK_playerKillHeroReward(killerPId , killedPId , false)
        endif
        
        call HK_playerAssistKillReward(f , killedPId , money)
    endif
    
    //是否终结对面
    call KH_shutDownKill(killerPId , killedPId)
    
    
    //处理连杀情况
    call KH_continuousKill(killerPId)
    
    
	//处理玩家多面板显示数据，击杀，死亡，助攻，连杀，最大连杀次数
    if ( killerPId < 10 ) then
        call HK_adjustPlayerKillHeroData(killerPId , killedPId)
    else
        call HK_adjustPlayerKillHeroDataNoPlayer(killedPId)
    endif
    call HK_adjustPlayerAssistKillData(f)
    
    //对创建的force组进行数据排泄
    call FlushChildHashtable(killerAndAssister_ht, GetHandleId(f))
    
    
  
    set killer=null
    set killed=null
    set killerP=null
    set killedP=null
    call DestroyForce(f)
    set f=null
endfunction
//===========================================================================
function KH_condition takes nothing returns boolean
    local unit u= GetTriggerUnit()
    local boolean b= IsUnitType(u, UNIT_TYPE_HERO) and ( not IsUnitIllusion(u) ) and ( GetUnitAbilityLevel(u, 'A015') == 0 )
    
    set u=null
    return b
endfunction
function InitTrig_KillerHero takes nothing returns nothing
    local integer i= 0
    set gg_trg_KillerHero=CreateTrigger()
    call DoNothing()
    loop
        call TriggerRegisterPlayerUnitEvent(gg_trg_KillerHero, Player(i), EVENT_PLAYER_UNIT_DEATH, null)
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    call TriggerAddCondition(gg_trg_KillerHero, Condition(function KH_condition))
    call TriggerAddAction(gg_trg_KillerHero, function Trig_KillerHeroActions)
endfunction
//===========================================================================
// Trigger: AssistDamage
//===========================================================================
//TESH.scrollpos=16
//TESH.alwaysfold=0

function Trig_AssistDamageActions takes nothing returns nothing
    local unit triggerU= GetTriggerUnit()
    local player triggerP= GetTriggerPlayer()
    local integer triggerPId= GetPlayerId(triggerP)
    local unit source= GetEventDamageSource()
    local player sourceP= GetOwningPlayer(source)
    local integer sourcePId= GetPlayerId(sourceP)
    local real damage= GetEventDamage()
    local integer time= Sys_second + Sys_minute * 60
    
    call SaveInteger(playerkill_ht[triggerPId], sourcePId, 0, time)
    call SaveReal(playerkill_ht[triggerPId], sourcePId, 1, damage)
endfunction
//===========================================================================
function AD_eventCondition takes nothing returns boolean
    local unit u= GetEventDamageSource()
    local player p= GetOwningPlayer(u)
    local integer pId= GetPlayerId(p)
    
    local unit triggerU= GetTriggerUnit()
    local boolean b= ( pId >= 0 ) and ( pId < 10 ) and ( not IsUnitAlly(triggerU, p) )
    
    set u=null
    set p=null
    set triggerU=null
    return b
endfunction
function InitTrig_AssistDamage takes nothing returns nothing
    set gg_trg_AssistDamage=CreateTrigger()
    call DoNothing()
    //事件由选人是注册
    call TriggerAddCondition(gg_trg_AssistDamage, Condition(function AD_eventCondition))
    call TriggerAddAction(gg_trg_AssistDamage, function Trig_AssistDamageActions)
endfunction
//===========================================================================
// Trigger: killAndDeny
//===========================================================================
//TESH.scrollpos=75
//TESH.alwaysfold=0

function Trig_killAndDenyActions takes nothing returns nothing
    local unit deader= GetTriggerUnit()
    local integer ut= GetUnitTypeId(deader)
    local unit killer= GetKillingUnit()
    local player kP= GetOwningPlayer(killer)
    local integer pId= GetPlayerId(kP)
    local player localP= GetLocalPlayer()
    local integer kPId= GetPlayerId(kP)
    local integer array iTemp
    local string word= null
    local texttag tag= CreateTextTag()
    
    
    if ( IsUnitAlly(deader, kP) ) then
    //反补友军
        //反补数量 +1
        set iTemp[0]=LoadInteger(normalHeroPanel_ht, kPId, 10)
        set iTemp[0]=iTemp[0] + 1
        call SaveInteger(normalHeroPanel_ht, kPId, 10, iTemp[0])
        
        //显示反补话语
        set iTemp[1]=GetRandomInt(0, 2)
        call SetTextTagText(tag, denyWord[iTemp[1]], 0.023)
        call SetTextTagPosUnit(tag, deader, 0)
        call SetTextTagColor(tag, 255, 0, 0, 255)
        call SetTextTagVisibility(tag, true)
        call SetTextTagPermanent(tag, false)
        call SetTextTagLifespan(tag, 1)
        
        //反补赏金增加
        call increasePlayerCurrentLumber(kP , 3)
        
    else
    //正补
        //正补数量 +1
        set iTemp[0]=LoadInteger(normalHeroPanel_ht, kPId, 9)
        set iTemp[0]=iTemp[0] + 1
        call SaveInteger(normalHeroPanel_ht, kPId, 9, iTemp[0])
        
        //正补金钱增加
        set iTemp[3]=LoadInteger(unitMenoy_ht, ut, 0) + Sys_minute / 3
        call increasePlayerCurrentGold(kP , iTemp[3])
        
        //显示金币获取文字
        call SetTextTagText(tag, "+ " + I2S(iTemp[3]) + "$", 0.024)
        call SetTextTagPosUnit(tag, deader, 0.1)
        call SetTextTagColor(tag, 255, 255, 0, 255)
        call SetTextTagVelocity(tag, 0, 0.064)
        call SetTextTagPermanent(tag, false)
        call SetTextTagLifespan(tag, 1.2)
        if ( IsPlayerInForce(localP, FORCE_PLAYER[pId]) ) then
            call SetTextTagVisibility(tag, true)
        else
            call SetTextTagVisibility(tag, false)
        endif
        
        //正补赏金增加
        set iTemp[3]=LoadInteger(unitMenoy_ht, ut, 1)
        call increasePlayerCurrentLumber(kP , iTemp[3])
    endif
    
    set deader=null
    set killer=null
    set kP=null
    set localP=null
    set tag=null
endfunction
//===========================================================================

function KAD_registerFilter takes nothing returns boolean
    local unit killer= GetKillingUnit()
    local player kP= GetOwningPlayer(killer)
    local integer kPId= GetPlayerId(kP)
    local unit u= GetTriggerUnit()
    local boolean b= ( not IsUnitType(u, UNIT_TYPE_HERO) ) and ( not IsUnitType(u, UNIT_TYPE_STRUCTURE) ) and kPId >= 0 and kPId < 10 and ( killer != null )
    
    set u=null
    set kP=null
    set killer=null
    
    return b
endfunction
function InitTrig_killAndDeny takes nothing returns nothing
    local integer i= 0
    set gg_trg_killAndDeny=CreateTrigger()
    call DoNothing()
    loop
        call TriggerRegisterPlayerUnitEvent(gg_trg_killAndDeny, Player(i), EVENT_PLAYER_UNIT_DEATH, null)
        set i=i + 1
        exitwhen i > 16 - 1
    endloop
    call TriggerAddCondition(gg_trg_killAndDeny, Condition(function KAD_registerFilter))
    call TriggerAddAction(gg_trg_killAndDeny, function Trig_killAndDenyActions)
endfunction
//===========================================================================
// Trigger: AttackAlly
//===========================================================================
//TESH.scrollpos=41
//TESH.alwaysfold=0

function Trig_AttackAllyActions takes nothing returns nothing
    local unit atter= GetAttacker()
    local unit atteder= GetTriggerUnit()
    local player p= GetOwningPlayer(atteder)
    local real array rTemp
    
    if ( IsUnitType(atteder, UNIT_TYPE_HERO) or IsUnitType(atteder, UNIT_TYPE_STRUCTURE) ) then
    //被攻击者为英雄或者建筑
        call IssueImmediateOrder(atter, "stop")
        
        set atter=null
        set atteder=null
        set p=null
        return
    endif
    
    set rTemp[0]=GetUnitState(atteder, UNIT_STATE_LIFE)
    set rTemp[1]=GetUnitState(atteder, UNIT_STATE_MAX_LIFE)
    if ( rTemp[0] > rTemp[1] * 0.3 ) then
        call IssueImmediateOrder(atter, "stop")
        
        set atter=null
        set atteder=null
        set p=null
        return
    endif
endfunction
//===========================================================================

function AK_triggerCondition takes nothing returns boolean
    local unit atter= GetAttacker()
    local unit atteder= GetTriggerUnit()
    local player p= GetOwningPlayer(atteder)
    local boolean b= false
    
    if ( IsUnitAlly(atter, p) ) then
        
        set b=true
    endif
    
    set atter=null
    set atteder=null
    set p=null
    
    return b
endfunction
function InitTrig_AttackAlly takes nothing returns nothing
    local integer i= 0
    set gg_trg_AttackAlly=CreateTrigger()
    call DoNothing()
    loop
        call TriggerRegisterPlayerUnitEvent(gg_trg_AttackAlly, Player(i), EVENT_PLAYER_UNIT_ATTACKED, null)
        set i=i + 1
        exitwhen i > 12 - 1
    endloop
    call TriggerAddCondition(gg_trg_AttackAlly, Condition(function AK_triggerCondition))
    call TriggerAddAction(gg_trg_AttackAlly, function Trig_AttackAllyActions)
endfunction
//===========================================================================
// Trigger: ForbidAttackTower
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_ForbidAttackTowerActions takes nothing returns nothing
endfunction
//===========================================================================
function InitTrig_ForbidAttackTower takes nothing returns nothing
    set gg_trg_ForbidAttackTower=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerUnitEvent(gg_trg_ForbidAttackTower, Player(10), EVENT_PLAYER_UNIT_ATTACKED, null)
    call TriggerAddAction(gg_trg_ForbidAttackTower, function Trig_ForbidAttackTowerActions)
endfunction
//===========================================================================
// Trigger: DialogBox
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_DialogBoxActions takes nothing returns nothing
    
    call DialogSetMessage(gameDialog, "|cffff0000请|r|cffee2200选|r|cffdd4400择|r|cffcc6600游|r|cffbb8800戏|r|cffaaaa00模|r|cff99cc00式|r")
    set gameDialogButton[0]=DialogAddButton(gameDialog, "|cff00ff00全阵营模式|r", 0)
    set gameDialogButton[1]=DialogAddButton(gameDialog, "|cff0000ff单挑模式|r", 0)
    set gameDialogButton[2]=DialogAddButton(gameDialog, "|cffff0000比赛模式|r", 0)
    
    if ( ( GetPlayerController(Player(10)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(Player(10)) == PLAYER_SLOT_STATE_PLAYING ) ) then
        set gameDialog_player=Player(10)
        call DialogDisplay(gameDialog_player, gameDialog, true)
    elseif ( ( GetPlayerController(Player(0)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(Player(0)) == PLAYER_SLOT_STATE_PLAYING ) ) then
        set gameDialog_player=Player(0)
        call DialogDisplay(gameDialog_player, gameDialog, true)
    elseif ( ( GetPlayerController(Player(5)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(Player(5)) == PLAYER_SLOT_STATE_PLAYING ) ) then
        set gameDialog_player=Player(5)
        call DialogDisplay(gameDialog_player, gameDialog, true)
    elseif ( ( GetPlayerController(Player(1)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(Player(1)) == PLAYER_SLOT_STATE_PLAYING ) ) then
        set gameDialog_player=Player(1)
        call DialogDisplay(gameDialog_player, gameDialog, true)
    elseif ( ( GetPlayerController(Player(6)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(Player(6)) == PLAYER_SLOT_STATE_PLAYING ) ) then
        set gameDialog_player=Player(6)
        call DialogDisplay(gameDialog_player, gameDialog, true)
    endif
    
    //注册对话框点击事件
    call TriggerRegisterDialogEvent(gg_trg_DialogClick, gameDialog)
    
endfunction
//===========================================================================
function InitTrig_DialogBox takes nothing returns nothing
    set gg_trg_DialogBox=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_DialogBox, function Trig_DialogBoxActions)
endfunction
//===========================================================================
// Trigger: DialogClick
//===========================================================================
//TESH.scrollpos=6
//TESH.alwaysfold=0
//=====================================main动作
function Trig_DialogClickActions takes nothing returns nothing
    local button btn= GetClickedButton()
    local integer i= 0
    
    call DialogDisplay(gameDialog_player, gameDialog, false)
    if ( btn == gameDialogButton[0] ) then
    //全阵营模式
        call remindAllPlayers(2 , "当前游戏模式为  |cffff0000全阵营|r模式")
        set GAME_MODE=0
        
        //更换点击按钮方式
        call EnableTrigger(gg_trg_ClickConfirm)
    elseif ( btn == gameDialogButton[1] ) then
    //比赛模式
        call remindAllPlayers(2 , "当前游戏模式为  |cffff0000比赛|r模式")
        set GAME_MODE=1
    elseif ( btn == gameDialogButton[2] ) then
    //单挑模式
        call remindAllPlayers(2 , "当前游戏模式为  |cffff0000SOLO|r模式")
        call DialogSetMessage(gameDialog, "|cffff0000请|r|cffee2200选|r|cffdd4400择|r|cffcc6600单|r|cffbb8800挑|r|cffaaaa00方|r|cff99cc00式|r")
        set gameDialogButton[3]=DialogAddButton(gameDialog, "|cff00ff00上路PK|r", 0)
        set gameDialogButton[4]=DialogAddButton(gameDialog, "|cff0000ff中路PK|r", 0)
        set gameDialogButton[5]=DialogAddButton(gameDialog, "|cffff0000下路PK|r", 0)
        call DialogDisplay(gameDialog_player, gameDialog, true)
        set GAME_MODE=2
    elseif ( btn == gameDialogButton[3] ) then
    //上路PK
        set GAME_MODE=3
        call remindAllPlayers(2 , "当前游戏模式为  |cffff0000上路PK|r")
    elseif ( btn == gameDialogButton[4] ) then
    //上路PK
        set GAME_MODE=4
        call remindAllPlayers(2 , "当前游戏模式为  |cffff0000中路PK|r")
    elseif ( btn == gameDialogButton[5] ) then
    //上路PK
        set GAME_MODE=5
        call remindAllPlayers(2 , "当前游戏模式为  |cffff0000下路PK|r")
    endif
    
    if ( ( btn != gameDialogButton[2] ) and ( btn != gameDialogButton[1] ) ) then
    //普通模式
        //启动选人界面
        call TriggerExecute(gg_trg_startChosenInterface)
        //启动准备游戏计时器
        call TriggerExecute(gg_trg_GamePrepare)
    elseif ( btn == gameDialogButton[1] ) then
    //比赛模式
        call TriggerExecute(gg_trg_UseTurnChoose)
    endif
    
    set btn=null
endfunction
//===========================================================================
function InitTrig_DialogClick takes nothing returns nothing
    set gg_trg_DialogClick=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_DialogClick, function Trig_DialogClickActions)
endfunction
//===========================================================================
// Trigger: GamePrepare
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0

function GP_chooseHeroEnd takes nothing returns nothing
    local timer t= GetExpiredTimer()
    
    call DestroyTimerDialog(gamePrepare_td)
    call TriggerExecute(gg_trg_GameStart)
    
    call DestroyTimer(t)
    set t=null
endfunction
function Trig_GamePrepareActions takes nothing returns nothing
    local timer t= CreateTimer()
    
    call TimerStart(t, 90, false, function GP_chooseHeroEnd)
    set gamePrepare_td=CreateTimerDialog(t)
    call TimerDialogSetTitle(gamePrepare_td, "准备倒计时：")
    call TimerDialogDisplay(gamePrepare_td, true)
    call TimerDialogSetTimeColor(gamePrepare_td, 255, 0, 0, 255)
    call TimerDialogSetTitleColor(gamePrepare_td, 0, 0, 255, 255)
    call TimerDialogDisplay(gamePrepare_td, true)
    
    set t=null
endfunction
//===========================================================================
function InitTrig_GamePrepare takes nothing returns nothing
    set gg_trg_GamePrepare=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_GamePrepare, function Trig_GamePrepareActions)
endfunction
//===========================================================================
// Trigger: GameStart
//===========================================================================
//TESH.scrollpos=6
//TESH.alwaysfold=0

function GS_forceChooseHero takes nothing returns nothing
    local integer i= 0
    local boolean b= false
    local unit u= null
    local integer camp= 0
    local integer index= 0
    local integer ut= 0
    local integer array iTemp
    local unit array uTemp
    local real x= 0
    local real y= 0
    
    
    loop
        if ( IsPlayerAlly(Player(i), Player(NAVY_PLAYER)) ) then
        //海军的盟友
            set x=GetRectCenterX(gg_rct_NavyHeroBirth)
            set y=GetRectCenterX(gg_rct_NavyHeroBirth)
        else
            set x=GetRectCenterX(gg_rct_PirateHeroBirth)
            set y=GetRectCenterX(gg_rct_PirateHeroBirth)
        endif
        if ( GetPlayerSlotState(Player(i)) == PLAYER_SLOT_STATE_PLAYING ) then
            set b=LoadBoolean(PlayerChosenHash, i, 7)
            if ( not b ) then
                if ( LoadBoolean(PlayerChosenHash, i, 8) or ( not LoadBoolean(PlayerChosenHash, i, 9) ) ) then
                //随机给予英雄
                    set iTemp[0]=R2I(GetRandomReal(0.0, 0.29) * 10)
                    set uTemp[0]=PlaceRandomUnit(ChosenHeroPool[iTemp[0]], Player(i), x, y, 0)
                    //保存玩家对应的英雄
                    set HERO_OF_PLAYER[i]=uTemp[0]
                    //把英雄类型从单位池中删除
                    set ut=GetUnitTypeId(uTemp[0])
                    call UnitPoolRemoveUnitType(ChosenHeroPool[iTemp[0]], ut)
                    //随机到的英雄，无法再被手选
                    set uTemp[1]=gainUInInteger("indexUnit" , ut)
                    set camp=gainIInUnit("camp" , uTemp[1])
                    set index=gainIInUnit("index" , uTemp[1])
                    call SaveUnitHandle(PlayerChosenHash, i, 5, uTemp[1])
                    call SaveBoolean(UnitChosenHash[camp], index, 0, true)
       
                    //保存选择英雄的头像的字符串
                    call SaveStr(PlayerChosenHash, i, 13, LoadStr(chosenHeroInfo[camp], index, 17))
                else
                //给予手选英雄
                    set u=LoadUnitHandle(PlayerChosenHash, i, 5)
                    set camp=gainIInUnit("camp" , u)
                    set index=gainIInUnit("index" , u)
                    set ut=LoadInteger(chosenHeroInfo[camp], index, 1)
                    //保存选择英雄的头像的字符串
                    call SaveStr(PlayerChosenHash, i, 13, LoadStr(chosenHeroInfo[camp], index, 17))
                    //生成玩家指定英雄
                    set HERO_OF_PLAYER[i]=CreateUnit(Player(i), ut, x, y, 0)
                    //无法再 -repick
                    call SaveBoolean(PlayerChosenHash, i, 10, true)
                endif
            endif
        endif
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    
    set u=null
    set uTemp[0]=null
    set uTemp[1]=null
endfunction

function GP_gameStart takes nothing returns nothing
    local timer t= GetExpiredTimer()
    
    call remindAllPlayers(3 , "|cffff0000全军出击！！|r")
    call TimerDialogDisplay(gamePrepare_td, false)
    //游戏时间开始记录
    call TriggerExecute(gg_trg_GameTime)
    
    //开启刷野
    if ( GAME_MODE == 0 or GAME_MODE == 1 ) then
        call TriggerExecute(gg_trg_StateCreepsFlush)
    endif
    
    //强行选择英雄
    call GS_forceChooseHero()
    
    call DestroyTimer(t)
    set t=null
    call DestroyTimerDialog(gamePrepare_td)
    set gamePrepare_td=null
endfunction

function GP_flushSoldier takes nothing returns nothing
    local timer t= GetExpiredTimer()
    call remindAllPlayers(3 , "|cffff0000距离战士抵达战场还有30s！！|r")
    if ( GAME_MODE == 0 or GAME_MODE == 1 ) then
        call TriggerExecute(gg_trg_StateFlushSoldiersAll)
    elseif ( GAME_MODE == 3 ) then
        call TriggerExecute(gg_trg_CreateSoldiersUp)
    elseif ( GAME_MODE == 4 ) then
        call TriggerExecute(gg_trg_CreateSoldiersMin)
    elseif ( GAME_MODE == 5 ) then
        call TriggerExecute(gg_trg_CreateSoldiersDow)
    endif
    
    call DestroyTimer(t)
    set t=null
endfunction
function Trig_GameStartActions takes nothing returns nothing
    local timer t= CreateTimer()
    local timer t1= CreateTimer()
    
    call TimerStart(t, 60, false, function GP_gameStart)
    set gamePrepare_td=CreateTimerDialog(t)
    call TimerDialogSetTitle(gamePrepare_td, "全军出击倒计时：")
    call TimerDialogDisplay(gamePrepare_td, true)
    call TimerDialogSetTimeColor(gamePrepare_td, 255, 0, 0, 255)
    call TimerDialogSetTitleColor(gamePrepare_td, 0, 0, 255, 255)
    call TimerDialogDisplay(gamePrepare_td, true)
    
    call TimerStart(t1, 30, false, function GP_flushSoldier)
    
    set t=null
    set t1=null
endfunction
//===========================================================================
function InitTrig_GameStart takes nothing returns nothing
    set gg_trg_GameStart=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_GameStart, function Trig_GameStartActions)
endfunction
//===========================================================================
// Trigger: AbilityData
//===========================================================================
//TESH.scrollpos=83
//TESH.alwaysfold=0

function Trig_AbilityDataActions takes nothing returns nothing
    local integer i= 0
    local integer j= 0
    
    //初始化空格
    set space[0]="  "
    set space[1]="   "
    set space[2]="    "
    
    //初始化玩家的英雄的武器buff数值
    set i=0
    loop
        set j=0
        loop
            call SaveInteger(heroWeaponBuff_ht, i, j, 0)
            set j=j + 1
            exitwhen j > 16 - 1
        endloop
        set i=i + 1
        exitwhen i > 10 - 1
    endloop
    
    
    call saveIInInteger('A003' , "buffAbil" , 'H01E')
    call saveIInInteger('A00C' , "buffAbil" , 'H00L')
    call saveIInInteger('A00D' , "buffAbil" , 'H00M')
    call saveIInInteger('A00E' , "buffAbil" , 'H00N')
    call saveIInInteger('A00F' , "buffAbil" , 'H00O')
    call saveIInInteger('A00G' , "buffAbil" , 'H00P')
    call saveIInInteger('A00H' , "buffAbil" , 'H00Q')
    call saveIInInteger('A00I' , "buffAbil" , 'H00R')
    call saveIInInteger('A00J' , "buffAbil" , 'H00S')
    call saveIInInteger('A00K' , "buffAbil" , 'H00T')
    call saveIInInteger('A00L' , "buffAbil" , 'H00U')
    call saveIInInteger('A00M' , "buffAbil" , 'H00V')
    call saveIInInteger('A00N' , "buffAbil" , 'H00W')
    call saveIInInteger('A00O' , "buffAbil" , 'H00X')
    call saveIInInteger('A00P' , "buffAbil" , 'H00Y')
    call saveIInInteger('A00Q' , "buffAbil" , 'H00Z')
    call saveIInInteger('A00R' , "buffAbil" , 'H010')
    call saveIInInteger('A00S' , "buffAbil" , 'H011')
    call saveIInInteger('A00T' , "buffAbil" , 'H012')
    call saveIInInteger('A00U' , "buffAbil" , 'H013')
	call saveIInInteger('A00V' , "buffAbil" , 'H014')
	call saveIInInteger('A00W' , "buffAbil" , 'H015')
	call saveIInInteger('A00X' , "buffAbil" , 'H016')
	call saveIInInteger('A00Y' , "buffAbil" , 'H017')
	call saveIInInteger('A00Z' , "buffAbil" , 'H018')
	call saveIInInteger('A010' , "buffAbil" , 'H019')
	call saveIInInteger('A011' , "buffAbil" , 'H01A')
	call saveIInInteger('A012' , "buffAbil" , 'H01B')
	call saveIInInteger('A013' , "buffAbil" , 'H01C')
	call saveIInInteger('A014' , "buffAbil" , 'H01D')
	call saveIInInteger('A016' , "buffAbil" , 'H01F')
	call saveIInInteger('A017' , "buffAbil" , 'H01G')
	call saveIInInteger('A018' , "buffAbil" , 'H01H')
	call saveIInInteger('A019' , "buffAbil" , 'H01I')
	call saveIInInteger('A01A' , "buffAbil" , 'H01J')
	call saveIInInteger('A01B' , "buffAbil" , 'H01K')
	call saveIInInteger('A01C' , "buffAbil" , 'H01L')
	call saveIInInteger('A01D' , "buffAbil" , 'H01M')
	call saveIInInteger('A01E' , "buffAbil" , 'H01N')
	call saveIInInteger('A01F' , "buffAbil" , 'H01O')
	call saveIInInteger('A01G' , "buffAbil" , 'H01P')
	call saveIInInteger('A01H' , "buffAbil" , 'H01Q')
	call saveIInInteger('A01I' , "buffAbil" , 'H01R')
	call saveIInInteger('A01J' , "buffAbil" , 'H01S')
	call saveIInInteger('A01K' , "buffAbil" , 'H01T')
	call saveIInInteger('A01L' , "buffAbil" , 'H01U')
	call saveIInInteger('A01M' , "buffAbil" , 'H01V')
	call saveIInInteger('A01N' , "buffAbil" , 'H01W')
	call saveIInInteger('A01O' , "buffAbil" , 'H01X')
	call saveIInInteger('A01P' , "buffAbil" , 'H01Y')
	call saveIInInteger('A01Q' , "buffAbil" , 'H01Z')
	call saveIInInteger('A01R' , "buffAbil" , 'H020')
	call saveIInInteger('A01S' , "buffAbil" , 'H021')
	call saveIInInteger('A01T' , "buffAbil" , 'H022')
	call saveIInInteger('A01U' , "buffAbil" , 'H023')
endfunction
//===========================================================================
function InitTrig_AbilityData takes nothing returns nothing
    set gg_trg_AbilityData=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_AbilityData, function Trig_AbilityDataActions)
endfunction
//===========================================================================
// Trigger: InitAbilTrg
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_InitAbilTrgActions takes nothing returns nothing
    
    call remindAllPlayers(2 , "初始化英雄技能。")
    call TriggerExecute(gg_trg_AbilityData)
    call remindAllPlayers(2 , "加载英雄技能完毕！")
endfunction
//===========================================================================
function InitTrig_InitAbilTrg takes nothing returns nothing
    set gg_trg_InitAbilTrg=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_InitAbilTrg, function Trig_InitAbilTrgActions)
endfunction
//===========================================================================
// Trigger: CameraUp
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_CameraUpActions takes nothing returns nothing
    local real dis= GetCameraField(CAMERA_FIELD_TARGET_DISTANCE) + 50
    if ( GetLocalPlayer() == Player(0) ) then
        call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE, dis, 0)
    endif
endfunction
//===========================================================================
function InitTrig_CameraUp takes nothing returns nothing
    set gg_trg_CameraUp=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerChatEvent(gg_trg_CameraUp, Player(0), "-cam up", true)
    call TriggerAddAction(gg_trg_CameraUp, function Trig_CameraUpActions)
endfunction
//===========================================================================
// Trigger: CameraDown
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_CameraDownActions takes nothing returns nothing
    local real dis= GetCameraField(CAMERA_FIELD_TARGET_DISTANCE) - 50
    if ( GetLocalPlayer() == Player(0) ) then
        call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE, dis, 0)
    endif
endfunction
//===========================================================================
function InitTrig_CameraDown takes nothing returns nothing
    set gg_trg_CameraDown=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerChatEvent(gg_trg_CameraDown, Player(0), "-cam down", true)
    call TriggerAddAction(gg_trg_CameraDown, function Trig_CameraDownActions)
endfunction
//===========================================================================
// Trigger: CloseDebuging
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_CloseDebugingActions takes nothing returns nothing
    //关闭测试指令的触发，需要则再打开
    call DisableTrigger(gg_trg_OpenFog)
    call DisableTrigger(gg_trg_CloseFog)
    call DisableTrigger(gg_trg_LevelUp)
    call DisableTrigger(gg_trg_SetStr)
    call DisableTrigger(gg_trg_SetAgi)
    call DisableTrigger(gg_trg_SetInt)
    call DisableTrigger(gg_trg_ShowAction)
    
endfunction
//===========================================================================
function InitTrig_CloseDebuging takes nothing returns nothing
    set gg_trg_CloseDebuging=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_CloseDebuging, function Trig_CloseDebugingActions)
endfunction
//===========================================================================
// Trigger: OpenDebuging
//===========================================================================
//TESH.scrollpos=5
//TESH.alwaysfold=0
function Trig_OpenDebugingActions takes nothing returns nothing
    
    local integer i= 0
    
    loop
        call DisplayTimedTextToPlayer(Player(i), 0, 0, 2, "启动调试模型，在该模式下，玩家一可以启动F9的调试指令")
        set i=i + 1
        exitwhen i > 9
    endloop
    
    
    call EnableTrigger(gg_trg_OpenFog)
    call EnableTrigger(gg_trg_CloseFog)
    call EnableTrigger(gg_trg_LevelUp)
    call EnableTrigger(gg_trg_SetStr)
    call EnableTrigger(gg_trg_SetAgi)
    call EnableTrigger(gg_trg_SetInt)
    call EnableTrigger(gg_trg_ShowAction)
    
    
endfunction
//===========================================================================
function InitTrig_OpenDebuging takes nothing returns nothing
    set gg_trg_OpenDebuging=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerChatEvent(gg_trg_OpenDebuging, Player(0), "-opendebugtesting", true)
    call TriggerAddAction(gg_trg_OpenDebuging, function Trig_OpenDebugingActions)
endfunction
//===========================================================================
// Trigger: OpenFog
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_OpenFogActions takes nothing returns nothing
    call FogEnable(true)
    call FogMaskEnable(true)
    
endfunction
//===========================================================================
function InitTrig_OpenFog takes nothing returns nothing
    set gg_trg_OpenFog=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerChatEvent(gg_trg_OpenFog, Player(0), "-OpenFog", true)
    call TriggerAddAction(gg_trg_OpenFog, function Trig_OpenFogActions)
endfunction
//===========================================================================
// Trigger: CloseFog
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_CloseFogActions takes nothing returns nothing
    call FogEnable(false)
    call FogMaskEnable(false)
endfunction
//===========================================================================
function InitTrig_CloseFog takes nothing returns nothing
    set gg_trg_CloseFog=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerChatEvent(gg_trg_CloseFog, Player(0), "-closeFog", true)
    call TriggerAddAction(gg_trg_CloseFog, function Trig_CloseFogActions)
endfunction
//===========================================================================
// Trigger: LevelUp
//===========================================================================
//TESH.scrollpos=9
//TESH.alwaysfold=0
function LU_EventCondition takes nothing returns boolean
    
    return ( StringLength(GetEventPlayerChatString()) != 6 )
    
endfunction
function Trig_LivelUpActions takes nothing returns nothing
    local string s
    local integer level
    local unit hero= getFirstHeroSelected(GetTriggerPlayer())
    
    if ( hero == null ) then
        return
    endif
    
    set s=SubString(GetEventPlayerChatString(), 6, StringLength(GetEventPlayerChatString()))
    set level=S2I(s)
    call setHeroLevel(hero , level , true)
    call debugText(2 , s)
    
    set hero=null
endfunction
//===========================================================================
function InitTrig_LevelUp takes nothing returns nothing
    set gg_trg_LevelUp=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerChatEvent(gg_trg_LevelUp, Player(0), "-level", false)
    call TriggerAddCondition(gg_trg_LevelUp, Condition(function LU_EventCondition))
    call TriggerAddAction(gg_trg_LevelUp, function Trig_LivelUpActions)
endfunction
//===========================================================================
// Trigger: SetStr
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_SetStrConditions takes nothing returns boolean
    return ( SubString(GetEventPlayerChatString(), 0, 4) == "-str" )
endfunction
function Trig_SetStrActions takes nothing returns nothing
    local unit hero= getFirstHeroSelected(GetTriggerPlayer())
    local integer value= S2I(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
    if ( hero == null ) then
        return
    endif
    
    call SetHeroStr(hero, value, true)
    set hero=null
endfunction
//===========================================================================
function InitTrig_SetStr takes nothing returns nothing
    set gg_trg_SetStr=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerChatEvent(gg_trg_SetStr, Player(0), "-str", false)
    call TriggerAddCondition(gg_trg_SetStr, Condition(function Trig_SetStrConditions))
    call TriggerAddAction(gg_trg_SetStr, function Trig_SetStrActions)
endfunction
//===========================================================================
// Trigger: SetAgi
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_SetAgiConditions takes nothing returns boolean
    return ( SubString(GetEventPlayerChatString(), 0, 4) == "-agi" )
endfunction
function Trig_SetAgiActions takes nothing returns nothing
    local unit hero= getFirstHeroSelected(GetTriggerPlayer())
    local integer value= S2I(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
    if ( hero == null ) then
        return
    endif
    
    call SetHeroAgi(hero, value, true)
    set hero=null
endfunction
//===========================================================================
function InitTrig_SetAgi takes nothing returns nothing
    set gg_trg_SetAgi=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerChatEvent(gg_trg_SetAgi, Player(0), "-agi", false)
    call TriggerAddCondition(gg_trg_SetAgi, Condition(function Trig_SetAgiConditions))
    call TriggerAddAction(gg_trg_SetAgi, function Trig_SetAgiActions)
endfunction
//===========================================================================
// Trigger: SetInt
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_SetIntConditions takes nothing returns boolean
    return ( SubString(GetEventPlayerChatString(), 0, 4) == "-int" )
endfunction
function Trig_SetIntActions takes nothing returns nothing
    local unit hero= getFirstHeroSelected(GetTriggerPlayer())
    local integer value= S2I(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
    if ( hero == null ) then
        return
    endif
    
    call SetHeroInt(hero, value, true)
    set hero=null
endfunction
//===========================================================================
function InitTrig_SetInt takes nothing returns nothing
    set gg_trg_SetInt=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerChatEvent(gg_trg_SetInt, Player(0), "-int", false)
    call TriggerAddCondition(gg_trg_SetInt, Condition(function Trig_SetIntConditions))
    call TriggerAddAction(gg_trg_SetInt, function Trig_SetIntActions)
endfunction
//===========================================================================
// Trigger: ShowAction
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0
function Trig_ShowActionConditions takes nothing returns boolean
    local string chat= GetEventPlayerChatString()
    local string s= SubString(chat, 0, 7)
    return s == "-action"
endfunction
function Trig_ShowActionActions takes nothing returns nothing
    local string chat= GetEventPlayerChatString()
    local integer end= StringLength(chat)
    local string s= SubString(chat, 7, end + 1)
    local integer number= S2I(SubString(chat, 7, end))
    local player p= GetTriggerPlayer()
    local unit u= getFirstHeroSelected(p)
    
    call SetUnitAnimationByIndex(u, number)
    
    set p=null
    set u=null
endfunction
//===========================================================================
function InitTrig_ShowAction takes nothing returns nothing
    set gg_trg_ShowAction=CreateTrigger()
    call DoNothing()
    call TriggerRegisterPlayerChatEvent(gg_trg_ShowAction, Player(0), "-action", false)
    call TriggerAddCondition(gg_trg_ShowAction, Condition(function Trig_ShowActionConditions))
    call TriggerAddAction(gg_trg_ShowAction, function Trig_ShowActionActions)
endfunction
//===========================================================================
// Trigger: ClickConfirmByTurn
//===========================================================================
//TESH.scrollpos=0
//TESH.alwaysfold=0

function Trig_ClickConfirmByTurnActions takes nothing returns nothing
endfunction
//===========================================================================
function InitTrig_ClickConfirmByTurn takes nothing returns nothing
    set gg_trg_ClickConfirmByTurn=CreateTrigger()
    call DoNothing()
    call TriggerAddAction(gg_trg_ClickConfirmByTurn, function Trig_ClickConfirmByTurnActions)
endfunction
//===========================================================================
function InitCustomTriggers takes nothing returns nothing
    //Function not found: call InitTrig_FuncForDebug()
    //Function not found: call InitTrig_FuncForGame()
    //Function not found: call InitTrig_DataSetAndGet()
    //Function not found: call InitTrig_FuncForRegister()
    //Function not found: call InitTrig_japiConstant()
    //Function not found: call InitTrig_newJapiLibrary()
    //Function not found: call InitTrig_d3dLibrary()
    //Function not found: call InitTrig_______japi___u()
    call InitTrig_initData()
    call InitTrig_AllianceSet()
    call InitTrig_ForbidAbility()
    call InitTrig_GameInitData()
    //Function not found: call InitTrig_Constant()
    call InitTrig_UnitLevel()
    call InitTrig_GameTime()
    call InitTrig_noteUnitMoney()
    call InitTrig_Creeps()
    call InitTrig_InitCreep()
    call InitTrig_StateCreepsFlush()
    call InitTrig_SeaRegionCreep()
    call InitTrig_AncientCreep()
    call InitTrig_SnowCreep()
    call InitTrig_MagmaCreep()
    call InitTrig_BossCreep()
    call InitTrig_Soldiers()
    call InitTrig_AttackDir()
    call InitTrig_Towers()
    call InitTrig_InitAttackAndDef()
    call InitTrig_StateFlushSoldiersAll()
    call InitTrig_SoldierLeak()
    call InitTrig_CreateSoldiersUp()
    call InitTrig_SoldierAttackUp()
    call InitTrig_CreateSoldiersDow()
    call InitTrig_SoldierAttackDow()
    call InitTrig_CreateSoldiersMin()
    call InitTrig_SoldierAttackMin()
    call InitTrig_SoldierProtect()
    call InitTrig_TowerProtect()
    call InitTrig_TowerAttack()
    call InitTrig_TowerDefendRel()
    call InitTrig_SeaAreas()
    call InitTrig_UnitSeaDebuff()
    call InitTrig_InitSeaData()
    call InitTrig_EnterSea()
    call InitTrig_ExitSea()
    call InitTrig_HeroInfo()
    call InitTrig_PlayerHashInfo()
    call InitTrig_InitChooseInterface()
    call InitTrig_startChosenInterface()
    call InitTrig_ChooseInterface()
    call InitTrig_CreatePanel()
    call InitTrig_ClickRandom()
    call InitTrig_ClickConfirm()
    call InitTrig_ClickHeroPict()
    call InitTrig_Repick()
    call InitTrig_TurnToChoose()
    call InitTrig_UseTurnChoose()
    call InitTrig_NotifyPanel()
    call InitTrig_InitPanel()
    call InitTrig_HeroRelive()
    call InitTrig_KillerHero()
    call InitTrig_AssistDamage()
    call InitTrig_killAndDeny()
    call InitTrig_AttackAlly()
    call InitTrig_ForbidAttackTower()
    call InitTrig_DialogBox()
    call InitTrig_DialogClick()
    call InitTrig_GamePrepare()
    call InitTrig_GameStart()
    call InitTrig_AbilityData()
    call InitTrig_InitAbilTrg()
    call InitTrig_CameraUp()
    call InitTrig_CameraDown()
    call InitTrig_CloseDebuging()
    call InitTrig_OpenDebuging()
    call InitTrig_OpenFog()
    call InitTrig_CloseFog()
    call InitTrig_LevelUp()
    call InitTrig_SetStr()
    call InitTrig_SetAgi()
    call InitTrig_SetInt()
    call InitTrig_ShowAction()
    call InitTrig_ClickConfirmByTurn()
endfunction
//===========================================================================
function RunInitializationTriggers takes nothing returns nothing
    call ConditionalTriggerExecute(gg_trg_FuncForGame)
    call ConditionalTriggerExecute(gg_trg_initData)
    call ConditionalTriggerExecute(gg_trg_AllianceSet)
    call ConditionalTriggerExecute(gg_trg_ForbidAbility)
    call ConditionalTriggerExecute(gg_trg_noteUnitMoney)
endfunction
//***************************************************************************
//*
//*  Players
//*
//***************************************************************************
function InitCustomPlayerSlots takes nothing returns nothing
    // Player 0
    call SetPlayerStartLocation(Player(0), 0)
    call SetPlayerColor(Player(0), ConvertPlayerColor(0))
    call SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(0), false)
    call SetPlayerController(Player(0), MAP_CONTROL_USER)
    // Player 1
    call SetPlayerStartLocation(Player(1), 1)
    call SetPlayerColor(Player(1), ConvertPlayerColor(1))
    call SetPlayerRacePreference(Player(1), RACE_PREF_ORC)
    call SetPlayerRaceSelectable(Player(1), false)
    call SetPlayerController(Player(1), MAP_CONTROL_USER)
    // Player 2
    call SetPlayerStartLocation(Player(2), 2)
    call SetPlayerColor(Player(2), ConvertPlayerColor(2))
    call SetPlayerRacePreference(Player(2), RACE_PREF_UNDEAD)
    call SetPlayerRaceSelectable(Player(2), false)
    call SetPlayerController(Player(2), MAP_CONTROL_USER)
    // Player 3
    call SetPlayerStartLocation(Player(3), 3)
    call SetPlayerColor(Player(3), ConvertPlayerColor(3))
    call SetPlayerRacePreference(Player(3), RACE_PREF_NIGHTELF)
    call SetPlayerRaceSelectable(Player(3), false)
    call SetPlayerController(Player(3), MAP_CONTROL_USER)
    // Player 4
    call SetPlayerStartLocation(Player(4), 4)
    call SetPlayerColor(Player(4), ConvertPlayerColor(4))
    call SetPlayerRacePreference(Player(4), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(4), false)
    call SetPlayerController(Player(4), MAP_CONTROL_USER)
    // Player 5
    call SetPlayerStartLocation(Player(5), 5)
    call SetPlayerColor(Player(5), ConvertPlayerColor(5))
    call SetPlayerRacePreference(Player(5), RACE_PREF_ORC)
    call SetPlayerRaceSelectable(Player(5), false)
    call SetPlayerController(Player(5), MAP_CONTROL_USER)
    // Player 6
    call SetPlayerStartLocation(Player(6), 6)
    call SetPlayerColor(Player(6), ConvertPlayerColor(6))
    call SetPlayerRacePreference(Player(6), RACE_PREF_UNDEAD)
    call SetPlayerRaceSelectable(Player(6), false)
    call SetPlayerController(Player(6), MAP_CONTROL_USER)
    // Player 7
    call SetPlayerStartLocation(Player(7), 7)
    call SetPlayerColor(Player(7), ConvertPlayerColor(7))
    call SetPlayerRacePreference(Player(7), RACE_PREF_NIGHTELF)
    call SetPlayerRaceSelectable(Player(7), false)
    call SetPlayerController(Player(7), MAP_CONTROL_USER)
    // Player 8
    call SetPlayerStartLocation(Player(8), 8)
    call SetPlayerColor(Player(8), ConvertPlayerColor(8))
    call SetPlayerRacePreference(Player(8), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(8), false)
    call SetPlayerController(Player(8), MAP_CONTROL_USER)
    // Player 9
    call SetPlayerStartLocation(Player(9), 9)
    call SetPlayerColor(Player(9), ConvertPlayerColor(9))
    call SetPlayerRacePreference(Player(9), RACE_PREF_ORC)
    call SetPlayerRaceSelectable(Player(9), false)
    call SetPlayerController(Player(9), MAP_CONTROL_USER)
    // Player 10
    call SetPlayerStartLocation(Player(10), 10)
    call SetPlayerColor(Player(10), ConvertPlayerColor(10))
    call SetPlayerRacePreference(Player(10), RACE_PREF_UNDEAD)
    call SetPlayerRaceSelectable(Player(10), false)
    call SetPlayerController(Player(10), MAP_CONTROL_USER)
    // Player 11
    call SetPlayerStartLocation(Player(11), 11)
    call SetPlayerColor(Player(11), ConvertPlayerColor(11))
    call SetPlayerRacePreference(Player(11), RACE_PREF_NIGHTELF)
    call SetPlayerRaceSelectable(Player(11), false)
    call SetPlayerController(Player(11), MAP_CONTROL_USER)
endfunction
function InitCustomTeams takes nothing returns nothing
    // Force: TRIGSTR_013
    call SetPlayerTeam(Player(0), 0)
    call SetPlayerTeam(Player(1), 0)
    call SetPlayerTeam(Player(2), 0)
    call SetPlayerTeam(Player(3), 0)
    call SetPlayerTeam(Player(4), 0)
    //   Allied
    call SetPlayerAllianceStateAllyBJ(Player(0), Player(1), true)
    call SetPlayerAllianceStateAllyBJ(Player(0), Player(2), true)
    call SetPlayerAllianceStateAllyBJ(Player(0), Player(3), true)
    call SetPlayerAllianceStateAllyBJ(Player(0), Player(4), true)
    call SetPlayerAllianceStateAllyBJ(Player(1), Player(0), true)
    call SetPlayerAllianceStateAllyBJ(Player(1), Player(2), true)
    call SetPlayerAllianceStateAllyBJ(Player(1), Player(3), true)
    call SetPlayerAllianceStateAllyBJ(Player(1), Player(4), true)
    call SetPlayerAllianceStateAllyBJ(Player(2), Player(0), true)
    call SetPlayerAllianceStateAllyBJ(Player(2), Player(1), true)
    call SetPlayerAllianceStateAllyBJ(Player(2), Player(3), true)
    call SetPlayerAllianceStateAllyBJ(Player(2), Player(4), true)
    call SetPlayerAllianceStateAllyBJ(Player(3), Player(0), true)
    call SetPlayerAllianceStateAllyBJ(Player(3), Player(1), true)
    call SetPlayerAllianceStateAllyBJ(Player(3), Player(2), true)
    call SetPlayerAllianceStateAllyBJ(Player(3), Player(4), true)
    call SetPlayerAllianceStateAllyBJ(Player(4), Player(0), true)
    call SetPlayerAllianceStateAllyBJ(Player(4), Player(1), true)
    call SetPlayerAllianceStateAllyBJ(Player(4), Player(2), true)
    call SetPlayerAllianceStateAllyBJ(Player(4), Player(3), true)
    //   Shared Vision
    call SetPlayerAllianceStateVisionBJ(Player(0), Player(1), true)
    call SetPlayerAllianceStateVisionBJ(Player(0), Player(2), true)
    call SetPlayerAllianceStateVisionBJ(Player(0), Player(3), true)
    call SetPlayerAllianceStateVisionBJ(Player(0), Player(4), true)
    call SetPlayerAllianceStateVisionBJ(Player(1), Player(0), true)
    call SetPlayerAllianceStateVisionBJ(Player(1), Player(2), true)
    call SetPlayerAllianceStateVisionBJ(Player(1), Player(3), true)
    call SetPlayerAllianceStateVisionBJ(Player(1), Player(4), true)
    call SetPlayerAllianceStateVisionBJ(Player(2), Player(0), true)
    call SetPlayerAllianceStateVisionBJ(Player(2), Player(1), true)
    call SetPlayerAllianceStateVisionBJ(Player(2), Player(3), true)
    call SetPlayerAllianceStateVisionBJ(Player(2), Player(4), true)
    call SetPlayerAllianceStateVisionBJ(Player(3), Player(0), true)
    call SetPlayerAllianceStateVisionBJ(Player(3), Player(1), true)
    call SetPlayerAllianceStateVisionBJ(Player(3), Player(2), true)
    call SetPlayerAllianceStateVisionBJ(Player(3), Player(4), true)
    call SetPlayerAllianceStateVisionBJ(Player(4), Player(0), true)
    call SetPlayerAllianceStateVisionBJ(Player(4), Player(1), true)
    call SetPlayerAllianceStateVisionBJ(Player(4), Player(2), true)
    call SetPlayerAllianceStateVisionBJ(Player(4), Player(3), true)
    // Force: TRIGSTR_014
    call SetPlayerTeam(Player(5), 1)
    call SetPlayerTeam(Player(6), 1)
    call SetPlayerTeam(Player(7), 1)
    call SetPlayerTeam(Player(8), 1)
    call SetPlayerTeam(Player(9), 1)
    //   Allied
    call SetPlayerAllianceStateAllyBJ(Player(5), Player(6), true)
    call SetPlayerAllianceStateAllyBJ(Player(5), Player(7), true)
    call SetPlayerAllianceStateAllyBJ(Player(5), Player(8), true)
    call SetPlayerAllianceStateAllyBJ(Player(5), Player(9), true)
    call SetPlayerAllianceStateAllyBJ(Player(6), Player(5), true)
    call SetPlayerAllianceStateAllyBJ(Player(6), Player(7), true)
    call SetPlayerAllianceStateAllyBJ(Player(6), Player(8), true)
    call SetPlayerAllianceStateAllyBJ(Player(6), Player(9), true)
    call SetPlayerAllianceStateAllyBJ(Player(7), Player(5), true)
    call SetPlayerAllianceStateAllyBJ(Player(7), Player(6), true)
    call SetPlayerAllianceStateAllyBJ(Player(7), Player(8), true)
    call SetPlayerAllianceStateAllyBJ(Player(7), Player(9), true)
    call SetPlayerAllianceStateAllyBJ(Player(8), Player(5), true)
    call SetPlayerAllianceStateAllyBJ(Player(8), Player(6), true)
    call SetPlayerAllianceStateAllyBJ(Player(8), Player(7), true)
    call SetPlayerAllianceStateAllyBJ(Player(8), Player(9), true)
    call SetPlayerAllianceStateAllyBJ(Player(9), Player(5), true)
    call SetPlayerAllianceStateAllyBJ(Player(9), Player(6), true)
    call SetPlayerAllianceStateAllyBJ(Player(9), Player(7), true)
    call SetPlayerAllianceStateAllyBJ(Player(9), Player(8), true)
    //   Shared Vision
    call SetPlayerAllianceStateVisionBJ(Player(5), Player(6), true)
    call SetPlayerAllianceStateVisionBJ(Player(5), Player(7), true)
    call SetPlayerAllianceStateVisionBJ(Player(5), Player(8), true)
    call SetPlayerAllianceStateVisionBJ(Player(5), Player(9), true)
    call SetPlayerAllianceStateVisionBJ(Player(6), Player(5), true)
    call SetPlayerAllianceStateVisionBJ(Player(6), Player(7), true)
    call SetPlayerAllianceStateVisionBJ(Player(6), Player(8), true)
    call SetPlayerAllianceStateVisionBJ(Player(6), Player(9), true)
    call SetPlayerAllianceStateVisionBJ(Player(7), Player(5), true)
    call SetPlayerAllianceStateVisionBJ(Player(7), Player(6), true)
    call SetPlayerAllianceStateVisionBJ(Player(7), Player(8), true)
    call SetPlayerAllianceStateVisionBJ(Player(7), Player(9), true)
    call SetPlayerAllianceStateVisionBJ(Player(8), Player(5), true)
    call SetPlayerAllianceStateVisionBJ(Player(8), Player(6), true)
    call SetPlayerAllianceStateVisionBJ(Player(8), Player(7), true)
    call SetPlayerAllianceStateVisionBJ(Player(8), Player(9), true)
    call SetPlayerAllianceStateVisionBJ(Player(9), Player(5), true)
    call SetPlayerAllianceStateVisionBJ(Player(9), Player(6), true)
    call SetPlayerAllianceStateVisionBJ(Player(9), Player(7), true)
    call SetPlayerAllianceStateVisionBJ(Player(9), Player(8), true)
    // Force: TRIGSTR_015
    call SetPlayerTeam(Player(10), 2)
    call SetPlayerTeam(Player(11), 2)
endfunction
function InitAllyPriorities takes nothing returns nothing
    call SetStartLocPrioCount(0, 3)
    call SetStartLocPrio(0, 0, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(0, 1, 10, MAP_LOC_PRIO_LOW)
    call SetStartLocPrio(0, 2, 11, MAP_LOC_PRIO_LOW)
    call SetStartLocPrioCount(1, 2)
    call SetStartLocPrio(1, 0, 10, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(1, 1, 11, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrioCount(2, 2)
    call SetStartLocPrio(2, 0, 8, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(2, 1, 9, MAP_LOC_PRIO_LOW)
    call SetStartLocPrioCount(3, 3)
    call SetStartLocPrio(3, 0, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(3, 1, 7, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(3, 2, 10, MAP_LOC_PRIO_LOW)
    call SetStartLocPrioCount(4, 5)
    call SetStartLocPrio(4, 0, 1, MAP_LOC_PRIO_LOW)
    call SetStartLocPrio(4, 1, 6, MAP_LOC_PRIO_LOW)
    call SetStartLocPrio(4, 2, 7, MAP_LOC_PRIO_LOW)
    call SetStartLocPrio(4, 3, 10, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(4, 4, 11, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrioCount(5, 6)
    call SetStartLocPrio(5, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(5, 1, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(5, 2, 4, MAP_LOC_PRIO_LOW)
    call SetStartLocPrio(5, 3, 6, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(5, 4, 10, MAP_LOC_PRIO_LOW)
    call SetStartLocPrio(5, 5, 11, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrioCount(6, 4)
    call SetStartLocPrio(6, 0, 1, MAP_LOC_PRIO_LOW)
    call SetStartLocPrio(6, 1, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(6, 2, 10, MAP_LOC_PRIO_LOW)
    call SetStartLocPrio(6, 3, 11, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrioCount(7, 1)
    call SetStartLocPrio(7, 0, 10, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrioCount(8, 1)
    call SetStartLocPrio(8, 0, 9, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrioCount(9, 1)
    call SetStartLocPrio(9, 0, 8, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrioCount(10, 3)
    call SetStartLocPrio(10, 0, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(10, 1, 7, MAP_LOC_PRIO_LOW)
    call SetStartLocPrio(10, 2, 11, MAP_LOC_PRIO_LOW)
    call SetStartLocPrioCount(11, 2)
    call SetStartLocPrio(11, 0, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(11, 1, 10, MAP_LOC_PRIO_LOW)
endfunction
//***************************************************************************
//*
//*  Main Initialization
//*
//***************************************************************************
//===========================================================================
function main takes nothing returns nothing
    
        local integer init_plugin_memory=JapiConstantLib_init()
        local integer init_plugin_execute=initializePlugin()
        call SetCameraBounds(- 7424.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), - 7680.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 7424.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 7168.0 - GetCameraMargin(CAMERA_MARGIN_TOP), - 7424.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 7168.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 7424.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), - 7680.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
    call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
    call NewSoundEnvironment("Default")
    call SetAmbientDaySound("LordaeronSummerDay")
    call SetAmbientNightSound("LordaeronSummerNight")
    call SetMapMusic("Music", true, 0)
    call CreateRegions()
    call CreateAllItems()
    call CreateAllUnits()
    call InitBlizzard()

call ExecuteFunc("jasshelper__initstructs3620250")

    call InitGlobals()
    call InitCustomTriggers()
    call RunInitializationTriggers()
endfunction
//***************************************************************************
//*
//*  Map Configuration
//*
//***************************************************************************
function config takes nothing returns nothing
    call SetMapName("OPforNewWorld")
    call SetMapDescription("没有说明")
    call SetPlayers(12)
    call SetTeams(12)
    call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
    call DefineStartLocation(0, - 960.0, - 1216.0)
    call DefineStartLocation(1, - 1024.0, - 1088.0)
    call DefineStartLocation(2, - 640.0, - 1280.0)
    call DefineStartLocation(3, - 1024.0, - 768.0)
    call DefineStartLocation(4, - 1152.0, - 960.0)
    call DefineStartLocation(5, - 1216.0, - 1472.0)
    call DefineStartLocation(6, - 1280.0, - 1088.0)
    call DefineStartLocation(7, - 960.0, - 960.0)
    call DefineStartLocation(8, - 640.0, - 1088.0)
    call DefineStartLocation(9, - 704.0, - 1024.0)
    call DefineStartLocation(10, - 1024.0, - 1024.0)
    call DefineStartLocation(11, - 1088.0, - 1088.0)
    // Player setup
    call InitCustomPlayerSlots()
    call InitCustomTeams()
    call InitAllyPriorities()
endfunction




//Struct method generated initializers/callers:
function sa__LOGFONT_onDestroy takes nothing returns boolean
local integer this=f__arg_this
            call DestroyFont(s__LOGFONT_font[this])
   return true
endfunction

function jasshelper__initstructs3620250 takes nothing returns nothing
    set st__LOGFONT_onDestroy=CreateTrigger()
    call TriggerAddCondition(st__LOGFONT_onDestroy,Condition( function sa__LOGFONT_onDestroy))


endfunction

